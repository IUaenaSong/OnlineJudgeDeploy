(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ac851b7"],{2155:function(e,i,s){"use strict";s.r(i);var t=function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"setting-main"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{sm:24,md:8,lg:8}},[s("div",{staticClass:"left"},[s("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Password")))]),s("el-form",{ref:"formPassword",staticClass:"setting-content",attrs:{model:e.formPassword,rules:e.rulePassword}},[s("el-form-item",{attrs:{label:e.$t("m.Old_Password"),prop:"oldPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.formPassword.oldPassword,callback:function(i){e.$set(e.formPassword,"oldPassword",i)},expression:"formPassword.oldPassword"}})],1),s("el-form-item",{attrs:{label:e.$t("m.New_Password"),prop:"newPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.formPassword.newPassword,callback:function(i){e.$set(e.formPassword,"newPassword",i)},expression:"formPassword.newPassword"}})],1),s("el-form-item",{attrs:{label:e.$t("m.Confirm_New_Password"),prop:"againPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.formPassword.againPassword,callback:function(i){e.$set(e.formPassword,"againPassword",i)},expression:"formPassword.againPassword"}})],1)],1),s("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.passwordSlideBlock,callback:function(i){e.$set(e.visible,"passwordSlideBlock",i)},expression:"visible.passwordSlideBlock"}},[s("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnPassword,disabled:e.disabled.btnPassword},slot:"reference"},[e._v(e._s(e.$t("m.Update_Password")))]),s("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.passwordSuccess,expression:"!verify.passwordSuccess"}],ref:"passwordSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changePassword,again:function(i){return e.onAgain("password")}}}),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.passwordSuccess,expression:"verify.passwordSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.passwordMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.passwordAlert.show,expression:"visible.passwordAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.passwordAlert.title,type:e.visible.passwordAlert.type,description:e.visible.passwordAlert.description,closable:!1,effect:"dark","show-icon":""}})],1),s("el-col",{attrs:{sm:24,md:8,lg:8}},[s("div",{staticClass:"right"},[s("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Email")))]),s("el-form",{ref:"formEmail",staticClass:"setting-content",attrs:{model:e.formEmail,rules:e.ruleEmail}},[s("el-form-item",{attrs:{label:e.$t("m.Current_Password"),prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.formEmail.password,callback:function(i){e.$set(e.formEmail,"password",i)},expression:"formEmail.password"}})],1),s("el-form-item",{attrs:{label:e.$t("m.Old_Email")}},[s("el-input",{attrs:{disabled:"","prefix-icon":"el-icon-message"},model:{value:e.formEmail.oldEmail,callback:function(i){e.$set(e.formEmail,"oldEmail",i)},expression:"formEmail.oldEmail"}})],1),s("el-form-item",{attrs:{label:e.$t("m.New_Email"),prop:"newEmail"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-message"},model:{value:e.formEmail.newEmail,callback:function(i){e.$set(e.formEmail,"newEmail",i)},expression:"formEmail.newEmail"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-message",type:"primary",loading:e.btnEmailLoading},nativeOn:{click:function(i){return e.sendChangeEmail.apply(null,arguments)}},slot:"append"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.btnEmailLoading,expression:"btnEmailLoading"}]},[e._v(e._s(e.emailCountdownNum))])])],1)],1),s("el-form-item",{attrs:{label:e.$t("m.Captcha"),prop:"code"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-s-check",placeholder:e.$t("m.Change_Email_Captcha")},model:{value:e.formEmail.code,callback:function(i){e.$set(e.formEmail,"code",i)},expression:"formEmail.code"}})],1)],1),s("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.emailSlideBlock,callback:function(i){e.$set(e.visible,"emailSlideBlock",i)},expression:"visible.emailSlideBlock"}},[s("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnEmail,disabled:e.disabled.btnEmail},slot:"reference"},[e._v(e._s(e.$t("m.Update_Email")))]),s("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.emailSuccess,expression:"!verify.emailSuccess"}],ref:"emailSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changeEmail,again:function(i){return e.onAgain("email")}}}),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.emailSuccess,expression:"verify.emailSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.emailMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.emailAlert.show,expression:"visible.emailAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.emailAlert.title,type:e.visible.emailAlert.type,description:e.visible.emailAlert.description,closable:!1,effect:"dark","show-icon":""}})],1),s("el-col",{attrs:{sm:24,md:8,lg:8}},[s("div",{staticClass:"right"},[s("p",{staticClass:"section-title"},[e._v(e._s(e.$t("m.Change_Mobile")))]),s("el-form",{ref:"formMobile",staticClass:"setting-content",attrs:{model:e.formMobile,rules:e.ruleMobile}},[s("el-form-item",{attrs:{label:e.$t("m.Current_Password"),prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.formMobile.password,callback:function(i){e.$set(e.formMobile,"password",i)},expression:"formMobile.password"}})],1),s("el-form-item",{attrs:{label:e.$t("m.Old_Mobile")}},[s("el-input",{attrs:{disabled:"","prefix-icon":"el-icon-mobile"},model:{value:e.formMobile.oldMobile,callback:function(i){e.$set(e.formMobile,"oldMobile",i)},expression:"formMobile.oldMobile"}})],1),s("el-form-item",{attrs:{label:e.$t("m.New_Mobile"),prop:"newMobile"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-mobile"},model:{value:e.formMobile.newMobile,callback:function(i){e.$set(e.formMobile,"newMobile",i)},expression:"formMobile.newMobile"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-message",type:"primary",loading:e.btnMobileLoading},nativeOn:{click:function(i){return e.sendChangeMobile.apply(null,arguments)}},slot:"append"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.btnMobileLoading,expression:"btnMobileLoading"}]},[e._v(e._s(e.mobileCountdownNum))])])],1)],1),s("el-form-item",{attrs:{label:e.$t("m.Captcha"),prop:"code"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-s-check",placeholder:e.$t("m.Change_Mobile_Captcha")},model:{value:e.formMobile.code,callback:function(i){e.$set(e.formMobile,"code",i)},expression:"formMobile.code"}})],1)],1),s("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"},model:{value:e.visible.mobileSlideBlock,callback:function(i){e.$set(e.visible,"mobileSlideBlock",i)},expression:"visible.mobileSlideBlock"}},[s("el-button",{attrs:{slot:"reference",type:"primary",loading:e.loading.btnMobile,disabled:e.disabled.btnMobile},slot:"reference"},[e._v(e._s(e.$t("m.Update_Mobile")))]),s("slide-verify",{directives:[{name:"show",rawName:"v-show",value:!e.verify.mobileSuccess,expression:"!verify.mobileSuccess"}],ref:"mobileSlideBlock",attrs:{l:42,r:10,w:325,h:100,accuracy:3,"slider-text":e.$t("m.Slide_Verify")},on:{success:e.changeMobile,again:function(i){return e.onAgain("mobile")}}}),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.verify.mobileSuccess,expression:"verify.mobileSuccess"}],attrs:{title:e.$t("m.Slide_Verify_Success"),type:"success",description:e.verify.mobileMsg,center:!0,closable:!1,"show-icon":""}})],1)],1),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.visible.mobileAlert.show,expression:"visible.mobileAlert.show"}],staticStyle:{"margin-top":"15px"},attrs:{title:e.visible.mobileAlert.title,type:e.visible.mobileAlert.type,description:e.visible.mobileAlert.description,closable:!1,effect:"dark","show-icon":""}})],1)],1)],1)},o=[],a=s("5530"),l=(s("d9e2"),s("ac1f"),s("00b4"),s("b680"),s("2f62")),r=s("3228"),n=(s("e05f"),{data:function(){var e=this,i=[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Check_Required")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")}],s=function(i,s,t){s!==e.formPassword.newPassword&&t(new Error(e.$i18n.t("m.Password_does_not_match"))),t()},t=function(i,s,t){""!==e.formPassword.oldPassword&&(e.formPassword.oldPassword===e.formPassword.newPassword?t(new Error(e.$i18n.t("m.The_new_password_does_not_change"))):e.$refs.formPassword.validateField("again_password")),t()},o=function(i,s,t){""!==e.formEmail.oldEmail&&e.formEmail.oldEmail===e.formEmail.newEmail&&t(new Error(e.$i18n.t("m.The_new_email_does_not_change"))),t()},a=function(i,s,t){""!==e.formMobile.oldMobile&&e.formMobile.oldMobile===e.formMobile.newMobile&&t(new Error(e.$i18n.t("m.The_new_mobile_does_not_change"))),t()},l=function(i,s,t){/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(s)||t(new Error(e.$i18n.t("m.Mobile_Check_Format"))),t()};return{btnEmailLoading:!1,btnMobileLoading:!1,emailCountdownNum:null,mobileCountdownNum:null,loading:{btnPassword:!1,btnEmail:!1,btnMobile:!1},disabled:{btnPassword:!1,btnEmail:!1,btnMobile:!1},verify:{passwordSuccess:!1,passwordMsg:"",emailSuccess:!1,emailMsg:"",mobileSuccess:!1,mobileMsg:""},visible:{passwordAlert:{type:"success",show:!1,title:"",description:""},emailAlert:{type:"success",show:!1,title:"",description:""},mobileAlert:{type:"success",show:!1,title:"",description:""},passwordSlideBlock:!1,emailSlideBlock:!1,mobileSlideBlock:!1},formPassword:{oldPassword:"",newPassword:"",againPassword:""},formEmail:{password:"",oldEmail:"",newEmail:"",code:""},formMobile:{password:"",oldMobile:"",newMobile:"",code:""},rulePassword:{oldPassword:i,newPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Check_Required")},{trigger:"blur",min:6,max:20,message:this.$i18n.t("m.Password_Check_Between")},{validator:t,trigger:"blur"}],againPassword:[{required:!0,trigger:"blur",message:this.$i18n.t("m.Password_Again_Check_Required")},{validator:s,trigger:"blur"}]},ruleEmail:{password:i,newEmail:[{required:!0,message:this.$i18n.t("m.Email_Check_Required"),trigger:"blur"},{type:"email",trigger:"change",message:this.$i18n.t("m.Email_Check_Format")},{validator:o,trigger:"blur"}],code:[{required:!0,message:this.$i18n.t("m.Code_Check_Required"),trigger:"blur"},{min:6,max:6,message:this.$i18n.t("m.Code_Check_Length"),trigger:"blur"}]},ruleMobile:{password:i,newMobile:[{required:!0,message:this.$i18n.t("m.Mobile_Check_Required"),trigger:"blur"},{trigger:"change",message:this.$i18n.t("m.Mobile_Check_Format"),validator:l},{validator:a,trigger:"blur"}],code:[{required:!0,message:this.$i18n.t("m.Code_Check_Required"),trigger:"blur"},{min:6,max:6,message:this.$i18n.t("m.Code_Check_Length"),trigger:"blur"}]}}},mounted:function(){this.formEmail.oldEmail=this.$store.getters.userInfo.email||"",this.formMobile.oldMobile=this.$store.getters.userInfo.mobile||""},methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])(["startTimeOut","changeEmailTimeOut","changeMobileTimeOut"])),{},{countDownEmail:function(){var e=this,i=this.timeEmail;0!=i?(this.emailCountdownNum=i,setTimeout((function(){e.countDownEmail()}),1e3)):this.btnEmailLoading=!1},countDownMobile:function(){var e=this,i=this.timeMobile;0!=i?(this.mobileCountdownNum=i,setTimeout((function(){e.countDownMobile()}),1e3)):this.btnMobileLoading=!1},changePassword:function(e){var i=this;this.verify.passwordSuccess=!0;var s=(e/1e3).toFixed(1);this.verify.passwordMsg="Total time "+s+"s",setTimeout((function(){i.visible.passwordSlideBlock=!1,i.verify.passwordSuccess=!1,i.$refs.passwordSlideBlock.reset()}),1e3),this.$refs["formPassword"].validate((function(e){if(e){i.loading.btnPassword=!0;var s=Object.assign({},i.formPassword);delete s.againPassword,r["a"].changePassword(s).then((function(e){i.loading.btnPassword=!1,200==e.data.data.code?(i.$msg.success(i.$i18n.t("m.Update_Successfully")),i.visible.passwordAlert={show:!0,title:i.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},setTimeout((function(){i.visible.passwordAlert=!1,i.$router.push({name:"Logout"})}),5e3)):(i.$msg.error(e.data.msg),i.visible.passwordAlert={show:!0,title:i.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(i.visible.passwordAlert.type="error",i.disabled.btnPassword=!0))}),(function(e){i.loading.btnPassword=!1}))}}))},sendChangeEmail:function(){var e=this,i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i.test(this.formEmail.newEmail)?(this.btnEmailLoading=!0,this.emailCountdownNum="Waiting...",this.formEmail.newEmail&&(this.$msg.info(this.$i18n.t("m.The_system_is_processing")),r["a"].getChangeEmail(this.formEmail.newEmail).then((function(i){null!=i.data.msg&&(e.$msg.success(e.$i18n.t("m.Change_Send_Email_Msg"),1e4),e.countDownEmail(),e.startTimeOut({name:"emailTimeOut"}))}),(function(i){e.btnEmailLoading=!1,e.emailCountdownNum=null})))):this.$msg.error(this.$i18n.t("m.Email_Check_Format"))},sendChangeMobile:function(){var e=this,i=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;i.test(this.formMobile.newMobile)?(this.btnMobileLoading=!0,this.mobileCountdownNum="Waiting...",this.formMobile.newMobile&&(this.$msg.info(this.$i18n.t("m.The_system_is_processing")),r["a"].getChangeMobile(this.formMobile.newMobile).then((function(i){null!=i.data.msg&&(e.$msg.success(e.$i18n.t("m.Change_Send_Mobile_Msg"),1e4),e.countDownMobile(),e.startTimeOut({name:"mobileTimeOut"}))}),(function(i){e.btnMobileLoading=!1,e.mobileCountdownNum=null})))):this.$msg.error(this.$i18n.t("m.Mobile_Check_Format"))},changeEmail:function(e){var i=this;this.verify.emailSuccess=!0;var s=(e/1e3).toFixed(1);this.verify.emailMsg="Total time "+s+"s",setTimeout((function(){i.visible.emailSlideBlock=!1,i.verify.emailSuccess=!1,i.$refs.emailSlideBlock.reset()}),1e3),this.$refs["formEmail"].validate((function(e){if(e){i.loading.btnEmail=!0;var s=Object.assign({},i.formEmail);r["a"].changeEmail(s).then((function(e){i.loading.btnEmail=!1,200==e.data.data.code?(i.$msg.success(i.$i18n.t("m.Update_Successfully")),i.visible.emailAlert={show:!0,title:i.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},i.$store.dispatch("setUserInfo",e.data.data.userInfo),i.$refs["formEmail"].resetFields(),i.formEmail.oldEmail=e.data.data.userInfo.email):(i.$msg.error(e.data.msg),i.visible.emailAlert={show:!0,title:i.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(i.visible.emailAlert.type="error",i.disabled.btnEmail=!0))}),(function(e){i.loading.btnEmail=!1}))}}))},changeMobile:function(e){var i=this;this.verify.mobileSuccess=!0;var s=(e/1e3).toFixed(1);this.verify.mobileMsg="Total time "+s+"s",setTimeout((function(){i.visible.mobileSlideBlock=!1,i.verify.mobileSuccess=!1,i.$refs.mobileSlideBlock.reset()}),1e3),this.$refs["formMobile"].validate((function(e){if(e){i.loading.btnMobile=!0;var s=Object.assign({},i.formMobile);r["a"].changeMobile(s).then((function(e){i.loading.btnMobile=!1,200==e.data.data.code?(i.$msg.success(i.$i18n.t("m.Update_Successfully")),i.visible.mobileAlert={show:!0,title:i.$i18n.t("m.Update_Successfully"),type:"success",description:e.data.data.msg},i.$store.dispatch("setUserInfo",e.data.data.userInfo),i.$refs["formMobile"].resetFields(),i.formMobile.oldMobile=e.data.data.userInfo.mobile):(i.$msg.error(e.data.msg),i.visible.mobileAlert={show:!0,title:i.$i18n.t("m.Update_Failed"),type:"warning",description:e.data.data.msg},403==e.data.data.code&&(i.visible.mobileAlert.type="error",i.disabled.btnMobile=!0))}),(function(e){i.loading.btnMobile=!1}))}}))},onAgain:function(e){"password"?this.$refs.passwordSlideBlock.reset():"email"?this.$refs.emailSlideBlock.reset():this.$refs.mobileSlideBlock.reset(),this.$msg.warning(this.$i18n.t("m.Guess_robot"))}}),computed:Object(a["a"])(Object(a["a"])({},Object(l["c"])(["emailTimeOut","mobileTimeOut"])),{},{timeEmail:{get:function(){return this.emailTimeOut},set:function(e){this.changeEmailTimeOut({timeEmail:e})}},timeMobile:{get:function(){return this.mobileTimeOut},set:function(e){this.changeMobileTimeOut({timeMobile:e})}}}),created:function(){90!=this.timeEmail&&0!=this.timeEmail&&(this.btnEmailLoading=!0,this.countDownEmail()),90!=this.timeMobile&&0!=this.timeMobile&&(this.btnMobileLoading=!0,this.countDownMobile())}}),m=n,d=(s("e63e"),s("2877")),c=Object(d["a"])(m,t,o,!1,null,"1b816762",null);i["default"]=c.exports},e63e:function(e,i,s){"use strict";s("f9da")},f9da:function(e,i,s){}}]);