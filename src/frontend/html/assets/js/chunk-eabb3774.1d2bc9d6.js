(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eabb3774","chunk-13f2b59d"],{"07f4":function(t,i,e){},"2dbf":function(t,i,e){"use strict";e("07f4")},"7e81":function(t,i,e){},"857a":function(t,i,e){var a=e("e330"),n=e("1d80"),r=e("577e"),l=/"/g,s=a("".replace);t.exports=function(t,i,e,a){var o=r(n(t)),u="<"+i;return""!==e&&(u+=" "+e+'="'+s(r(a),l,"&quot;")+'"'),u+">"+o+"</"+i+">"}},"92bc":function(t,i,e){"use strict";e("7e81")},9911:function(t,i,e){"use strict";var a=e("23e7"),n=e("857a"),r=e("af03");a({target:"String",proto:!0,forced:r("link")},{link:function(t){return n(this,"a","href",t)}})},a956:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("mavon-editor",{ref:"md",style:0!=t.height?"min-height:"+t.height+"px":"",attrs:{ishljs:!0,html:t.openHtml,autofocus:!1,toolbars:t.toolbars,codeStyle:"arduino-light",toolbarsFlag:t.toolbarsFlag},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[e("button",{staticClass:"op-icon fa markdown-upload",attrs:{type:"button",title:t.$t("m.Upload_file"),"aria-hidden":"true"},on:{click:t.uploadFile}},[e("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(i){t.currentValue=i},expression:"currentValue"}}),e("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)},n=[],r=e("5530"),l=(e("a9e3"),e("9911"),e("99af"),e("b0c0"),e("2f62")),s=e("b355"),o={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0},toolbarsFlag:{type:Boolean,default:!0},height:{type:Number,default:0}},data:function(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created:function(){(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID)&&(this.toolbars.imagelink=!0)},methods:{$imgAdd:function(t,i){var e=this;if(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID){var a=new FormData;a.append("image",i),this.$route.params.groupID&&a.append("gid",this.$route.params.groupID),this.$route.params.examID&&a.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-img",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(i){e.$refs.md.$img2Url(t,i.data.data.link),e.img_file[i.data.data.link]=i.data.data.fileId}))}},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile:function(){this.$refs.uploadInput.click()},uploadFileChange:function(t){var i=this,e=t.target.files[0],a=new FormData;a.append("file",e),this.$route.params.groupID&&a.append("gid",this.$route.params.groupID),this.$route.params.examID&&a.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-file",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var a=i.$refs.md;a.insertText(a.getTextareaDom(),{prefix:"[".concat(e.name,"](").concat(t.data.data.link,")"),subfix:"",str:""})}))}},computed:Object(r["a"])({},Object(l["c"])(["isAdminRole","isGroupAdmin"])),watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,i){t!==i&&(this.$emit("update:value",t),this.$nextTick((function(t){Object(s["a"])()})))},isAdminRole:function(t){this.toolbars.imagelink=!!t}}},u=o,c=(e("92bc"),e("2877")),d=Object(c["a"])(u,a,n,!1,null,null,null);i["default"]=d.exports},af03:function(t,i,e){var a=e("d039");t.exports=function(t){return a((function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}))}},ecc7:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-row",[e("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"panel-title home-title"},[t._v(" "+t._s(t.title)+" ")])]),e("el-form",{attrs:{"label-position":"top"}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Training_rank"),required:""}},[e("el-input-number",{attrs:{min:0,max:2147483647,label:t.$t("m.Training_rank")},model:{value:t.training.rank,callback:function(i){t.$set(t.training,"rank",i)},expression:"training.rank"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Training_Title"),required:""}},[e("el-input",{attrs:{placeholder:t.$t("m.Training_Title")},model:{value:t.training.title,callback:function(i){t.$set(t.training,"title",i)},expression:"training.title"}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Training_Description"),required:""}},[e("Editor",{attrs:{value:t.training.description},on:{"update:value":function(i){return t.$set(t.training,"description",i)}}})],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:t.$t("m.Category"),required:""}},[e("el-select",{model:{value:t.trainingCategoryId,callback:function(i){t.trainingCategoryId=i},expression:"trainingCategoryId"}},t._l(t.trainingCategoryList,(function(t,i){return e("el-option",{key:i,attrs:{label:t.name,value:t.id}})})),1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{attrs:{label:t.$t("m.Training_Auth"),required:""}},[e("el-select",{model:{value:t.training.auth,callback:function(i){t.$set(t.training,"auth",i)},expression:"training.auth"}},[e("el-option",{attrs:{label:t.$t("m.Public_Training"),value:"Public"}}),e("el-option",{attrs:{label:t.$t("m.Private_Training"),value:"Private"}})],1)],1)],1),e("el-col",{attrs:{md:8,xs:24}},[e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Public"!=t.training.auth,expression:"training.auth != 'Public'"}],attrs:{label:t.$t("m.Training_Password"),required:"Public"!=t.training.auth}},[e("el-input",{attrs:{placeholder:t.$t("m.Training_Password")},model:{value:t.training.privatePwd,callback:function(i){t.$set(t.training,"privatePwd",i)},expression:"training.privatePwd"}})],1)],1)],1)],1),e("el-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.saveTraining.apply(null,arguments)}}},[t._v(t._s(t.$t("m.Save")))])],1)],1)],1)},n=[],r=e("5530"),l=(e("b0c0"),e("a4d3"),e("e01a"),e("3228")),s=e("2f62"),o=e("a956"),u={name:"CreateTraining",components:{Editor:o["default"]},data:function(){return{title:"Create Training",training:{rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},trainingCategoryId:null,trainingCategoryList:[]}},mounted:function(){this.init()},watch:{$route:function(){"admin-edit-training"===this.$route.name?(this.title=this.$i18n.t("m.Edit_Training"),this.getTraining()):(this.title=this.$i18n.t("m.Create_Training"),this.training={rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"})}},computed:Object(r["a"])({},Object(s["c"])(["userInfo"])),methods:{init:function(){var t=this;l["a"].getTrainingCategoryList().then((function(i){var e=i.data.data;e&&e.length?(t.trainingCategoryList=e,"admin-edit-training"===t.$route.name?(t.title=t.$i18n.t("m.Edit_Training"),t.getTraining()):t.title=t.$i18n.t("m.Create_Training")):t.$alert(t.$i18n.t("m.Redirect_To_Category"),t.$i18n.t("m.Redirect"),{confirmButtonText:t.$i18n.t("m.OK"),showClose:!1,callback:function(i){t.$router.push({path:"/admin/training/category"})}})}))},getTraining:function(){var t=this;l["a"].admin_getTraining(this.$route.params.trainingID).then((function(i){var e=i.data.data;t.training=e.training||{},t.trainingCategoryId=e.trainingCategory.id||null})).catch((function(){}))},saveTraining:function(){var t=this;if(this.training.rank||0==this.training.rank)if(this.training.title)if(this.training.description)if(this.trainingCategoryId)if("Public"==this.training.auth||this.training.privatePwd){var i="admin-edit-training"===this.$route.name?"admin_editTraining":"admin_createTraining",e=Object.assign({},this.training);"admin_createTraining"===i&&(e["author"]=this.userInfo.username);var a={training:e,trainingCategory:{id:this.trainingCategoryId}};l["a"][i](a).then((function(i){t.$msg.success(t.$t("m.Save_Successfully")),t.$router.push({name:"admin-training-list",query:{refresh:"true"}})})).catch((function(){}))}else this.$msg.error(this.$i18n.t("m.Training_Password")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Category")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Description")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Title")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_rank")+" "+this.$i18n.t("m.is_required"))}}},c=u,d=(e("2dbf"),e("2877")),m=Object(d["a"])(c,a,n,!1,null,"f9cc7cc0",null);i["default"]=m.exports}}]);