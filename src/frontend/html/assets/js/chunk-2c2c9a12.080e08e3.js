(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c2c9a12"],{"0434":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("el-card",{attrs:{padding:10}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"panel-title"},[t._v(t._s(t.$t("m.OI_Ranklist")))])]),a("div",{staticClass:"echarts"},[a("ECharts",{ref:"chart",attrs:{options:t.options,"auto-resize":""}})],1)])],1),a("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("el-card",{staticStyle:{"text-align":"center"},attrs:{padding:10}},[a("el-input",{attrs:{placeholder:t.$t("m.Rank_Search_Placeholder")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getRankData(1)}},model:{value:t.searchUser,callback:function(e){t.searchUser=e},expression:"searchUser"}},[a("el-button",{staticClass:"search-btn",attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getRankData(1)}},slot:"append"})],1)],1)],1),a("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("vxe-table",{staticStyle:{"font-weight":"500"},attrs:{data:t.dataRank,loading:t.loadingTable,align:"center","highlight-hover-row":"","auto-resize":"","seq-config":{seqMethod:t.seqMethod}}},[a("vxe-table-column",{attrs:{type:"seq","min-width":"50"}}),a("vxe-table-column",{attrs:{field:"username",title:t.$t("m.User"),"min-width":"150","show-overflow":"",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("avatar",{staticClass:"user-avatar",attrs:{username:n.username,inline:!0,size:25,color:"#FFF",src:n.avatar}}),a("a",{staticStyle:{color:"#2d8cf0"},on:{click:function(e){return t.getInfoByUsername(n.uid,n.username)}}},[t._v(t._s(n.username))]),n.titleName?a("span",{staticStyle:{"margin-left":"2px"}},[a("el-tag",{attrs:{effect:"dark",size:"small",color:n.titleColor}},[t._v(" "+t._s(n.titleName)+" ")])],1):t._e()]}}])}),a("vxe-table-column",{attrs:{field:"nickname",title:t.$t("m.Nickname"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.nickname?a("el-tag",{attrs:{effect:"plain",size:"small",type:t.nicknameColor(n.nickname)}},[t._v(" "+t._s(n.nickname)+" ")]):t._e()]}}])}),a("vxe-table-column",{attrs:{title:t.$t("m.Score"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(n.score))])]}}])}),a("vxe-table-column",{attrs:{title:t.$t("m.AC")+"/"+t.$t("m.Total"),"min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[a("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserACStatus(n.username)}}},[t._v(t._s(n.ac))]),a("span",[t._v("/"+t._s(n.total))])])]}}])}),a("vxe-table-column",{attrs:{title:t.$t("m.Rating"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",[t._v(t._s(t.getACRate(n.ac,n.total)))])]}}])}),a("vxe-table-column",{attrs:{title:t.$t("m.Signature"),"min-width":"300","show-overflow":"ellipsis",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.signature?a("span",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"rank-signature-body",domProps:{innerHTML:t._s(n.signature)}}):t._e()]}}])})],1),a("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.page,"show-sizer":"",layout:"prev, pager, next, sizes"},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:current":function(e){t.page=e},"on-change":t.getRankData,"on-page-size-change":function(e){return t.getRankData(1)}}})],1)],1)},i=[],r=a("5530"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("fb6a"),a("159b"),a("3228")),o=a("90b9"),l=a("9a36"),c=a("2f62"),u=a("4a89"),d=a.n(u),h=function(){return a.e("chunk-48bf8d0f").then(a.bind(null,"5072"))},m={name:"acm-rank",components:{Pagination:h,Avatar:d.a},data:function(){var t=this;return{page:1,limit:30,total:0,searchUser:null,dataRank:[],loadingTable:!1,screenWidth:768,options:{tooltip:{trigger:"axis"},legend:{data:["Score"]},grid:{x:"3%",x2:"3%",left:"8%",right:"8%"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},magicType:{show:!0,type:["line","bar"]},saveAsImage:{show:!0}},right:"8%",top:"5%"},calculable:!0,xAxis:[{type:"category",data:["root"],boundaryGap:!0,axisLabel:{interval:0,showMinLabel:!0,showMaxLabel:!0,align:"center",formatter:function(e,a){return t.screenWidth<768?t.isAuthenticated&&t.userInfo.username==e?o["a"].breakLongWords(e,14):"":o["a"].breakLongWords(e,14)}},axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisLabel:{rotate:50,textStyle:{fontSize:"12em"}}}],series:[{name:this.$i18n.t("m.Score"),type:"bar",data:[0],barMaxWidth:"80",markPoint:{data:[{type:"max",name:"max"}]}}]}}},created:function(){this.screenWidth=window.screen.width;var t=this;window.onresize=function(){return function(){t.screenWidth=document.documentElement.clientWidth}()}},mounted:function(){this.getRankData(1)},methods:{getRankData:function(t){var e=this,a=this.$refs.chart;a.showLoading({maskColor:"rgba(250, 250, 250, 0.8)"}),this.loadingTable=!0,s["a"].getUserRank(t,this.limit,l["p"].OI,this.searchUser).then((function(n){1===t&&e.changeCharts(n.data.data.records.slice(0,10)),e.total=n.data.data.total,e.dataRank=n.data.data.records,e.loadingTable=!1,a.hideLoading()}),(function(t){e.loadingTable=!1,a.hideLoading()}))},seqMethod:function(t){var e=t.rowIndex;return this.limit*(this.page-1)+e+1},changeCharts:function(t){var e=[],a=[];t.forEach((function(t){e.push(t.username),a.push(t.score)})),this.options.xAxis[0].data=e,this.options.series[0].data=a},getInfoByUsername:function(t,e){this.$router.push({path:"/user-home",query:{uid:t,username:e}})},goUserACStatus:function(t){this.$router.push({path:"/status",query:{username:t,status:0}})},getACRate:function(t,e){return o["a"].getACRate(t,e)},nicknameColor:function(t){var e=["","success","info","danger","warning"],a=t.length%5;return e[a]}},computed:Object(r["a"])({},Object(c["c"])(["isAuthenticated","userInfo"]))},p=m,g=(a("98d3"),a("2877")),f=Object(g["a"])(p,n,i,!1,null,"0bd740fb",null);e["default"]=f.exports},"98d3":function(t,e,a){"use strict";a("bb84")},bb84:function(t,e,a){}}]);