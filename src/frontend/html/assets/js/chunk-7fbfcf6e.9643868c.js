(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fbfcf6e"],{"2f454":function(t,e,i){"use strict";i("995e")},"55f6":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[i("vxe-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("vxe-table",{attrs:{data:t.problemList,loading:t.loading,"auto-resize":"",stripe:"",align:"center"}},[i("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"problemId"}}),i("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Title"),field:"title"}}),i("vxe-table-column",{attrs:{title:t.$t("m.Option"),align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Add"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.addPublicProblem(n.id,n.problemId)}}})],1)]}}])})],1),t.total?i("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next, sizes","page-size":t.limit,"current-page":t.currentPage,total:t.total,"page-sizes":[10,30,50,100]},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.onPageSizeChange}}):t._e()],1)},a=[],r=(i("d3b7"),i("3ca3"),i("ddb0"),i("a9e3"),i("3228")),o=function(){return i.e("chunk-48bf8d0f").then(i.bind(null,"5072"))},l={name:"AddProblemFromPublic",components:{Pagination:o},props:{apiMethod:{type:String,default:"getGroupTrainingProblemList"},trainingID:{type:Number,default:null},contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{currentPage:1,limit:10,total:0,loading:!1,problemList:[],contest:{},exam:{},keyword:""}},mounted:function(){var t=this;this.contestID?r["a"].getGroupContest(this.contestID).then((function(e){t.contest=e.data.data,t.init()})).catch((function(){})):this.examID?r["a"].getGroupExam(this.examID).then((function(e){t.exam=e.data.data,t.init()})).catch((function(){})):this.trainingID&&this.init()},methods:{init:function(){this.getPublicProblem()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},getPublicProblem:function(){var t=this;this.loading=!0;var e={keyword:this.keyword,problemType:this.contest.type,cid:this.contest.id,eid:this.exam.id,tid:this.trainingID,queryExisted:!1};this.examID&&(e.problemType=1),r["a"][this.apiMethod](this.currentPage,this.limit,e).then((function(e){t.loading=!1,t.total=e.data.data.problemList.total,t.problemList=e.data.data.problemList.records})).catch((function(){t.loading=!1}))},addPublicProblem:function(t,e){var i=this;if(this.contestID)this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then((function(e){var n=e.value,a={pid:t,cid:i.contestID,displayId:n};null!=n&&""!=n?r["a"].addGroupContestProblemFromPublic(a).then((function(t){i.$msg.success(i.$i18n.t("m.Add_Successfully")),i.$emit("currentChangeProblem"),i.currentChange(1)}),(function(){})):i.$msg.error(i.$t("m.The_Problem_Display_ID_in_the_Contest_is_required"))}),(function(){}));else if(this.examID)this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Exam"),"Tips").then((function(e){var n=e.value,a={pid:t,eid:i.examID,displayId:n};null!=n&&""!=n?r["a"].addGroupExamProblemFromPublic(a).then((function(t){i.$msg.success(i.$i18n.t("m.Add_Successfully")),i.$emit("currentChangeProblem"),i.currentChange(1)}),(function(){})):i.$msg.error(i.$t("m.The_Problem_Display_ID_in_the_Exam_is_required"))}),(function(){}));else{var n={pid:t,tid:this.trainingID,displayId:e};r["a"].addGroupTrainingProblemFromPublic(n).then((function(t){i.$msg.success(i.$i18n.t("m.Add_Successfully")),i.$emit("currentChangeProblem"),i.currentChange(1)}),(function(){}))}},filterByKeyword:function(){this.getPublicProblem(this.page)}}},s=l,u=(i("b495"),i("2877")),c=Object(u["a"])(s,n,a,!1,null,"44bfaa31",null);e["a"]=c.exports},6585:function(t,e,i){},"6a14":function(t,e,i){"use strict";i("6585")},"995e":function(t,e,i){},b495:function(t,e,i){"use strict";i("fd9a")},bf68:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{attrs:{model:t.problemId},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:t.$t("m.Problem_ID"),required:""}},[i("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addGroupProblem.apply(null,arguments)}},model:{value:t.problemId,callback:function(e){t.problemId=e},expression:"problemId"}})],1),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",loading:t.loading,size:"small"},on:{click:t.addGroupProblem}},[t._v(t._s(t.$t("m.Add"))+" ")])],1)],1)],1)},a=[],r=(i("a9e3"),i("3228")),o={name:"AddProblemFromGroup",props:{trainingID:{type:Number,default:null},contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{loading:!1,problemId:""}},methods:{addGroupProblem:function(){var t=this;this.contestID?this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then((function(e){var i=e.value;null!=i&&""!=i?r["a"].addGroupContestProblemFromGroup(t.problemId,t.contestID,i).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){})):t.$msg.error(t.$t("m.The_Problem_Display_ID_in_the_Contest_is_required"))}),(function(){})):this.examID?this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Exam"),"Tips").then((function(e){var i=e.value;null!=i&&""!=i?r["a"].addGroupExamProblemFromGroup(t.problemId,t.examID,i).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){})):t.$msg.error(t.$t("m.The_Problem_Display_ID_in_the_Exam_is_required"))}),(function(){})):r["a"].addGroupTrainingProblemFromGroup(this.problemId,this.trainingID).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){}))}}},l=o,s=i("2877"),u=Object(s["a"])(l,n,a,!1,null,null,null);e["a"]=u.exports},defa:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("div",{staticClass:"filter-row"},[i("el-row",[i("el-col",{attrs:{span:3}},[i("span",{staticClass:"title"},[t._v(t._s(t.$t("m.Group_Training")))])]),!t.isSuperAdmin&&!t.isGroupAdmin||t.problemPage||t.editProblemPage?(t.isSuperAdmin||t.isGroupAdmin)&&t.problemPage&&!t.editProblemPage?i("el-col",{attrs:{span:18}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.publicPage=!0}}},[t._v(t._s(t.$t("m.Add_From_Public_Problem")))]),i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:t.handleGroupPage}},[t._v(t._s(t.$t("m.Add_From_Group_Problem")))]),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-back"},on:{click:function(e){return t.handleProblemPage(null)}}},[t._v(t._s(t.$t("m.Back")))])],1):(t.isSuperAdmin||t.isGroupAdmin)&&t.editProblemPage?i("el-col",{attrs:{span:18}},[i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-back"},on:{click:t.handleEditProblemPage}},[t._v(t._s(t.$t("m.Back")))]),t._v("` ")],1):t._e():i("el-col",{attrs:{span:18}},[t.editPage?t._e():i("el-button",{attrs:{type:t.createPage?"danger":"primary",size:"small",icon:t.createPage?"el-icon-back":"el-icon-plus"},on:{click:t.handleCreatePage}},[t._v(t._s(t.createPage?t.$t("m.Back"):t.$t("m.Create")))]),t.editPage&&t.adminPage?i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-back"},on:{click:t.handleEditPage}},[t._v(t._s(t.$t("m.Back")))]):t._e(),i("el-button",{attrs:{type:t.adminPage?"warning":"success",size:"small",icon:t.adminPage?"el-icon-back":"el-icon-s-opportunity"},on:{click:t.handleAdminPage}},[t._v(t._s(t.adminPage?t.$t("m.Back"):t.$t("m.Training_Admin")))])],1)],1)],1),t.adminPage||t.createPage||t.problemPage?t._e():i("div",[i("vxe-table",{attrs:{border:"inner",stripe:"","auto-resize":"","highlight-hover-row":"",data:t.trainingList,loading:t.loading,align:"center"},on:{"cell-click":t.goGroupTraining}},[i("vxe-table-column",{attrs:{field:"rank",title:t.$t("m.Number"),"min-width":"60","show-overflow":""}}),i("vxe-table-column",{attrs:{field:"title",title:t.$t("m.Title"),"min-width":"200",align:"center"}}),i("vxe-table-column",{attrs:{field:"auth",title:t.$t("m.Auth"),"min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-tag",{attrs:{type:t.TRAINING_TYPE[n.auth]["color"],effect:"dark"}},[t._v(" "+t._s(t.$t("m.Training_"+n.auth))+" ")])]}}],null,!1,4020824847)}),i("vxe-table-column",{attrs:{field:"categoryName",title:t.$t("m.Category"),"min-width":"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-tag",{style:"background-color: #fff; color: "+n.categoryColor+"; border-color: "+n.categoryColor+";",attrs:{size:"large"}},[t._v(t._s(n.categoryName))])]}}],null,!1,1969393286)}),i("vxe-table-column",{attrs:{field:"problemCount",title:t.$t("m.Problem_Number"),"min-width":"80",align:"center"}}),i("vxe-table-column",{attrs:{field:"author",title:t.$t("m.Author"),"min-width":"150",align:"center","show-overflow":""}}),i("vxe-table-column",{attrs:{field:"gmtModified",title:t.$t("m.Recent_Update"),"min-width":"160",align:"center","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t._f("localtime")(i.gmtModified))+" ")]}}],null,!1,1816341761)})],1),i("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}})],1),!t.adminPage||t.createPage||t.problemPage?t._e():i("TrainingList",{ref:"trainingList",on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange,handleProblemPage:t.handleProblemPage}}),t.problemPage?i("TrainingProblemList",{ref:"trainingProblemList",attrs:{trainingID:t.trainingID},on:{currentChangeProblem:t.currentChangeProblem,handleEditProblemPage:t.handleEditProblemPage}}):t._e(),!t.createPage||t.editPage||t.problemPage?t._e():i("Training",{attrs:{mode:"add",title:t.$t("m.Create_Training"),apiMethod:"addGroupTraining"},on:{handleCreatePage:t.handleCreatePage,currentChange:t.currentChange}}),i("el-dialog",{attrs:{title:t.$t("m.Add_Training_Problem"),width:"90%",visible:t.publicPage,"close-on-click-modal":!1},on:{"update:visible":function(e){t.publicPage=e}}},[t.publicPage?i("AddPublicProblem",{ref:"addPublicProblem",attrs:{trainingID:t.trainingID,apiMethod:"getGroupTrainingProblemList"},on:{currentChangeProblem:t.currentChangeProblem}}):t._e()],1),i("el-dialog",{attrs:{title:t.$t("m.Add_Training_Problem"),width:"350px",visible:t.groupPage,"close-on-click-modal":!1},on:{"update:visible":function(e){t.groupPage=e}}},[i("AddGroupProblem",{attrs:{trainingID:t.trainingID},on:{currentChangeProblem:t.currentChangeProblem,handleGroupPage:t.handleGroupPage}})],1)],1)},a=[],r=i("5530"),o=(i("d3b7"),i("3ca3"),i("ddb0"),i("2f62")),l=i("9a36"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editPage?t._e():i("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.trainingList,loading:t.loading,align:"center"}},[i("vxe-table-column",{attrs:{field:"id",width:"80",title:"ID"}}),i("vxe-table-column",{attrs:{field:"rank",width:"80",title:t.$t("m.Order_Number")}}),i("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),i("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-tag",{attrs:{type:t.TRAINING_TYPE[n.auth]["color"],effect:"dark"}},[t._v(" "+t._s(t.$t("m.Training_"+n.auth))+" ")])]}}],null,!1,4020824847)}),i("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-switch",{attrs:{disabled:!t.isGroupRoot&&t.userInfo.username!=n.author},on:{change:function(e){return t.changeTrainingStatus(n.id,n.status)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"row.status"}})]}}],null,!1,1288880933)}),i("vxe-table-column",{attrs:{"min-width":"210",title:t.$t("m.Info")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("p",[t._v(t._s(t.$t("m.Created_Time"))+": "+t._s(t._f("localtime")(n.gmtCreate)))]),i("p",[t._v(t._s(t.$t("m.Update_Time"))+": "+t._s(t._f("localtime")(n.gmtModified)))]),i("p",[t._v(t._s(t.$t("m.Creator"))+": "+t._s(n.author))])]}}],null,!1,1794297696)}),i("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Option")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t.isGroupRoot||t.userInfo.username==n.author?i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEditTraining(n.id)}}})],1):t._e(),t.isGroupRoot||t.userInfo.username==n.author?i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Training_Problem_List"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goTrainingProblemList(n.id)}}})],1):t._e(),i("p"),t.isGroupRoot||t.userInfo.username==n.author?i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteTraining(n.id)}}})],1):t._e()]}}],null,!1,1889446331)})],1),t.editPage?t._e():i("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}}),t.editPage?i("Training",{attrs:{mode:"edit",title:t.$t("m.Edit_Training"),apiMethod:"updateGroupTraining",tid:t.tid},on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange}}):t._e()],1)},u=[],c=i("3228"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-col",{attrs:{span:24}},[i("el-card",{attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.title))])]),i("el-form",{attrs:{"label-position":"top",model:t.training}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("m.Training_rank"),required:""}},[i("el-input-number",{attrs:{min:0,max:2147483647,label:t.$t("m.Training_rank")},model:{value:t.training.rank,callback:function(e){t.$set(t.training,"rank",e)},expression:"training.rank"}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("m.Training_Title"),required:""}},[i("el-input",{attrs:{placeholder:t.$t("m.Training_Title")},model:{value:t.training.title,callback:function(e){t.$set(t.training,"title",e)},expression:"training.title"}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("m.Training_Description"),required:""}},[i("Editor",{attrs:{value:t.training.description},on:{"update:value":function(e){return t.$set(t.training,"description",e)}}})],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:t.$t("m.Category"),required:""}},[i("el-select",{model:{value:t.trainingCategoryId,callback:function(e){t.trainingCategoryId=e},expression:"trainingCategoryId"}},t._l(t.trainingCategoryList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-col",{attrs:{md:8,xs:24}},[i("el-form-item",{attrs:{label:t.$t("m.Training_Auth"),required:""}},[i("el-select",{model:{value:t.training.auth,callback:function(e){t.$set(t.training,"auth",e)},expression:"training.auth"}},[i("el-option",{attrs:{label:t.$t("m.Public_Training"),value:"Public"}}),i("el-option",{attrs:{label:t.$t("m.Private_Training"),value:"Private"}})],1)],1)],1),i("el-col",{attrs:{md:8,xs:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"Public"!=t.training.auth,expression:"training.auth != 'Public'"}],attrs:{label:t.$t("m.Training_Password"),required:"Public"!=t.training.auth}},[i("el-input",{attrs:{placeholder:t.$t("m.Training_Password")},model:{value:t.training.privatePwd,callback:function(e){t.$set(t.training,"privatePwd",e)},expression:"training.privatePwd"}})],1)],1)],1)],1),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit.apply(null,arguments)}}},[t._v(t._s(t.$t("m.Save")))])],1)],1)],1)},m=[],g=(i("a9e3"),i("a4d3"),i("e01a"),i("a956")),h=i("a2e7"),p=i("da4f"),f=i("ac13"),b={name:"GroupTraining",components:{Accordion:h["a"],AddExtraFile:p["a"],CodeMirror:f["default"],Editor:g["default"]},props:{mode:{type:String,default:"edit"},title:{type:String,default:"Edit Training"},apiMethod:{type:String,default:"addGroupTraining"},tid:{type:Number,default:null}},data:function(){return{training:{rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},trainingCategoryId:null,trainingCategoryList:[]}},mounted:function(){this.init()},watch:{$route:function(){this.training={rank:1e3,title:"",description:"",privatePwd:"",auth:"Public"},this.init()}},methods:{init:function(){var t=this;c["a"].getTrainingCategoryList().then((function(e){var i=e.data.data;i&&i.length?(t.trainingCategoryList=i,"edit"===t.mode&&t.getTraining()):t.$alert(t.$i18n.t("m.Redirect_To_Category"),t.$i18n.t("m.Redirect"),{confirmButtonText:t.$i18n.t("m.OK"),showClose:!1,callback:function(e){t.$router.push({path:"/admin/training/category"})}})}))},getTraining:function(){var t=this;c["a"].getGroupTraining(this.tid).then((function(e){var i=e.data.data;t.training=i.training||{},t.trainingCategoryId=i.trainingCategory.id||null})).catch((function(){}))},submit:function(){var t=this;if(this.training.rank||0==this.training.rank)if(this.training.title)if(this.training.description)if(this.trainingCategoryId)if("Public"==this.training.auth||this.training.privatePwd){this.training.gid=this.$route.params.groupID;var e=Object.assign({},this.training);"add"===this.mode&&(e["author"]=this.userInfo.username);var i={training:e,trainingCategory:{id:this.trainingCategoryId}};c["a"][this.apiMethod](i).then((function(e){t.$msg.success(t.$t("m.Update_Successfully")),"edit"===t.mode?t.$emit("handleEditPage"):t.$emit("handleCreatePage"),t.$emit("currentChange",1)})).catch((function(){}))}else this.$msg.error(this.$i18n.t("m.Training_Password")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Category")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Description")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_Title")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Training_rank")+" "+this.$i18n.t("m.is_required"))}},computed:Object(r["a"])({},Object(o["c"])(["userInfo","group"]))},P=b,_=(i("6a14"),i("2877")),$=Object(_["a"])(P,d,m,!1,null,"097f95a7",null),v=$.exports,y=function(){return i.e("chunk-48bf8d0f").then(i.bind(null,"5072"))},T={name:"GroupTrainingList",components:{Pagination:y,Training:v},data:function(){return{total:0,currentPage:1,limit:10,trainingList:[],loading:!1,routeName:"",tid:null,editPage:!1}},mounted:function(){this.TRAINING_TYPE=Object.assign({},l["r"]),this.init()},methods:{init:function(){this.getAdminTrainingList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},handleEditPage:function(){this.editPage=!1,this.$emit("currentChange",1),this.$emit("handleEditPage")},getAdminTrainingList:function(){var t=this;this.loading=!0,c["a"].getGroupAdminTrainingList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.trainingList=e.data.data.records,t.total=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},goEditTraining:function(t){this.$emit("handleEditPage"),this.editPage=!0,this.tid=t},goTrainingProblemList:function(t){this.$emit("handleProblemPage",t)},changeTrainingStatus:function(t,e){var i=this;c["a"].changeGroupTrainingStatus(t,e).then((function(t){i.$msg.success(i.$i18n.t("m.Update_Successfully")),i.$emit("currentChange",1),i.currentChange(1)}))},deleteTraining:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Training_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){c["a"].deleteGroupTraining(t,e.$route.params.groupID).then((function(t){e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.$emit("currentChange",1),e.currentChange(1)})).catch((function(){}))}),(function(){}))}},computed:Object(r["a"])({},Object(o["c"])(["userInfo","isGroupRoot"]))},k=T,w=Object(_["a"])(k,s,u,!1,null,null,null),I=w.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editPage?t._e():i("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.problemList,loading:t.loading,align:"center"}},[i("vxe-table-column",{attrs:{"min-width":"64",field:"id",title:"ID"}}),i("vxe-table-column",{attrs:{"min-width":"100",field:"problemId",title:t.$t("m.Display_ID")}}),i("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),i("vxe-table-column",{attrs:{field:"author","min-width":"100",title:t.$t("m.Author"),"show-overflow":""}}),i("vxe-table-column",{attrs:{"min-width":"200",title:t.$t("m.Training_Problem_Rank")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-input-number",{attrs:{min:0,max:2147483647},on:{change:function(e){return t.handleChangeRank(t.trainingProblemMap[n.id])}},model:{value:t.trainingProblemMap[n.id].rank,callback:function(e){t.$set(t.trainingProblemMap[n.id],"rank",e)},expression:"trainingProblemMap[row.id].rank"}})]}}],null,!1,85650960)}),i("vxe-table-column",{attrs:{"min-width":"120",title:t.$t("m.Auth")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("el-select",{attrs:{disabled:n.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=n.author,size:"small"},on:{change:function(e){return t.changeProblemAuth(n.id,n.auth)}},model:{value:n.auth,callback:function(e){t.$set(n,"auth",e)},expression:"row.auth"}},[i("el-option",{attrs:{label:t.$t("m.Public_Problem"),value:1}}),i("el-option",{attrs:{label:t.$t("m.Private_Problem"),value:2}}),i("el-option",{attrs:{label:t.$t("m.Contest_Problem"),value:3,disabled:!0}})],1)]}}],null,!1,393619187)}),i("vxe-table-column",{attrs:{title:"Option","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=n.author?t._e():i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEditProblem(n.id)}}})],1),n.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=n.author?t._e():i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Download_Testcase"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"success"},nativeOn:{click:function(e){return t.downloadTestCase(n.id)}}})],1),i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Remove"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.removeProblem(n.id)}}})],1),n.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=n.author?t._e():i("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteProblem(n.id)}}})],1)]}}],null,!1,4084482981)})],1),t.editPage?t._e():i("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}}),t.editPage?i("Problem",{attrs:{mode:"edit",title:t.$t("m.Edit_Problem"),apiMethod:"updateGroupProblem",pid:t.pid},on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange}}):t._e()],1)},x=[],D=(i("b0c0"),i("7850")),G=i("90b9"),E=function(){return i.e("chunk-48bf8d0f").then(i.bind(null,"5072"))},A={name:"GroupTrainingProblemList",components:{Pagination:E,Problem:D["a"]},props:{trainingID:{type:Number,default:null}},data:function(){return{oj:"All",limit:10,currentPage:1,total:0,problemList:[],trainingProblemMap:{},loading:!1,currentProblemID:"",currentRow:{},editPage:!1,pid:null,gid:null}},mounted:function(){this.gid=this.$route.params.groupID,this.init()},computed:Object(r["a"])({},Object(o["c"])(["userInfo","isSuperAdmin","isGroupRoot"])),methods:{init:function(){this.getProblemList()},currentChange:function(t){this.currentPage=t,this.init()},onPageSizeChange:function(t){this.limit=t,this.init()},getProblemList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var i={tid:this.trainingID};c["a"].getGroupTrainingProblemList(e,this.limit,i).then((function(e){t.loading=!1,t.total=e.data.data.problemList.total,t.problemList=e.data.data.problemList.records,t.trainingProblemMap=e.data.data.trainingProblemMap}),(function(e){t.loading=!1}))},handleChangeRank:function(t){var e=this;c["a"].updateGroupTrainingProblem(t).then((function(t){e.$msg.success(e.$i18n.t("m.Update_Successfully")),e.getProblemList(1)}))},changeProblemAuth:function(t,e){var i=this;c["a"].changeGroupProblemAuth(t,e).then((function(t){i.$msg.success(i.$i18n.t("m.Update_Successfully"))}))},handleEditPage:function(){this.editPage=!1,this.$emit("handleEditProblemPage")},goEditProblem:function(t){this.pid=t,this.editPage=!0,this.$emit("handleEditProblemPage")},deleteProblem:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Problem_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){c["a"].deleteGroupProblem(t).then((function(t){e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.$emit("currentChangeProblem")})).catch((function(){}))}),(function(){}))},removeProblem:function(t){var e=this;this.$confirm(this.$i18n.t("m.Remove_Training_Problem_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){c["a"].deleteGroupTrainingProblem(t,e.trainingID).then((function(t){e.$msg.success(e.$t("m.Delete_successfully")),e.$emit("currentChangeProblem")})).catch((function(){}))}),(function(){}))},downloadTestCase:function(t){var e=this,i="/api/file/download-testcase?pid="+t;G["a"].downloadFile(i).then((function(){e.$alert(e.$i18n.t("m.Download_Testcase_Success"),e.$i18n.t("m.Tips"))}))}},watch:{$route:function(t,e){t.params.trainingID==e.params.trainingID&&t.name==e.name||this.init()}}},L=A,S=Object(_["a"])(L,C,x,!1,null,null,null),z=S.exports,O=i("55f6"),N=i("bf68"),R=function(){return i.e("chunk-48bf8d0f").then(i.bind(null,"5072"))},M={name:"GroupTrainingList",components:{Pagination:R,TrainingList:I,Training:v,TrainingProblemList:z,AddPublicProblem:O["a"],AddGroupProblem:N["a"]},data:function(){return{total:0,currentPage:1,limit:10,trainingList:[],TRAINING_TYPE:{},loading:!1,adminPage:!1,createPage:!1,editPage:!1,problemPage:!1,publicPage:!1,groupPage:!1,editProblemPage:!1,trainingID:null}},mounted:function(){this.TRAINING_TYPE=Object.assign({},l["r"]),this.init()},methods:{init:function(){this.getGroupTrainingList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},currentChangeProblem:function(){this.$refs.trainingProblemList.currentChange(1)},getGroupTrainingList:function(){var t=this;this.loading=!0,c["a"].getGroupTrainingList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.trainingList=e.data.data.records,t.total=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},goGroupTraining:function(t){this.$router.push({name:"TrainingDetails",params:{trainingID:t.row.id}})},handleCreatePage:function(){this.createPage=!this.createPage},handleEditPage:function(){this.editPage=!this.editPage,this.$refs.trainingList.editPage=this.editPage},handleAdminPage:function(){this.adminPage=!this.adminPage,this.createPage=!1,this.editPage=!1},handleProblemPage:function(t){this.trainingID=t,this.problemPage=!this.problemPage},handleGroupPage:function(){this.groupPage=!this.groupPage},handleEditProblemPage:function(){this.editProblemPage=!this.editProblemPage,this.$refs.trainingProblemList.editPage=this.editProblemPage}},computed:Object(r["a"])({},Object(o["c"])(["isAuthenticated","isSuperAdmin","isGroupAdmin"]))},j=M,q=(i("2f454"),Object(_["a"])(j,n,a,!1,null,"3da068c6",null));e["default"]=q.exports},fd9a:function(t,e,i){}}]);