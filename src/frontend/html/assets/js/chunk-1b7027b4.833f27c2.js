(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b7027b4"],{"0fcb":function(t,e,s){"use strict";s("8fa9")},"1cc3":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{staticClass:"flex-container"},[s("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24,id:"main"}},[s("el-card",{attrs:{shadow:""}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:4,lg:2}},[s("span",{staticClass:"panel-title hidden-md-and-down"},[t._v(t._s(t.$t("m.Status")))])]),s("el-col",{attrs:{xs:10,sm:8,md:4,lg:4}},[s("el-switch",{staticStyle:{display:"block"},attrs:{"active-text":t.$t("m.Mine"),width:40,"inactive-text":t.$t("m.All")},on:{change:t.handleOnlyMine},model:{value:t.formFilter.onlyMine,callback:function(e){t.$set(t.formFilter,"onlyMine",e)},expression:"formFilter.onlyMine"}})],1),s("el-col",{staticStyle:{"padding-top":"5px"},attrs:{xs:10,sm:8,md:5,lg:4}},[s("el-dropdown",{staticClass:"drop-menu",attrs:{placement:"bottom",trigger:"hover",disabled:t.examID&&!t.formFilter.onlyMine&&!t.ExamRealScorePermission},on:{command:t.handleStatusChange}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.status)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"All"}},[t._v(t._s(t.$t("m.All")))]),t._l(Object.keys(t.JUDGE_STATUS_LIST),(function(e){return s("el-dropdown-item",{key:e,attrs:{command:e}},[!t.examID||t.ExamRealScorePermission||-1!==t.rightStatus.indexOf(e)?s("span",[t._v(" "+t._s(t.JUDGE_STATUS_LIST[e].name)+" ")]):t._e()])}))],2)],1)],1),s("el-col",{staticClass:"hidden-xs-only",attrs:{sm:8,md:5,lg:4}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",round:""},on:{click:t.getSubmissions}},[t._v(t._s(t.$t("m.Refresh")))])],1),s("el-col",{staticClass:"hidden-sm-and-up",attrs:{xs:4}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",circle:""},on:{click:t.getSubmissions}})],1),s("el-col",{staticClass:"search",attrs:{xs:24,sm:12,md:5,lg:5}},[s("vxe-input",{attrs:{placeholder:t.$t("m.Enter_Problem_ID"),type:"search",size:"medium"},on:{"search-click":function(e){return t.handleQueryChange("probemID")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQueryChange("probemID")}},model:{value:t.formFilter.problemID,callback:function(e){t.$set(t.formFilter,"problemID",e)},expression:"formFilter.problemID"}})],1),s("el-col",{staticClass:"search",attrs:{xs:24,sm:12,md:5,lg:5}},[s("vxe-input",{attrs:{disabled:t.formFilter.onlyMine||t.examID&&!t.ExamRealScorePermission,placeholder:t.$t("m.Enter_Author"),type:"search",size:"medium"},on:{"search-click":function(e){return t.handleQueryChange("username")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQueryChange("username")}},model:{value:t.formFilter.username,callback:function(e){t.$set(t.formFilter,"username",e)},expression:"formFilter.username"}})],1)],1)],1),s("vxe-table",{ref:"xTable",attrs:{border:"inner",stripe:"","keep-source":"","highlight-current-row":"","highlight-hover-row":"",align:"center","auto-resize":"","row-class-name":t.tableRowClassName,data:t.submissions,loading:t.loadingTable}},[s("vxe-table-column",{attrs:{field:"submitId",title:t.$t("m.Run_ID"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.showSubmitDetail(i)}}},[t._v(" "+t._s(i.submitId)+" ")])]}}])}),s("vxe-table-column",{attrs:{field:"pid",title:t.$t("m.Problem"),"min-width":"150","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.contestID?s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(i.displayId,!0,!1)}}},[t._v(t._s(i.displayId+" "+i.title)+" ")]):t.examID?s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(i.displayId,!1,!0)}}},[t._v(t._s(i.displayId+" "+i.title)+" ")]):s("span",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.getProblemUri(i.displayPid,!1,!1)}}},[t._v(t._s(i.displayPid+" "+i.title)+" ")])]}}])}),s("vxe-table-column",{attrs:{field:"status",title:t.$t("m.Status"),"min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",{class:t.getStatusColor(i.status)},[i.status==t.JUDGE_STATUS_RESERVE["Pending"]||i.status==t.JUDGE_STATUS_RESERVE["Compiling"]||i.status==t.JUDGE_STATUS_RESERVE["Judging"]?s("i",{staticClass:"el-icon-loading"}):t._e(),i.status==t.JUDGE_STATUS_RESERVE["sf"]?s("i",{staticClass:"el-icon-refresh",on:{click:function(e){return t.reSubmit(i)}}}):t._e(),t._v(" "+t._s(t.JUDGE_STATUS[i.status].name)+" ")])]}}])}),t.scoreColumnVisible?s("vxe-table-column",{attrs:{field:"score",title:t.$t("m.Score"),width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.contestID&&null!=i.score||t.examID&&null!=i.score?[t.examID?s("el-tag",{attrs:{effect:"plain",size:"medium",type:t.JUDGE_STATUS[i.status]["type"]}},[t._v(t._s(i.score*t.problemK[i.displayId]))]):s("el-tag",{attrs:{effect:"plain",size:"medium",type:t.JUDGE_STATUS[i.status]["type"]}},[t._v(t._s(i.score))])]:null!=i.score?[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("m.Problem_Score"))+"："+t._s(null!=i.score?i.score:t.$t("m.Unknown"))),s("br"),t._v(t._s(t.$t("m.OI_Rank_Score"))+"："+t._s(null!=i.oiRankScore?i.oiRankScore:t.$t("m.Unknown"))),s("br"),t._v(" "+t._s(t.$t("m.OI_Rank_Calculation_Rule"))+"：(score*0.1+difficulty*2)*(ac_cases/sum_cases) ")]),s("el-tag",{attrs:{effect:"plain",size:"medium",type:t.JUDGE_STATUS[i.status]["type"]}},[t._v(t._s(i.score))])],1)]:i.status==t.JUDGE_STATUS_RESERVE["Pending"]||i.status==t.JUDGE_STATUS_RESERVE["Compiling"]||i.status==t.JUDGE_STATUS_RESERVE["Judging"]?[s("el-tag",{attrs:{effect:"plain",size:"medium",type:t.JUDGE_STATUS[i.status]["type"]}},[s("i",{staticClass:"el-icon-loading"})])]:[s("el-tag",{attrs:{effect:"plain",size:"medium",type:t.JUDGE_STATUS[i.status]["type"]}},[t._v("--")])]]}}],null,!1,2734345084)}):t._e(),s("vxe-table-column",{attrs:{field:"time",title:t.$t("m.Time"),"min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(t.submissionTimeFormat(i.time)))])]}}])}),s("vxe-table-column",{attrs:{field:"memory",title:t.$t("m.Memory"),"min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(t.submissionMemoryFormat(i.memory)))])]}}])}),s("vxe-table-column",{attrs:{field:"length",title:t.$t("m.Length"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",[t._v(t._s(t.submissionLengthFormat(i.length)))])]}}])}),s("vxe-table-column",{attrs:{field:"language",title:t.$t("m.Language"),"show-overflow":"","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.language?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.View_submission_details"),placement:"top"}},[s("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSubmitDetail(i)}}},[t._v(t._s(i.language))])],1):s("span",[t._v("--")])]}}])}),s("vxe-table-column",{attrs:{field:"judger",title:t.$t("m.Judger"),"min-width":"100","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.judger?s("span",[t._v(t._s(i.judger))]):s("span",[t._v("--")])]}}])}),s("vxe-table-column",{attrs:{field:"username",title:t.$t("m.Author"),"min-width":"96","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[null!=i.username&&null!=i.uid?s("a",{staticStyle:{color:"rgb(87, 163, 243)"},on:{click:function(e){return t.goUserHome(i.username,i.uid)}}},[t._v(t._s(i.username))]):s("span",[t._v("--")])]}}])}),s("vxe-table-column",{attrs:{field:"submitTime",title:t.$t("m.Submit_Time"),"min-width":"96"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("span",[s("el-tooltip",{attrs:{content:t._f("localtime")(i.submitTime),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(i.submitTime)))])])],1)]}}])}),t.rejudgeColumnVisible?s("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"90"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[s("vxe-button",{attrs:{status:"primary",size:"mini",loading:i.loading},on:{click:function(e){return t.handleRejudge(i)}}},[t._v(t._s(t.$t("m.Rejudge")))])]}}],null,!1,167256603)}):t._e()],1)],1),s("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.changeRoute,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}})],1)],1)},n=[],a=s("b85c"),r=s("5530"),o=(s("d3b7"),s("3ca3"),s("ddb0"),s("b0c0"),s("b64b"),s("2f62")),u=s("3228"),l=s("9a36"),m=s("90b9"),c=(s("e05f"),function(){return s.e("chunk-48bf8d0f").then(s.bind(null,"5072"))}),d={name:"submissionList",components:{Pagination:c},data:function(){return{formFilter:{onlyMine:!1,status:"",username:"",problemID:"",gid:null},loadingTable:!1,submissions:[],needCheckSubmitIds:{},total:30,limit:15,currentPage:1,contestID:"",examID:"",routeName:"",checkStatusNum:0,JUDGE_STATUS:"",JUDGE_STATUS_LIST:"",autoCheckOpen:!1,JUDGE_STATUS_RESERVE:{},CONTEST_STATUS:{},RULE_TYPE:{},rightStatus:["-10","-5","4","5","6","7","9","10"],problemK:{}}},created:function(){this.init()},mounted:function(){this.JUDGE_STATUS=Object.assign({},l["k"]),this.JUDGE_STATUS_LIST=Object.assign({},l["k"]),this.JUDGE_STATUS_RESERVE=Object.assign({},l["l"]),this.CONTEST_STATUS=Object.assign({},l["a"]),this.EXAM_STATUS=Object.assign({},l["e"]),this.RULE_TYPE=Object.assign({},l["p"]),delete this.JUDGE_STATUS_LIST["6"],delete this.JUDGE_STATUS_LIST["7"],delete this.JUDGE_STATUS_LIST["9"],delete this.JUDGE_STATUS_LIST["-5"],delete this.JUDGE_STATUS_LIST["-10"],this.getData()},methods:Object(r["a"])(Object(r["a"])({init:function(){this.checkStatusNum=0,this.contestID=this.$route.params.contestID,this.examID=this.$route.params.examID;var t=this.$route.query;this.formFilter.problemID=t.problemID,this.formFilter.username=t.username||"",this.formFilter.onlyMine=t.onlyMine+""=="true",this.formFilter.status=t.status,this.formFilter.completeProblemID=t.completeProblemID||!1,this.formFilter.gid=t.gid||null,this.formFilter.onlyMine&&(this.formFilter.username=""),this.currentPage=parseInt(t.currentPage)||1,this.currentPage<1&&(this.currentPage=1),this.limit=parseInt(t.limit)||15,this.routeName=this.$route.name,this.examID&&this.getProblemK()},getProblemK:function(){var t=this;u["a"].getExamProblemK(this.examID).then((function(e){t.problemK=e.data.data}))},getData:function(){this.getSubmissions()},buildQuery:function(){return{onlyMine:this.formFilter.onlyMine,status:this.formFilter.status,username:this.formFilter.username,problemID:this.formFilter.problemID,gid:this.formFilter.gid,currentPage:this.currentPage,limit:this.limit,completeProblemID:this.formFilter.completeProblemID}},submissionTimeFormat:function(t){return m["a"].submissionTimeFormat(t)},submissionMemoryFormat:function(t){return m["a"].submissionMemoryFormat(t)},submissionLengthFormat:function(t){return m["a"].submissionLengthFormat(t)},reSubmit:function(t){var e=this;u["a"].reSubmitRemoteJudge(t.submitId).then((function(s){var i=e.$refs.xTable;t.status=s.data.data.status,t.time=s.data.data.time,t.memory=s.data.data.memory,t.errorMessage=s.data.data.errorMessage,t.judger=s.data.data.judger,i.reloadRow(t,null,null),e.submissions[t.index]=s.data.data,e.$msg.success(e.$i18n.t("m.Resubmitted_Successfully")),e.needCheckSubmitIds[t.submitId]=t.index,e.checkStatusNum=0,e.autoCheckOpen||e.checkSubmissionsStatus()}))},getSubmissions:function(){var t,e=this,s=this.buildQuery();if(s.contestID=this.contestID,s.examID=this.examID,this.formFilter.onlyMine){if(!this.isAuthenticated)return this.formFilter.onlyMine=!1,void this.$msg.error(this.$i18n.t("m.Please_login_first"));s.username="",this.formFilter.username=""}this.loadingTable=!0,this.submissions=[],this.needCheckSubmitIds={},t=this.contestID?"getContestSubmissionList":this.examID?"getExamSubmissionList":"getSubmissionList",u["a"][t](this.limit,m["a"].filterEmptyValue(s)).then((function(t){var s,i=t.data.data,n=0,r=Object(a["a"])(i.records);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.status!=l["l"]["Pending"]&&o.status!=l["l"]["Compiling"]&&o.status!=l["l"]["Judging"]||(e.needCheckSubmitIds[o.submitId]=n),o.loading=!1,o.index=n,n+=1}}catch(u){r.e(u)}finally{r.f()}e.loadingTable=!1,e.submissions=i.records,e.total=i.total,Object.keys(e.needCheckSubmitIds).length>0&&e.checkSubmissionsStatus()})).catch((function(){e.loadingTable=!1}))},checkSubmissionsStatus:function(){var t=this;this.refreshStatus&&(clearTimeout(this.refreshStatus),this.autoCheckOpen=!1);var e=function e(){var s,i=t.needCheckSubmitIds;s=t.contestID?"checkContestSubmissonsStatus":t.examID?"checkExamSubmissonsStatus":"checkSubmissonsStatus",u["a"][s](Object.keys(i),t.contestID?t.contestID:t.examID).then((function(s){var n=s.data.data;if(t.$refs.xTable){var a=t.$refs.xTable.getTableData().tableData;for(var r in i){var o=parseInt(r);n[o]&&(t.submissions[i[r]]=n[o],a[i[r]].status=n[o].status,a[i[r]].score=n[o].score,a[i[r]].time=n[o].time,a[i[r]].memory=n[o].memory,a[i[r]].judger=n[o].judger,t.$refs.xTable.reloadRow(a[i[r]],null,null),n[o].status!=l["l"]["Pending"]&&n[o].status!=l["l"]["Compiling"]&&n[o].status!=l["l"]["Judging"]&&delete t.needCheckSubmitIds[r])}0==Object.keys(t.needCheckSubmitIds).length||300==t.checkStatusNum?(clearTimeout(t.refreshStatus),t.autoCheckOpen=!1):(t.checkStatusNum+=1,t.refreshStatus=setTimeout(e,2e3))}}),(function(e){clearTimeout(t.refreshStatus),t.autoCheckOpen=!1}))};this.checkStatusNum+=1,this.refreshStatus=setTimeout(e,2e3),this.autoCheckOpen=!0},onPageSizeChange:function(t){this.limit=t,this.changeRoute()},changeRoute:function(){var t=this.buildQuery();t.contestID=this.contestID,t.examID=this.examID;var e,s=m["a"].filterEmptyValue(t),i=!0;for(var n in s)if(s[n]!=this.$route.query[n]){i=!1;break}(i&&Object.keys(s).length!=Object.keys(this.$route.query).length&&(i=!1),i)||(e=s.contestID?"ContestSubmissionList":s.examID?"ExamSubmissionList":"SubmissionList",this.$router.push({name:e,query:s}))},goRoute:function(t){this.$router.push(t)},goUserHome:function(t,e){this.$router.push({path:"/user-home",query:{uid:e,username:t}})},handleStatusChange:function(t){this.formFilter.status="All"==t?"":t,this.currentPage=1,this.changeRoute()},handleQueryChange:function(t){"probemID"==t&&(this.formFilter.completeProblemID=!1),this.currentPage=1,this.changeRoute()},handleRejudge:function(t){var e=this;this.submissions[t.index].loading=!0,u["a"].submissionRejudge(t.submitId).then((function(s){var i=e.$refs.xTable;t.status=s.data.data.status,t.score=null,t.time=s.data.data.time,t.memory=s.data.data.memory,t.errorMessage=s.data.data.errorMessage,t.judger=s.data.data.judger,t.loading=!1,i.reloadRow(t,null,null),e.submissions[t.index]=s.data.data,e.submissions[t.index].loading=!1,e.$msg.success(e.$i18n.t("m.Rejudge_successfully")),e.needCheckSubmitIds[t.submitId]=t.index,e.checkStatusNum=0,e.autoCheckOpen||e.checkSubmissionsStatus()}),(function(){e.submissions[t.index].loading=!1}))},handleOnlyMine:function(){if(this.formFilter.onlyMine){if(!this.isAuthenticated)return this.formFilter.onlyMine=!1,void this.$msg.error(this.$i18n.t("m.Please_login_first"));this.formFilter.username=""}else this.examID&&!this.isExamAdmin&&(this.formFilter.status="");this.currentPage=1,this.changeRoute()}},Object(o["b"])(["changeModalStatus"])),{},{showSubmitDetail:function(t){0!=t.cid?this.$router.push({name:"ContestSubmissionDetails",params:{contestID:this.$route.params.contestID,problemID:t.displayId,submitID:t.submitId}}):0!=t.eid?this.$router.push({name:"ExamSubmissionDetails",params:{examID:this.$route.params.examID,problemID:t.displayId,submitID:t.submitId}}):this.$router.push({name:"SubmissionDetails",params:{submitID:t.submitId}})},getProblemUri:function(t,e,s){e?this.$router.push({name:"ContestProblemDetails",params:{contestID:this.$route.params.contestID,problemID:t}}):s?this.$router.push({name:"ExamProblemDetails",params:{examID:this.$route.params.examID,problemID:t}}):this.$router.push({name:"ProblemDetails",params:{problemID:t}})},getStatusColor:function(t){return"el-tag el-tag--medium status-"+l["k"][t]["color"]},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e.username==this.userInfo.username&&this.isAuthenticated)return"own-submit-row"}}),computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["isAuthenticated","userInfo","isSuperAdmin","isExamAdmin","isAdminRole","contestRuleType","contestStatus","examStatus","ExamRealScorePermission"])),{},{title:function(){return this.contestID||this.examID?this.problemID?"Problem Submissions":"Submissions":"Status"},status:function(){return""===this.formFilter.status?this.$i18n.t("m.Status"):l["k"][this.formFilter.status]?l["k"][this.formFilter.status].name:this.$i18n.t("m.Status")},rejudgeColumnVisible:function(){return this.isSuperAdmin},scoreColumnVisible:function(){return this.contestID&&this.contestRuleType==this.RULE_TYPE.OI||!this.contestID}}),watch:{$route:function(t,e){t!==e&&(this.autoCheckOpen&&clearInterval(this.refreshStatus),this.init(),this.getData())},isAuthenticated:function(){this.init(),this.getData()}},beforeRouteLeave:function(t,e,s){clearInterval(this.refreshStatus),s()}},h=d,f=(s("0fcb"),s("2877")),b=Object(f["a"])(h,i,n,!1,null,"b485e702",null);e["default"]=b.exports},"8fa9":function(t,e,s){},e05f:function(t,e,s){}}]);