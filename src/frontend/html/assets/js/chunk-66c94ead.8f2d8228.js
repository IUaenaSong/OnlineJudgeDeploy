(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66c94ead"],{"034c":function(t,e,n){},"129e":function(t,e,n){"use strict";n("769b")},"14f3":function(t,e,n){"use strict";n("b88a")},"41da":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.editPage?t._e():n("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.problemList,loading:t.loading,align:"center"}},[n("vxe-table-column",{attrs:{"min-width":"64",field:"id",title:"ID"}}),t.contestID||t.examID?n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Original_Display"),align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.contestID||t.examID?n("p",[t._v(" "+t._s(t.$t("m.Display_ID"))+"："+t._s(i.problemId)+" ")]):t._e(),t.contestID||t.examID?n("p",[t._v(t._s(t.$t("m.Title"))+"："+t._s(i.title))]):n("span",[t._v(t._s(i.problemId))])]}}],null,!1,2980621275)}):n("vxe-table-column",{attrs:{"min-width":"100",field:"problemId",title:t.$t("m.Display_ID")}}),t.contestID||t.examID?t.contestID?n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Contest_Display"),align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.contestProblemMap[i.id]?n("p",[t._v(" "+t._s(t.$t("m.Display_ID"))+"："+t._s(t.contestProblemMap[i.id]["displayId"])+" ")]):t._e(),t.contestProblemMap[i.id]?n("p",[t._v(" "+t._s(t.$t("m.Title"))+"："+t._s(t.contestProblemMap[i.id]["displayTitle"])+" ")]):t._e(),t.contestProblemMap[i.id]?n("span",[t._v(" "+t._s(t.$t("m.Balloon_Color"))+"："),n("el-color-picker",{staticStyle:{"vertical-align":"middle"},attrs:{"show-alpha":"",predefine:t.predefineColors,size:"small"},on:{change:function(e){return t.changeContestProblemColor(t.contestProblemMap[i.id])}},model:{value:t.contestProblemMap[i.id].color,callback:function(e){t.$set(t.contestProblemMap[i.id],"color",e)},expression:"contestProblemMap[row.id].color"}})],1):n("span",[t._v(t._s(i.title))])]}}],null,!1,1373693970)}):t.examID?n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Exam_Display"),align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.examProblemMap[i.id]?n("p",[t._v(" "+t._s(t.$t("m.Display_ID"))+"："+t._s(t.examProblemMap[i.id]["displayId"])+" ")]):t._e(),t.examProblemMap[i.id]?n("p",[t._v(" "+t._s(t.$t("m.Title"))+"："+t._s(t.examProblemMap[i.id]["displayTitle"])+" ")]):t._e(),t.examProblemMap[i.id]?n("span",[t._v(" "+t._s(t.$t("m.Score"))+"： "),n("el-input",{staticStyle:{width:"60%"},attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changeExamProblemScore(t.examProblemMap[i.id])}},model:{value:t.examProblemMap[i.id].score,callback:function(e){t.$set(t.examProblemMap[i.id],"score",e)},expression:"examProblemMap[row.id].score"}})],1):n("span",[t._v(t._s(i.title))])]}}],null,!1,3257991616)}):t._e():n("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),n("vxe-table-column",{attrs:{field:"author","min-width":"96",title:t.$t("m.Author"),"show-overflow":""}}),n("vxe-table-column",{attrs:{"min-width":"120",title:t.$t("m.Created_Time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("localtime")(n.gmtCreate))+" ")]}}],null,!1,4036319876)}),n("vxe-table-column",{attrs:{"min-width":"96",field:"modifiedUser",title:t.$t("m.Modified_User"),"show-overflow":""}}),n("vxe-table-column",{attrs:{"min-width":"120",title:t.$t("m.Auth")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-select",{attrs:{size:"small",disabled:i.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=i.author},on:{change:function(e){return t.changeProblemAuth(i.id,i.auth)}},model:{value:i.auth,callback:function(e){t.$set(i,"auth",e)},expression:"row.auth"}},[n("el-option",{attrs:{label:t.$t("m.Public_Problem"),value:1}}),n("el-option",{attrs:{label:t.$t("m.Private_Problem"),value:2}}),n("el-option",{attrs:{label:t.$t("m.Contest_Exam_Problem"),value:3,disabled:!t.contestID&&!t.examID}})],1)]}}],null,!1,1890993070)}),n("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=i.author?t._e():n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEditProblem(i.id)}}})],1),i.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=i.author?t._e():n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Download_Testcase"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"success"},nativeOn:{click:function(e){return t.downloadTestCase(i.id)}}})],1),t.contestID||t.examID?n("p"):t._e(),t.contestID?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Remove"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.removeContestProblem(i.id)}}})],1):t._e(),t.examID?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Remove"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-close",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.removeExamProblem(i.id)}}})],1):t._e(),i.gid!=t.gid||!t.isGroupRoot&&t.userInfo.username!=i.author?t._e():n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteProblem(i.id)}}})],1)]}}],null,!1,1467142687)})],1),t.editPage?t._e():n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}}),t.editPage?n("Problem",{attrs:{mode:"edit",title:t.$t("m.Edit_Problem"),apiMethod:"updateGroupProblem",pid:t.pid,contestID:t.contestID,examID:t.examID},on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange}}):t._e()],1)},a=[],o=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("90b9")),r=n("2f62"),l=n("3228"),c=n("7850"),u=function(){return n.e("chunk-48bf8d0f").then(n.bind(null,"5072"))},m={name:"GroupProblemList",components:{Pagination:u,Problem:c["a"]},props:{contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{total:0,currentPage:1,limit:10,problemList:[],contestProblemMap:{},examProblemMap:{},loading:!1,pid:null,editPage:!1,predefineColors:null,gid:null}},mounted:function(){this.gid=this.$route.params.groupID,this.init()},methods:{init:function(){this.getAdminProblemList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},getAdminProblemList:function(){var t=this;if(this.loading=!0,this.contestID){var e={cid:this.contestID};l["a"].getGroupContestProblemList(this.currentPage,this.limit,e).then((function(e){t.total=e.data.data.problemList.total,t.problemList=e.data.data.problemList.records,t.contestProblemMap=e.data.data.contestProblemMap,t.loading=!1}),(function(e){t.loading=!1}))}else if(this.examID){var n={eid:this.examID};l["a"].getGroupExamProblemList(this.currentPage,this.limit,n).then((function(e){t.total=e.data.data.problemList.total,t.problemList=e.data.data.problemList.records,t.examProblemMap=e.data.data.examProblemMap,t.loading=!1}),(function(e){t.loading=!1}))}else l["a"].getGroupAdminProblemList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.problemList=e.data.data.records,t.total=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},handleEditPage:function(){this.editPage=!1,this.$emit("currentChange",1),this.contestID||this.examID?this.$emit("handleEditProblemPage"):this.$emit("handleEditPage")},goEditProblem:function(t){this.pid=t,this.editPage=!this.editPage,this.contestID||this.examID?this.$emit("handleEditProblemPage"):this.$emit("handleEditPage")},changeContestProblemColor:function(t){var e=this;l["a"].updateGroupContestProblem(t).then((function(t){e.$msg.success(e.$i18n.t("m.Update_Successfully"))}))},changeExamProblemScore:function(t){var e=this;l["a"].updateGroupExamProblem(t).then((function(t){e.$msg.success(e.$i18n.t("m.Update_Successfully"))}))},changeProblemAuth:function(t,e){var n=this;l["a"].changeGroupProblemAuth(t,e).then((function(t){n.$msg.success(n.$i18n.t("m.Update_Successfully")),n.$emit("currentChange",1)}))},removeContestProblem:function(t){var e=this;this.$confirm(this.$i18n.t("m.Remove_Contest_Problem_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){l["a"].deleteGroupContestProblem(t,e.contestID).then((function(t){e.$msg.success(e.$t("m.Delete_successfully")),e.$emit("currentChangeProblem")})).catch((function(){}))}),(function(){}))},removeExamProblem:function(t){var e=this;this.$confirm(this.$i18n.t("m.Remove_Exam_Problem_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){l["a"].deleteGroupExamProblem(t,e.examID).then((function(t){e.$msg.success(e.$t("m.Delete_successfully")),e.$emit("currentChangeProblem")})).catch((function(){}))}),(function(){}))},downloadTestCase:function(t){var e=this,n="/api/file/download-testcase?pid="+t;s["a"].downloadFile(n).then((function(){e.$alert(e.$i18n.t("m.Download_Testcase_Success"),e.$i18n.t("m.Tips"))}))},deleteProblem:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Problem_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){l["a"].deleteGroupProblem(t,e.$route.params.groupID).then((function(t){e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.$emit("currentChange",1),e.currentChange(1)})).catch((function(){}))}),(function(){}))}},computed:Object(o["a"])({},Object(r["c"])(["userInfo","isGroupRoot"]))},d=m,p=n("2877"),h=Object(p["a"])(d,i,a,!1,null,null,null);e["a"]=h.exports},"55f6":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"center"}},[n("vxe-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:t.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":t.filterByKeyword},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterByKeyword.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),n("vxe-table",{attrs:{data:t.problemList,loading:t.loading,"auto-resize":"",stripe:"",align:"center"}},[n("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"problemId"}}),n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Title"),field:"title"}}),n("vxe-table-column",{attrs:{title:t.$t("m.Option"),align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Add"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.addPublicProblem(i.id,i.problemId)}}})],1)]}}])})],1),t.total?n("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next, sizes","page-size":t.limit,"current-page":t.currentPage,total:t.total,"page-sizes":[10,30,50,100]},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.onPageSizeChange}}):t._e()],1)},a=[],o=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("3228")),s=function(){return n.e("chunk-48bf8d0f").then(n.bind(null,"5072"))},r={name:"AddProblemFromPublic",components:{Pagination:s},props:{apiMethod:{type:String,default:"getGroupTrainingProblemList"},trainingID:{type:Number,default:null},contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{currentPage:1,limit:10,total:0,loading:!1,problemList:[],contest:{},exam:{},keyword:""}},mounted:function(){var t=this;this.contestID?o["a"].getGroupContest(this.contestID).then((function(e){t.contest=e.data.data,t.init()})).catch((function(){})):this.examID?o["a"].getGroupExam(this.examID).then((function(e){t.exam=e.data.data,t.init()})).catch((function(){})):this.trainingID&&this.init()},methods:{init:function(){this.getPublicProblem()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},getPublicProblem:function(){var t=this;this.loading=!0;var e={keyword:this.keyword,problemType:this.contest.type,cid:this.contest.id,eid:this.exam.id,tid:this.trainingID,queryExisted:!1};this.examID&&(e.problemType=1),o["a"][this.apiMethod](this.currentPage,this.limit,e).then((function(e){t.loading=!1,t.total=e.data.data.problemList.total,t.problemList=e.data.data.problemList.records})).catch((function(){t.loading=!1}))},addPublicProblem:function(t,e){var n=this;if(this.contestID)this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then((function(e){var i=e.value,a={pid:t,cid:n.contestID,displayId:i};null!=i&&""!=i?o["a"].addGroupContestProblemFromPublic(a).then((function(t){n.$msg.success(n.$i18n.t("m.Add_Successfully")),n.$emit("currentChangeProblem"),n.currentChange(1)}),(function(){})):n.$msg.error(n.$t("m.The_Problem_Display_ID_in_the_Contest_is_required"))}),(function(){}));else if(this.examID)this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Exam"),"Tips").then((function(e){var i=e.value,a={pid:t,eid:n.examID,displayId:i};null!=i&&""!=i?o["a"].addGroupExamProblemFromPublic(a).then((function(t){n.$msg.success(n.$i18n.t("m.Add_Successfully")),n.$emit("currentChangeProblem"),n.currentChange(1)}),(function(){})):n.$msg.error(n.$t("m.The_Problem_Display_ID_in_the_Exam_is_required"))}),(function(){}));else{var i={pid:t,tid:this.trainingID,displayId:e};o["a"].addGroupTrainingProblemFromPublic(i).then((function(t){n.$msg.success(n.$i18n.t("m.Add_Successfully")),n.$emit("currentChangeProblem"),n.currentChange(1)}),(function(){}))}},filterByKeyword:function(){this.getPublicProblem(this.page)}}},l=r,c=(n("b495"),n("2877")),u=Object(c["a"])(l,i,a,!1,null,"44bfaa31",null);e["a"]=u.exports},"5b99":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("div",{staticClass:"filter-row"},[n("el-row",[n("el-col",{attrs:{span:3}},[n("span",{staticClass:"title"},[t._v(t._s(t.$t("m.Group_Contest")))])]),!t.isSuperAdmin&&!t.isGroupAdmin||t.problemPage||t.editProblemPage||t.announcementPage?!t.isSuperAdmin&&!t.isGroupAdmin||!t.problemPage||t.editProblemPage||t.createProblemPage||t.announcementPage?(t.isSuperAdmin||t.isGroupAdmin)&&(t.editProblemPage||t.createProblemPage)?n("el-col",{attrs:{span:18}},[t.editProblemPage?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-back"},on:{click:t.handleEditProblemPage}},[t._v(t._s(t.$t("m.Back")))]):t._e(),t._v("` "),t.createProblemPage?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-back"},on:{click:t.handleCreateProblemPage}},[t._v(t._s(t.$t("m.Back")))]):t._e(),t._v("` ")],1):(t.isSuperAdmin||t.isGroupAdmin)&&t.announcementPage?n("el-col",{attrs:{span:18}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.handleCreateAnnouncementPage}},[t._v(t._s(t.$t("m.Create")))]),n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-back"},on:{click:t.handleAnnouncementPage}},[t._v(t._s(t.$t("m.Back")))])],1):t._e():n("el-col",{attrs:{span:18}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.handleCreateProblemPage}},[t._v(t._s(t.$t("m.Create")))]),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.publicPage=!0}}},[t._v(t._s(t.$t("m.Add_From_Public_Problem")))]),n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:t.handleGroupPage}},[t._v(t._s(t.$t("m.Add_From_Group_Problem")))]),n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-back"},on:{click:function(e){return t.handleProblemPage(null)}}},[t._v(t._s(t.$t("m.Back")))])],1):n("el-col",{attrs:{span:18}},[t.editPage?t._e():n("el-button",{attrs:{type:t.createPage?"danger":"primary",size:"small",icon:t.createPage?"el-icon-back":"el-icon-plus"},on:{click:t.handleCreatePage}},[t._v(t._s(t.createPage?t.$t("m.Back"):t.$t("m.Create")))]),t.editPage&&t.adminPage?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-back"},on:{click:t.handleEditPage}},[t._v(t._s(t.$t("m.Back")))]):t._e(),t._v("` "),n("el-button",{attrs:{type:t.adminPage?"warning":"success",size:"small",icon:t.adminPage?"el-icon-back":"el-icon-s-opportunity"},on:{click:t.handleAdminPage}},[t._v(t._s(t.adminPage?t.$t("m.Back"):t.$t("m.Contest_Admin")))])],1)],1)],1),t.adminPage||t.createPage||t.problemPage?t._e():n("div",[n("p",{directives:[{name:"show",rawName:"v-show",value:0==t.contestList.length,expression:"contestList.length == 0"}],attrs:{id:"no-contest"}},[n("el-empty",{attrs:{description:t.$t("m.No_Contest")}})],1),n("ol",{attrs:{id:"contest-list"}},t._l(t.contestList,(function(e){return n("li",{key:e.title,style:t.getborderColor(e)},[n("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{xs:10,sm:4,md:3,lg:2}},[n("img",{directives:[{name:"show",rawName:"v-show",value:0==e.type,expression:"contest.type == 0"}],staticClass:"trophy",attrs:{src:t.acmSrc,width:"95px"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==e.type,expression:"contest.type == 1"}],staticClass:"trophy",attrs:{src:t.oiSrc,width:"95px"}})]),n("el-col",{staticClass:"contest-main",attrs:{xs:10,sm:16,md:19,lg:20}},[n("p",{staticClass:"contest-title"},[n("a",{staticClass:"entry",on:{click:function(n){return n.stopPropagation(),t.goGroupContest(e.id)}}},[t._v(" "+t._s(e.title)+" ")]),1==e.auth?[n("i",{staticClass:"el-icon-lock",staticStyle:{color:"#d9534f"},attrs:{size:"20"}})]:t._e(),2==e.auth?[n("i",{staticClass:"el-icon-lock",staticStyle:{color:"#f0ad4e"},attrs:{size:"20"}})]:t._e()],2),n("ul",{staticClass:"detail"},[n("li",[n("i",{staticClass:"fa fa-calendar",staticStyle:{color:"#3091f2"},attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t._f("localtime")(e.startTime))+" ")]),n("li",[n("i",{staticClass:"fa fa-clock-o",staticStyle:{color:"#3091f2"},attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.getDuration(e.startTime,e.endTime))+" ")]),n("li",[0==e.type?[n("el-button",{attrs:{size:"mini",round:"",type:"primary"},on:{click:function(n){return t.onRuleChange(e.type)}}},[n("i",{staticClass:"fa fa-trophy"}),t._v(" "+t._s(t._f("parseContestType")(e.type))+" ")])]:[n("el-tooltip",{attrs:{content:t.$t("m.Contest_Rank")+"："+("Recent"==e.oiRankScoreType?t.$t("m.Based_on_The_Recent_Score_Submitted_Of_Each_Problem"):t.$t("m.Based_on_The_Highest_Score_Submitted_For_Each_Problem")),placement:"top"}},[n("el-button",{attrs:{size:"mini",round:"",type:"warning"},on:{click:function(n){return t.onRuleChange(e.type)}}},[n("i",{staticClass:"fa fa-trophy"}),t._v(" "+t._s(t._f("parseContestType")(e.type))+" ")])],1)]],2),n("li",[n("el-tooltip",{attrs:{content:t.$t("m."+t.CONTEST_TYPE_REVERSE[e.auth].tips),placement:"top",effect:"light"}},[n("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[e.auth]["color"],effect:"plain"}},[t._v(" "+t._s(t.$t("m."+t.CONTEST_TYPE_REVERSE[e.auth]["name"]))+" ")])],1)],1),e.auth!=t.CONTEST_TYPE.PUBLIC?n("li",[n("i",{staticClass:"el-icon-user-solid",staticStyle:{color:"rgb(48, 145, 242)"}}),t._v("x"+t._s(null!=e.count?e.count:0)+" ")]):t._e(),e.openRank?n("li",[n("el-tooltip",{attrs:{content:t.$t("m.Contest_Outside_ScoreBoard"),placement:"top",effect:"dark"}},[n("el-button",{attrs:{circle:"",size:"small",type:"primary",disabled:e.status==t.CONTEST_STATUS.SCHEDULED,icon:"el-icon-data-analysis"},on:{click:function(n){return t.goContestOutsideScoreBoard(e.id,e.type)}}})],1)],1):t._e()])]),n("el-col",{staticStyle:{"text-align":"center"},attrs:{xs:4,sm:4,md:2,lg:2}},[n("el-tag",{attrs:{effect:"dark",color:t.CONTEST_STATUS_REVERSE[e.status]["color"],size:"medium"}},[n("i",{staticClass:"fa fa-circle",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("m."+t.CONTEST_STATUS_REVERSE[e.status]["name"]))+" ")])],1)],1)],1)})),0),n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}})],1),!t.adminPage||t.createPage||t.problemPage||t.announcementPage?t._e():n("ContestList",{ref:"contestList",on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange,handleProblemPage:t.handleProblemPage,handleAnnouncementPage:t.handleAnnouncementPage}}),t.problemPage&&!t.createProblemPage?n("ProblemList",{ref:"contestProblemList",attrs:{contestID:t.contestID},on:{currentChangeProblem:t.currentChangeProblem,handleEditProblemPage:t.handleEditProblemPage}}):t._e(),t.announcementPage?n("AnnouncementList",{ref:"contestAnnouncementList",attrs:{contestID:t.contestID}}):t._e(),!t.createPage||t.editPage||t.problemPage?t._e():n("Contest",{attrs:{mode:"add",title:t.$t("m.Create_Contest"),apiMethod:"addGroupContest"},on:{handleCreatePage:t.handleCreatePage,currentChange:t.currentChange}}),t.createProblemPage?n("Problem",{attrs:{mode:"add",contestID:t.contestID,title:t.$t("m.Create_Problem"),apiMethod:"addGroupContestProblem"},on:{handleCreateProblemPage:t.handleCreateProblemPage,currentChange:t.currentChange}}):t._e(),n("el-dialog",{attrs:{title:t.$t("m.Add_Contest_Problem"),width:"90%",visible:t.publicPage,"close-on-click-modal":!1},on:{"update:visible":function(e){t.publicPage=e}}},[t.publicPage?n("AddPublicProblem",{ref:"addPublicProblem",attrs:{contestID:t.contestID,apiMethod:"getGroupContestProblemList"},on:{currentChangeProblem:t.currentChangeProblem}}):t._e()],1),n("el-dialog",{attrs:{title:t.$t("m.Add_Contest_Problem"),width:"350px",visible:t.groupPage,"close-on-click-modal":!1},on:{"update:visible":function(e){t.groupPage=e}}},[n("AddGroupProblem",{attrs:{contestID:t.contestID},on:{currentChangeProblem:t.currentChangeProblem,handleGroupPage:t.handleGroupPage}})],1)],1)},a=[],o=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("2f62")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.editPage?t._e():n("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.contestList,loading:t.loading,align:"center"}},[n("vxe-table-column",{attrs:{field:"id",width:"80",title:"ID"}}),n("vxe-table-column",{attrs:{field:"title","min-width":"150",title:t.$t("m.Title"),"show-overflow":""}}),n("vxe-table-column",{attrs:{title:t.$t("m.Type"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t._f("parseContestType")(i.type)))])]}}],null,!1,1522718207)}),n("vxe-table-column",{attrs:{title:t.$t("m.Auth"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tooltip",{attrs:{content:t.$t("m."+t.CONTEST_TYPE_REVERSE[i.auth].tips),placement:"top",effect:"light"}},[n("el-tag",{attrs:{type:t.CONTEST_TYPE_REVERSE[i.auth].color,effect:"plain"}},[t._v(" "+t._s(t.$t("m."+t.CONTEST_TYPE_REVERSE[i.auth].name))+" ")])],1)]}}],null,!1,1214536652)}),n("vxe-table-column",{attrs:{title:t.$t("m.Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tag",{attrs:{effect:"dark",color:t.CONTEST_STATUS_REVERSE[i.status].color,size:"medium"}},[t._v(" "+t._s(t.$t("m."+t.CONTEST_STATUS_REVERSE[i.status]["name"]))+" ")])]}}],null,!1,3210277363)}),n("vxe-table-column",{attrs:{title:t.$t("m.Visible"),"min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-switch",{attrs:{disabled:!t.isGroupRoot&&t.userInfo.uid!=i.uid},on:{change:function(e){return t.changeContestVisible(i.id,i.visible)}},model:{value:i.visible,callback:function(e){t.$set(i,"visible",e)},expression:"row.visible"}})]}}],null,!1,877234504)}),n("vxe-table-column",{attrs:{"min-width":"210",title:t.$t("m.Info")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("p",[t._v(t._s(t.$t("m.Start_Time"))+": "+t._s(t._f("localtime")(i.startTime)))]),n("p",[t._v(t._s(t.$t("m.End_Time"))+": "+t._s(t._f("localtime")(i.endTime)))]),n("p",[t._v(t._s(t.$t("m.Created_Time"))+": "+t._s(t._f("localtime")(i.gmtCreate)))]),n("p",[t._v(t._s(t.$t("m.Creator"))+": "+t._s(i.author))])]}}],null,!1,1449312010)}),n("vxe-table-column",{attrs:{"min-width":"150",title:t.$t("m.Option")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.isGroupRoot||t.userInfo.uid==i.uid?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Edit"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.goEditContest(i.id)}}})],1):t._e(),t.isGroupRoot||t.userInfo.uid==i.uid?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Contest_Problem_List"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-tickets",size:"mini",type:"success"},nativeOn:{click:function(e){return t.goContestProblemList(i.id)}}})],1):t._e(),n("p"),t.isGroupRoot||t.userInfo.uid==i.uid?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.View_Contest_Announcement_List"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-info",size:"mini",type:"info"},nativeOn:{click:function(e){return t.goContestAnnouncementList(i.id)}}})],1):t._e(),t.isGroupRoot||t.userInfo.uid==i.uid?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Download_Contest_AC_Submission"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-download",size:"mini",type:"warning"},nativeOn:{click:function(e){return t.openDownloadOptions(i.id)}}})],1):t._e(),n("p"),t.isGroupRoot||t.userInfo.uid==i.uid?n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Delete"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteContest(i.id)}}})],1):t._e()]}}],null,!1,2320735192)})],1),t.editPage?t._e():n("Pagination",{attrs:{total:t.total,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}}),t.editPage?n("Contest",{attrs:{mode:"edit",title:t.$t("m.Edit_Contest"),apiMethod:"updateGroupContest",cid:t.cid},on:{handleEditPage:t.handleEditPage,currentChange:t.currentChange}}):t._e(),n("el-dialog",{attrs:{title:t.$t("m.Download_Contest_AC_Submission"),width:"320px",visible:t.downloadDialogVisible},on:{"update:visible":function(e){t.downloadDialogVisible=e}}},[n("el-switch",{attrs:{"active-text":t.$t("m.Exclude_admin_submissions")},model:{value:t.excludeAdmin,callback:function(e){t.excludeAdmin=e},expression:"excludeAdmin"}}),n("el-radio-group",{staticStyle:{"margin-top":"10px"},model:{value:t.splitType,callback:function(e){t.splitType=e},expression:"splitType"}},[n("el-radio",{attrs:{label:"user"}},[t._v(t._s(t.$t("m.SplitType_User")))]),n("el-radio",{attrs:{label:"problem"}},[t._v(t._s(t.$t("m.SplitType_Problem")))])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.downloadSubmissions}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)},l=[],c=(n("99af"),n("3228")),u=n("90b9"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-col",{attrs:{span:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"panel-title home-title"},[t._v(" "+t._s(t.title)+" ")])]),n("el-form",{attrs:{"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Title"),required:""}},[n("el-input",{attrs:{placeholder:t.$t("m.Contest_Title")},model:{value:t.contest.title,callback:function(e){t.$set(t.contest,"title",e)},expression:"contest.title"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Description"),required:""}},[n("Editor",{attrs:{value:t.contest.description},on:{"update:value":function(e){return t.$set(t.contest,"description",e)}}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Start_Time"),required:""}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.Contest_Start_Time")},on:{change:t.changeDuration},model:{value:t.contest.startTime,callback:function(e){t.$set(t.contest,"startTime",e)},expression:"contest.startTime"}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_End_Time"),required:""}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:t.$t("m.Contest_End_Time")},on:{change:t.changeDuration},model:{value:t.contest.endTime,callback:function(e){t.$set(t.contest,"endTime",e)},expression:"contest.endTime"}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Duration"),required:""}},[n("el-input",{attrs:{disabled:""},model:{value:t.durationText,callback:function(e){t.durationText=e},expression:"durationText"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Rule_Type"),required:""}},[n("el-radio",{staticClass:"radio",attrs:{label:0,disabled:t.disableRuleType},on:{change:t.setSealRankTimeDefaultValue},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("ACM")]),n("el-radio",{staticClass:"radio",attrs:{label:1,disabled:t.disableRuleType},on:{change:t.setSealRankTimeDefaultValue},model:{value:t.contest.type,callback:function(e){t.$set(t.contest,"type",e)},expression:"contest.type"}},[t._v("OI")])],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.contest.type,expression:"contest.type == 1"}],attrs:{label:t.$t("m.OI_Rank_Score_Type")}},[n("el-radio",{staticClass:"radio",attrs:{label:"Recent"},model:{value:t.contest.oiRankScoreType,callback:function(e){t.$set(t.contest,"oiRankScoreType",e)},expression:"contest.oiRankScoreType"}},[t._v(t._s(t.$t("m.OI_Rank_Score_Type_Recent")))]),n("el-radio",{staticClass:"radio",attrs:{label:"Highest"},model:{value:t.contest.oiRankScoreType,callback:function(e){t.$set(t.contest,"oiRankScoreType",e)},expression:"contest.oiRankScoreType"}},[t._v(t._s(t.$t("m.OI_Rank_Score_Type_Highest")))])],1)],1)],1),n("el-row",{attrs:{gutter:20}},[t.contest.sealRank?n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Seal_Time_Rank"),required:""}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1):n("el-col",{attrs:{md:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Real_Time_Rank"),required:""}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":""},on:{change:t.setSealRankTimeDefaultValue},model:{value:t.contest.sealRank,callback:function(e){t.$set(t.contest,"sealRank",e)},expression:"contest.sealRank"}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.contest.sealRank,expression:"contest.sealRank"}],attrs:{label:t.$t("m.Seal_Rank_Time"),required:t.contest.sealRank}},[n("el-select",{model:{value:t.seal_rank_time,callback:function(e){t.seal_rank_time=e},expression:"seal_rank_time"}},[n("el-option",{attrs:{label:t.$t("m.Contest_Seal_Half_Hour"),value:0,disabled:t.contest.duration<1800}}),n("el-option",{attrs:{label:t.$t("m.Contest_Seal_An_Hour"),value:1,disabled:t.contest.duration<3600}}),n("el-option",{attrs:{label:t.$t("m.Contest_Seal_All_Hour"),value:2}})],1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.contest.sealRank,expression:"contest.sealRank"}],attrs:{label:t.$t("m.Auto_Real_Rank"),required:""}},[n("el-switch",{attrs:{"active-text":t.$t("m.Real_Rank_After_Contest"),"inactive-text":t.$t("m.Seal_Rank_After_Contest")},model:{value:t.contest.autoRealRank,callback:function(e){t.$set(t.contest,"autoRealRank",e)},expression:"contest.autoRealRank"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Outside_ScoreBoard"),required:""}},[n("el-switch",{attrs:{"active-text":t.$t("m.Open"),"inactive-text":t.$t("m.Close")},model:{value:t.contest.openRank,callback:function(e){t.$set(t.contest,"openRank",e)},expression:"contest.openRank"}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Print_Func"),required:""}},[n("el-switch",{attrs:{"active-text":t.$t("m.Support_Offline_Print"),"inactive-text":t.$t("m.Not_Support_Print")},model:{value:t.contest.openPrint,callback:function(e){t.$set(t.contest,"openPrint",e)},expression:"contest.openPrint"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Rank_Show_Name"),required:""}},[n("el-radio-group",{model:{value:t.contest.rankShowName,callback:function(e){t.$set(t.contest,"rankShowName",e)},expression:"contest.rankShowName"}},[n("el-radio",{attrs:{label:"username"}},[t._v(t._s(t.$t("m.Show_Username")))]),n("el-radio",{attrs:{label:"nickname"}},[t._v(t._s(t.$t("m.Show_Nickname")))]),n("el-radio",{attrs:{label:"realname"}},[t._v(t._s(t.$t("m.Show_Realname")))])],1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:t.$t("m.Star_User_UserName"),required:""}},[t._l(t.contest.starAccount,(function(e){return n("el-tag",{key:e,staticStyle:{"margin-right":"7px","margin-top":"4px"},attrs:{closable:"","close-transition":!1,type:"warning",size:"medium"},on:{close:function(n){return t.removeStarUser(e)}}},[t._v(t._s(e))])})),t.inputVisible?n("el-input",{staticClass:"input-new-star-user",attrs:{size:"medium","trigger-on-focus":!0},on:{blur:t.addStarUser},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addStarUser.apply(null,arguments)}},model:{value:t.starUserInput,callback:function(e){t.starUserInput=e},expression:"starUserInput"}}):n("el-tooltip",{attrs:{effect:"dark",content:t.$t("m.Add"),placement:"top"}},[n("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){t.inputVisible=!0}}})],1)],2)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Contest_Auth"),required:""}},[n("el-select",{model:{value:t.contest.auth,callback:function(e){t.$set(t.contest,"auth",e)},expression:"contest.auth"}},[n("el-option",{attrs:{label:t.$t("m.Public"),value:0}}),n("el-option",{attrs:{label:t.$t("m.Private"),value:1}}),n("el-option",{attrs:{label:t.$t("m.Protected"),value:2}})],1)],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.contest.auth,expression:"contest.auth != 0"}],attrs:{label:t.$t("m.Contest_Password"),required:0!=t.contest.auth}},[n("el-input",{attrs:{placeholder:t.$t("m.Contest_Password")},model:{value:t.contest.pwd,callback:function(e){t.$set(t.contest,"pwd",e)},expression:"contest.pwd"}})],1)],1),n("el-col",{attrs:{md:8,xs:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.contest.auth,expression:"contest.auth != 0"}],attrs:{label:t.$t("m.Account_Limit"),required:0!=t.contest.auth}},[n("el-switch",{model:{value:t.contest.openAccountLimit,callback:function(e){t.$set(t.contest,"openAccountLimit",e)},expression:"contest.openAccountLimit"}})],1)],1),t.contest.openAccountLimit?[n("el-form",{attrs:{model:t.formRule}},[n("el-col",{attrs:{md:6,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Prefix"),prop:"prefix"}},[n("el-input",{attrs:{placeholder:"Prefix"},model:{value:t.formRule.prefix,callback:function(e){t.$set(t.formRule,"prefix",e)},expression:"formRule.prefix"}})],1)],1),n("el-col",{attrs:{md:6,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Suffix"),prop:"suffix"}},[n("el-input",{attrs:{placeholder:"Suffix"},model:{value:t.formRule.suffix,callback:function(e){t.$set(t.formRule,"suffix",e)},expression:"formRule.suffix"}})],1)],1),n("el-col",{attrs:{md:6,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Start_Number"),prop:"number_from"}},[n("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formRule.number_from,callback:function(e){t.$set(t.formRule,"number_from",e)},expression:"formRule.number_from"}})],1)],1),n("el-col",{attrs:{md:6,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.End_Number"),prop:"number_to"}},[n("el-input-number",{staticStyle:{width:"100%"},model:{value:t.formRule.number_to,callback:function(e){t.$set(t.formRule,"number_to",e)},expression:"formRule.number_to"}})],1)],1),t.formRule.number_from<=t.formRule.number_to?n("div",{staticClass:"userPreview"},[t._v(" "+t._s(t.$t("m.The_allowed_account_will_be"))+" "+t._s(t.formRule.prefix+t.formRule.number_from+t.formRule.suffix)+", "),t.formRule.number_from+1<t.formRule.number_to?n("span",[t._v(" "+t._s(t.formRule.prefix+(t.formRule.number_from+1)+t.formRule.suffix+"...")+" ")]):t._e(),t.formRule.number_from+1<=t.formRule.number_to?n("span",[t._v(" "+t._s(t.formRule.prefix+t.formRule.number_to+t.formRule.suffix)+" ")]):t._e()]):t._e(),n("el-col",{attrs:{md:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("m.Extra_Account"),prop:"prefix"}},[n("el-input",{attrs:{type:"textarea",placeholder:t.$t("m.Extra_Account_Tips"),rows:8},model:{value:t.formRule.extra_account,callback:function(e){t.$set(t.formRule,"extra_account",e)},expression:"formRule.extra_account"}})],1)],1)],1)]:t._e()],2)],1),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submit.apply(null,arguments)}}},[t._v(t._s(t.$t("m.Save")))])],1)],1)],1)},d=[],p=(n("a9e3"),n("25f0"),n("a4d3"),n("e01a"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("5319"),n("a434"),n("d81d"),n("b0c0"),n("ffb0")),h=n("c1df"),f=n.n(h),g=n("a956"),_={name:"GroupContest",components:{Editor:g["default"]},props:{mode:{type:String,default:"edit"},title:{type:String,default:"Edit Contest"},apiMethod:{type:String,default:"addGroupContest"},cid:{type:Number,default:null}},data:function(){return{disableRuleType:!1,durationText:"",seal_rank_time:2,contest:{title:"",description:"",startTime:"",endTime:"",duration:0,type:0,pwd:"",sealRank:!1,sealRankTime:"",autoRealRank:!0,auth:0,openPrint:!1,rankShowName:"username",openAccountLimit:!1,accountLimitRule:"",starAccount:[],oiRankScoreType:"Recent"},formRule:{prefix:"",suffix:"",number_from:0,number_to:10,extra_account:""},starUserInput:"",inputVisible:!1}},mounted:function(){this.init()},watch:{$route:function(){this.contest={title:"",description:"",startTime:"",endTime:"",duration:0,type:0,pwd:"",sealRank:!1,sealRankTime:"",autoRealRank:!0,auth:0,openPrint:!1,rankShowName:"username",openAccountLimit:!1,accountLimitRule:"",starAccount:[],oiRankScoreType:"Recent"},this.init()}},methods:{init:function(){var t=this;"edit"===this.mode?(this.disableRuleType=!0,c["a"].getGroupContest(this.cid).then((function(e){var n=e.data.data;t.contest=n,t.changeDuration();var i=f()(t.contest.endTime).subtract(1800,"seconds").toString(),a=f()(t.contest.endTime).subtract(3600,"seconds").toString(),o=f()(t.contest.startTime).toString(),s=f()(t.contest.sealRankTime).toString();switch(s){case i:t.seal_rank_time=0;break;case a:t.seal_rank_time=1;break;case o:t.seal_rank_time=2;break}t.contest.accountLimitRule&&(t.formRule=t.changeStrToAccountRule(t.contest.accountLimitRule))})).catch((function(){}))):this.disableRuleType=!1},submit:function(){var t=this;if(this.contest.title)if(this.contest.description)if(this.contest.startTime)if(this.contest.endTime)if(!this.contest.duration||this.contest.duration<=0)this.$msg.error(this.$i18n.t("m.Contest_Duration_Check"));else if(0==this.contest.auth||this.contest.pwd){switch(this.contest.openAccountLimit&&(this.contest.accountLimitRule=this.changeAccountRuleToStr(this.formRule)),this.seal_rank_time){case 0:this.contest.sealRankTime=f()(this.contest.endTime).subtract(1800,"seconds");break;case 1:this.contest.sealRankTime=f()(this.contest.endTime).subtract(3600,"seconds");break;case 2:this.contest.sealRankTime=f()(this.contest.startTime)}var e=Object.assign({},this.contest);"add"===this.mode&&(e["uid"]=this.userInfo.uid,e["author"]=this.userInfo.username,e["gid"]=this.$route.params.groupID),c["a"][this.apiMethod](e).then((function(e){t.$router.push({name:"GroupContestList"}),"edit"===t.mode?(t.$emit("handleEditPage"),t.$msg.success(t.$t("m.Update_Successfully"))):(t.$emit("handleCreatePage"),t.$msg.success(t.$t("m.Create_Successfully"))),t.$emit("currentChange",1)})).catch((function(){}))}else this.$msg.error(this.$i18n.t("m.Contest_Password")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Contest_End_Time")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Contest_Start_Time")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Contest_Description")+" "+this.$i18n.t("m.is_required"));else this.$msg.error(this.$i18n.t("m.Contest_Title")+" "+this.$i18n.t("m.is_required"))},changeDuration:function(){var t=this.contest.startTime,e=this.contest.endTime,n=p["a"].durationMs(t,e);if(n<0)return this.durationText=this.$i18n.t("m.Contets_Time_Check"),void(this.contest.duration=0);""!=t&&""!=e&&(this.durationText=p["a"].formatSpecificDuration(t,e),this.contest.duration=n)},changeAccountRuleToStr:function(t){var e="<prefix>"+t.prefix+"</prefix><suffix>"+t.suffix+"</suffix><start>"+t.number_from+"</start><end>"+t.number_to+"</end><extra>"+t.extra_account+"</extra>";return e},changeStrToAccountRule:function(t){var e="<prefix>([\\s\\S]*?)</prefix><suffix>([\\s\\S]*?)</suffix><start>([\\s\\S]*?)</start><end>([\\s\\S]*?)</end><extra>([\\s\\S]*?)</extra>",n=RegExp(e,"g"),i=n.exec(t);return{prefix:i[1],suffix:i[2],number_from:i[3],number_to:i[4],extra_account:i[5]}},addStarUser:function(){if(this.starUserInput=this.starUserInput.replace(/(^\s*)|(\s*$)/g,""),this.starUserInput){for(var t=0;t<this.contest.starAccount.length;t++)if(this.contest.starAccount[t]==this.starUserInput)return this.$msg.warning(this.$i18n.t("m.Add_Star_User_Error")),void(this.starUserInput="");this.contest.starAccount.push(this.starUserInput),this.inputVisible=!1,this.starUserInput=""}},removeStarUser:function(t){this.contest.starAccount.splice(this.contest.starAccount.map((function(t){return t.name})).indexOf(t),1)},setSealRankTimeDefaultValue:function(){1==this.contest.sealRank&&(0==this.contest.type?this.contest.duration<3600?this.seal_rank_time=2:this.seal_rank_time=1:this.seal_rank_time=2)}},computed:Object(o["a"])({},Object(s["c"])(["userInfo"]))},b=_,P=(n("14f3"),n("2877")),v=Object(P["a"])(b,m,d,!1,null,"33381047",null),$=v.exports,C=n("9a36"),x=function(){return n.e("chunk-48bf8d0f").then(n.bind(null,"5072"))},y={name:"GroupContestList",components:{Pagination:x,Contest:$},data:function(){return{total:0,currentPage:1,limit:10,contestList:[],loading:!1,routeName:"",cid:null,editPage:!1,downloadDialogVisible:!1,excludeAdmin:!0,splitType:"user"}},mounted:function(){this.CONTEST_STATUS_REVERSE=Object.assign({},C["b"]),this.CONTEST_TYPE=Object.assign({},C["c"]),this.CONTEST_TYPE_REVERSE=Object.assign({},C["d"]),this.CONTEST_STATUS=Object.assign({},C["a"]),this.init()},methods:{init:function(){this.getAdminContestList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},handleEditPage:function(){this.editPage=!1,this.$emit("currentChange",1),this.$emit("handleEditPage")},getAdminContestList:function(){var t=this;this.loading=!0,c["a"].getGroupAdminContestList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.contestList=e.data.data.records,t.total=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},openDownloadOptions:function(t){this.downloadDialogVisible=!0,this.currentId=t},downloadSubmissions:function(){var t="/api/file/download-contest-ac-submission?cid=".concat(this.currentId,"&excludeAdmin=").concat(this.excludeAdmin,"&splitType=").concat(this.splitType);u["a"].downloadFile(t),this.downloadDialogVisible=!1},goEditContest:function(t){this.editPage=!0,this.cid=t,this.$emit("handleEditPage")},goContestProblemList:function(t){this.$emit("handleProblemPage",t)},goContestAnnouncementList:function(t){this.$emit("handleAnnouncementPage",t)},changeContestVisible:function(t,e){var n=this;c["a"].changeGroupContestVisible(t,e).then((function(t){n.$msg.success(n.$i18n.t("m.Update_Successfully")),n.$emit("currentChange",1),n.currentChange(1)}))},deleteContest:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Contest_Tips"),this.$i18n.t("m.Warning"),{type:"warning"}).then((function(){c["a"].deleteGroupContest(t,e.$route.params.groupID).then((function(t){e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.$emit("currentChange",1),e.currentChange(1)})).catch((function(){}))}),(function(){}))}},computed:Object(o["a"])({},Object(s["c"])(["isGroupRoot","userInfo"]))},k=y,T=Object(P["a"])(k,r,l,!1,null,null,null),w=T.exports,S=n("7850"),D=n("41da"),E=n("55f6"),R=n("bf68"),I=n("d696"),A=function(){return n.e("chunk-48bf8d0f").then(n.bind(null,"5072"))},O={name:"GroupContestList",components:{Pagination:A,ContestList:w,Contest:$,Problem:S["a"],ProblemList:D["a"],AddPublicProblem:E["a"],AddGroupProblem:R["a"],AnnouncementList:I["a"]},data:function(){return{total:0,currentPage:1,limit:10,contestList:[],loading:!1,adminPage:!1,createPage:!1,editPage:!1,problemPage:!1,publicPage:!1,groupPage:!1,editProblemPage:!1,createProblemPage:!1,announcementPage:!1,contestID:null,acmSrc:n("dc5f"),oiSrc:n("74e1")}},mounted:function(){this.CONTEST_STATUS_REVERSE=Object.assign({},C["b"]),this.CONTEST_TYPE=Object.assign({},C["c"]),this.CONTEST_TYPE_REVERSE=Object.assign({},C["d"]),this.CONTEST_STATUS=Object.assign({},C["a"]),this.init()},methods:{init:function(){this.getGroupContestList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},currentChangeProblem:function(){this.$refs.contestProblemList.currentChange(1)},getGroupContestList:function(){var t=this;this.loading=!0,c["a"].getGroupContestList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.contestList=e.data.data.records,t.total=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},goGroupContest:function(t){this.$router.push({name:"ContestDetails",params:{contestID:t}})},goContestOutsideScoreBoard:function(t,e){0==e?this.$router.push({name:"ACMScoreBoard",params:{contestID:t}}):1==e&&this.$router.push({name:"OIScoreBoard",params:{contestID:t}})},getDuration:function(t,e){return p["a"].formatSpecificDuration(t,e)},getborderColor:function(t){return"border-left: 4px solid "+C["b"][t.status]["color"]},handleCreatePage:function(){this.createPage=!this.createPage},handleEditPage:function(){this.editPage=!this.editPage,this.$refs.contestList.editPage=this.editPage},handleAdminPage:function(){this.adminPage=!this.adminPage,this.createPage=!1,this.editPage=!1},handleProblemPage:function(t){this.contestID=t,this.problemPage=!this.problemPage},handleAnnouncementPage:function(t){this.contestID=t,this.announcementPage=!this.announcementPage},handleGroupPage:function(){this.groupPage=!this.groupPage},handleEditProblemPage:function(){this.editProblemPage=!this.editProblemPage,this.$refs.contestProblemList.editPage=this.editProblemPage},handleCreateProblemPage:function(){this.createProblemPage=!this.createProblemPage,this.$refs.contestProblemList.currentChange(1)},handleCreateAnnouncementPage:function(){this.$refs.contestAnnouncementList.openAnnouncementDialog(null)}},computed:Object(o["a"])({},Object(s["c"])(["isAuthenticated","isSuperAdmin","isGroupAdmin"]))},G=O,L=(n("129e"),Object(P["a"])(G,i,a,!1,null,"4d0b7e07",null));e["default"]=L.exports},"74e1":function(t,e,n){t.exports=n.p+"assets/img/oi.c22b9dda.jpg"},"769b":function(t,e,n){},b495:function(t,e,n){"use strict";n("fd9a")},b88a:function(t,e,n){},bf68:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.problemId},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:t.$t("m.Problem_ID"),required:""}},[n("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addGroupProblem.apply(null,arguments)}},model:{value:t.problemId,callback:function(e){t.problemId=e},expression:"problemId"}})],1),n("el-form-item",{staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",loading:t.loading,size:"small"},on:{click:t.addGroupProblem}},[t._v(t._s(t.$t("m.Add"))+" ")])],1)],1)],1)},a=[],o=(n("a9e3"),n("3228")),s={name:"AddProblemFromGroup",props:{trainingID:{type:Number,default:null},contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{loading:!1,problemId:""}},methods:{addGroupProblem:function(){var t=this;this.contestID?this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Contest"),"Tips").then((function(e){var n=e.value;null!=n&&""!=n?o["a"].addGroupContestProblemFromGroup(t.problemId,t.contestID,n).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){})):t.$msg.error(t.$t("m.The_Problem_Display_ID_in_the_Contest_is_required"))}),(function(){})):this.examID?this.$prompt(this.$i18n.t("m.Enter_The_Problem_Display_ID_in_the_Exam"),"Tips").then((function(e){var n=e.value;null!=n&&""!=n?o["a"].addGroupExamProblemFromGroup(t.problemId,t.examID,n).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){})):t.$msg.error(t.$t("m.The_Problem_Display_ID_in_the_Exam_is_required"))}),(function(){})):o["a"].addGroupTrainingProblemFromGroup(this.problemId,this.trainingID).then((function(e){t.$msg.success(t.$i18n.t("m.Add_Successfully")),t.loading=!1,t.$emit("currentChangeProblem"),t.$emit("handleGroupPage")}),(function(){}))}}},r=s,l=n("2877"),c=Object(l["a"])(r,i,a,!1,null,null,null);e["a"]=c.exports},cd34:function(t,e,n){"use strict";n("034c")},d696:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vxe-table",{attrs:{stripe:"","auto-resize":"",data:t.adminAnnouncementList,loading:t.loading,align:"center"}},[n("vxe-table-column",{attrs:{"min-width":"50",field:"id",title:"ID"}}),n("vxe-table-column",{attrs:{"min-width":"150",field:"title","show-overflow":"",title:t.$t("m.Announcement_Title")}}),n("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:t.$t("m.Created_Time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("localtime")(n.gmtCreate))+" ")]}}])}),n("vxe-table-column",{attrs:{"min-width":"150",field:"gmtModified",title:t.$t("m.Modified_Time")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(t._f("localtime")(n.gmtModified))+" ")]}}])}),n("vxe-table-column",{attrs:{"min-width":"150",field:"username","show-overflow":"",title:t.$t("m.Author")}}),n("vxe-table-column",{attrs:{"min-width":"100",field:"status",title:t.$t("m.Announcement_visible")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":0,"inactive-value":1,disabled:!t.isGroupRoot&&i.uid!=t.userInfo.uid},on:{change:function(e){return t.handleVisibleSwitch(i)}},model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"row.status"}})]}}])}),n("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t.isGroupRoot||i.uid==t.userInfo.uid?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.Edit_Announcement"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(e){return t.openAnnouncementDialog(i)}}})],1):t._e(),t.isGroupRoot||i.uid==t.userInfo.uid?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.Delete_Announcement"),placement:"top"}},[n("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(e){return t.deleteAnnouncement(i.id)}}})],1):t._e()]}}])})],1),n("Pagination",{attrs:{total:t.adminTotal,"page-size":t.limit,current:t.currentPage,layout:"prev, pager, next, sizes"},on:{"on-change":t.currentChange,"update:current":function(e){t.currentPage=e},"on-page-size-change":t.onPageSizeChange}}),n("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:t.announcementDialogTitle,visible:t.showEditAnnouncementDialog,fullscreen:!0},on:{"update:visible":function(e){t.showEditAnnouncementDialog=e},open:t.onOpenEditDialog}},[n("el-form",{attrs:{"label-position":"top",model:t.announcement}},[n("el-form-item",{attrs:{label:t.$t("m.Announcement_Title"),required:""}},[n("el-input",{staticClass:"title-input",attrs:{placeholder:t.$t("m.Announcement_Title")},model:{value:t.announcement.title,callback:function(e){t.$set(t.announcement,"title",e)},expression:"announcement.title"}})],1),n("el-form-item",{attrs:{label:t.$t("m.Announcement_Content"),required:""}},[n("Editor",{attrs:{value:t.announcement.content},on:{"update:value":function(e){return t.$set(t.announcement,"content",e)}}})],1),n("div",{staticClass:"visible-box"},[n("span",[t._v(t._s(t.$t("m.Announcement_visible")))]),n("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":"","inactive-text":""},model:{value:t.announcement.status,callback:function(e){t.$set(t.announcement,"status",e)},expression:"announcement.status"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditAnnouncementDialog=!1}}},[t._v(t._s(t.$t("m.Cancel")))]),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitAnnouncement.apply(null,arguments)}}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)},a=[],o=n("5530"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("2f62")),r=n("3228"),l=n("a956"),c=function(){return n.e("chunk-48bf8d0f").then(n.bind(null,"5072"))},u={name:"GroupAnnouncementList",components:{Pagination:c,Editor:l["default"],AnnouncementList:h},props:{contestID:{type:Number,default:null}},data:function(){return{showEditAnnouncementDialog:!1,adminTotal:0,currentPage:1,limit:10,mode:"create",adminAnnouncementList:[],announcement:{id:null,title:"",content:"",status:0,uid:""},announcementDialogTitle:"Edit Announcement",loading:!1,routeName:""}},mounted:function(){this.init()},methods:{init:function(){this.contestID?this.getGroupContestAnnouncementList():this.getGroupAdminAnnouncementList()},onPageSizeChange:function(t){this.limit=t,this.init()},currentChange:function(t){this.currentPage=t,this.init()},getGroupAdminAnnouncementList:function(){var t=this;this.loading=!0,r["a"].getGroupAdminAnnouncementList(this.currentPage,this.limit,this.$route.params.groupID).then((function(e){t.adminAnnouncementList=e.data.data.records,t.adminTotal=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},getGroupContestAnnouncementList:function(){var t=this;this.loading=!0,r["a"].getGroupContestAnnouncementList(this.currentPage,this.limit,this.contestID).then((function(e){t.adminAnnouncementList=e.data.data.records,t.adminTotal=e.data.data.total,t.loading=!1}),(function(e){t.loading=!1}))},onOpenEditDialog:function(){setTimeout((function(){if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else document.createEventObject&&window.fireEvent("onresize")}),0)},submitAnnouncement:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i="";if(n.id||(n=this.announcement),n.gid=this.$route.params.groupID,this.contestID){var a={announcement:n,cid:this.contestID};t=a,i="edit"===this.mode?"updateGroupContestAnnouncement":"addGroupContestAnnouncement"}else i="edit"===this.mode?"updateGroupAnnouncement":"addGroupAnnouncement",t=n;r["a"][i](t).then((function(t){e.showEditAnnouncementDialog=!1,e.$msg.success(e.$i18n.t("m.Post_successfully")),e.currentChange(1)})).catch()},deleteAnnouncement:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Announcement_Tips"),this.$i18n.t("m.Warning"),{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){e.loading=!0,e.contestID?r["a"].deleteGroupContestAnnouncement(t,e.contestID).then((function(t){e.loading=!0,e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.init()})):r["a"].deleteGroupAnnouncement(t).then((function(t){e.loading=!0,e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.init()}))})).catch((function(){e.loading=!1}))},openAnnouncementDialog:function(t){this.showEditAnnouncementDialog=!0,null!==t?(this.announcementDialogTitle=this.$i18n.t("m.Edit_Announcement"),this.announcement=Object.assign({},t),this.mode="edit"):(this.announcementDialogTitle=this.$i18n.t("m.Create_Announcement"),this.announcement.title="",this.announcement.status=0,this.announcement.content="",this.announcement.uid=this.userInfo.uid,this.announcement.username=this.userInfo.username,this.mode="add")},handleVisibleSwitch:function(t){this.mode="edit",this.submitAnnouncement({id:t.id,title:t.title,content:t.content,status:t.status,uid:t.uid})}},computed:Object(o["a"])({},Object(s["c"])(["userInfo","isGroupRoot"]))},m=u,d=(n("cd34"),n("2877")),p=Object(d["a"])(m,i,a,!1,null,"21d28bc6",null),h=e["a"]=p.exports},dc5f:function(t,e,n){t.exports=n.p+"assets/img/acm.9347555f.jpg"},fd9a:function(t,e,n){}}]);