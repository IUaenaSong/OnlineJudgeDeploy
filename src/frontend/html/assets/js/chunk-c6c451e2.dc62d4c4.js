(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6c451e2"],{5751:function(e,t,l){},a15b:function(e,t,l){"use strict";var i=l("23e7"),o=l("e330"),a=l("44ad"),s=l("fc6a"),n=l("a640"),r=o([].join),d=a!=Object,c=n("join",",");i({target:"Array",proto:!0,forced:d||!c},{join:function(e){return r(s(this),void 0===e?",":e)}})},b156:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-row",[l("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[l("el-card",[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Export_Problem")))]),l("div",{staticClass:"filter-row"},[l("span",[l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-down"},on:{click:e.exportProblems}},[e._v(e._s(e.$t("m.Export"))+" ")])],1),l("span",[l("vxe-input",{attrs:{placeholder:e.$t("m.Enter_keyword"),type:"search",size:"medium"},on:{"search-click":e.filterByKeyword},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterByKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)])]),l("vxe-table",{ref:"xTable",attrs:{data:e.problems,stripe:"","auto-resize":"",loading:e.loadingProblems,"checkbox-config":{labelField:"",highlight:!0,range:!0}},on:{"checkbox-change":e.handleSelectionChange,"checkbox-all":e.handlechangeAll}},[l("vxe-table-column",{attrs:{type:"checkbox",width:"60"}}),l("vxe-table-column",{attrs:{title:"ID","min-width":"100",field:"id"}}),l("vxe-table-column",{attrs:{"min-width":"150",title:e.$t("m.Title"),field:"title"}}),l("vxe-table-column",{attrs:{"min-width":"150",field:"author",title:e.$t("m.Author")}}),l("vxe-table-column",{attrs:{field:"gmtCreate",title:e.$t("m.Created_Time")},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[e._v(" "+e._s(e._f("localtime")(l.gmtCreate))+" ")]}}])})],1),l("div",{staticClass:"panel-options"},[e.total?l("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":e.limit,total:e.total},on:{"current-change":e.getProblems}}):e._e()],1)],1)],1),l("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[l("el-card",[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_Problem")))])]),l("el-upload",{ref:"OJ",attrs:{action:"/api/file/import-problem",name:"file","file-list":e.fileList1,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile1Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[l("el-button",{attrs:{slot:"trigger",size:"small",loading:e.loading.OJ,type:"primary",icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.OJ,disabled:!e.fileList1.length,icon:"el-icon-upload"},on:{click:function(t){return e.submitUpload("OJ")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1)],1),l("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[l("el-card",[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_QDOJ_Problem")))])]),l("el-upload",{ref:"QDOJ",attrs:{action:"/api/file/import-qdoj-problem",name:"file","file-list":e.fileList2,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile2Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.QDOJ,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.QDOJ,icon:"el-icon-upload",disabled:!e.fileList2.length},on:{click:function(t){return e.submitUpload("QDOJ")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1)],1),l("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[l("el-card",[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Import_FPS_Problem")))])]),l("el-upload",{ref:"FPS",attrs:{action:"/api/file/import-fps-problem",name:"file","file-list":e.fileList3,"show-file-list":!0,"with-credentials":!0,limit:3,"on-change":e.onFile3Change,"auto-upload":!1,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[l("el-button",{attrs:{slot:"trigger",size:"small",type:"primary",loading:e.loading.FPS,icon:"el-icon-folder-opened"},slot:"trigger"},[e._v(e._s(e.$t("m.Choose_File")))]),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success",loading:e.loading.FPS,icon:"el-icon-upload",disabled:!e.fileList3.length},on:{click:function(t){return e.submitUpload("FPS")}}},[e._v(e._s(e.$t("m.Upload")))])],1)],1)],1)],1)},o=[],a=l("b85c"),s=(l("a15b"),l("fb6a"),l("3228")),n=l("90b9"),r={name:"import_and_export",data:function(){return{fileList1:[],fileList2:[],fileList3:[],page:1,limit:10,total:0,loadingProblems:!1,loadingImporting:!1,keyword:"",problems:[],selected_problems:[],loading:{OJ:!1,qdoj:!1,fps:!1}}},mounted:function(){this.getProblems()},methods:{handleSelectionChange:function(e){var t=e.records;this.selected_problems=t},handlechangeAll:function(){this.selected_problems=this.$refs.xTable.getCheckboxRecords()},getProblems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l={keyword:this.keyword,currentPage:t,limit:this.limit,oj:"Mine"};this.loadingProblems=!0,s["a"].admin_getProblemList(l).then((function(t){e.problems=t.data.data.records,e.total=t.data.data.total,e.loadingProblems=!1}))},exportProblems:function(){var e=[];if(this.selected_problems.length<=0)this.$msg.error(this.$i18n.t("m.Export_Problem_NULL_Tips"));else{var t,l=Object(a["a"])(this.selected_problems);try{for(l.s();!(t=l.n()).done;){var i=t.value;e.push("pid="+i.id)}}catch(s){l.e(s)}finally{l.f()}var o="/api/file/export-problem?"+e.join("&");n["a"].downloadFile(o)}},submitUpload:function(e){this.loading[e]=!0,this.$refs[e].submit()},onFile1Change:function(e,t){this.fileList1=t.slice(-1)},onFile2Change:function(e,t){this.fileList2=t.slice(-1)},onFile3Change:function(e,t){this.fileList3=t.slice(-1)},uploadSucceeded:function(e){this.loading.OJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,200!=e.status?this.$msg.error(e.msg):(this.$msg.success(this.$i18n.t("m.Upload_Problem_Succeeded")),this.getProblems())},uploadFailed:function(){this.loading.OJ=!1,this.loading.QDOJ=!1,this.loading.FPS=!1,this.$msg.error(this.$i18n.t("m.Upload_Problem_Failed"))},filterByKeyword:function(){this.getProblems()}}},d=r,c=(l("e706"),l("2877")),p=Object(c["a"])(d,i,o,!1,null,"f6442f24",null);t["default"]=p.exports},e706:function(e,t,l){"use strict";l("5751")}}]);