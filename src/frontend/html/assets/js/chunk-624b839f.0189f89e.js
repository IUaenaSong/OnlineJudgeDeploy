(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-624b839f","chunk-13f2b59d"],{"00b9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:10}},[t.examID?a("el-col",{style:t.examID?"margin-top: 10px; margin-bottom: 10px;":"",attrs:{md:6,xs:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingType,expression:"loadingType"}],attrs:{"body-style":{padding:0},shadow:""}},[a("el-tabs",{staticStyle:{border:"0"},attrs:{type:"border-card"},on:{"tab-click":t.handleClickType},model:{value:t.activeType,callback:function(e){t.activeType=e},expression:"activeType"}},t._l(t.QUESTION_TYPE_REVERSE,(function(e,i){return a("el-tab-pane",{key:i,attrs:{name:i,disabled:0==t.questionList[i].length}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("m."+e.name+"_Question"))+" ")]),t._l(t.questionList[i],(function(e){return a("el-button",{key:e,staticClass:"id-list",attrs:{type:-1==t.submittedQuestion.indexOf(e)||t.questionId==e?"primary":"success",size:"small",plain:t.questionId!=e&&-1==t.submittedQuestion.indexOf(e)},on:{click:function(a){return t.goExamQuestion(e)}}},[t._v(" "+t._s(e)+" ")])}))],2)})),1)],1)],1):t._e(),a("el-col",{style:t.examID?"margin-top: 10px; margin-bottom: 10px;":"",attrs:{md:t.examID?18:24,xs:24}},[a("el-card",{attrs:{"body-style":{padding:0},shadow:""}},[a("el-tabs",{staticStyle:{border:"0"},attrs:{type:"border-card"},on:{"tab-click":t.handleClickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{name:"QuestionDetail"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fa fa-list-alt"},[t._v(" "+t._s(t.$t("m.Question_Description")))])]),a("div",{staticClass:"question-detail",attrs:{padding:10,shadow:""}},[a("div",{staticClass:"panel-title",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.question.questionId))]),a("br"),a("div",{staticClass:"question-intr"},[[a("span",[t._v(t._s(t.$t("m.Question_Type"))+"： "),t.QUESTION_TYPE_REVERSE[t.question.type]?a("el-tag",{staticClass:"filter-item",attrs:{size:"medium",type:t.QUESTION_TYPE_REVERSE[t.question.type].color,effect:"dark"}},[t._v(" "+t._s(t.$t("m."+t.QUESTION_TYPE_REVERSE[t.question.type].name+"_Question"))+" ")]):t._e(),1==t.question.type?a("el-tag",{staticClass:"filter-item",attrs:{size:"medium",type:"primary",effect:"plain"}},[t._v(" "+t._s(t.$t("m."+(t.question.single?"Single_Choice":"Indefinite_Multiple_Choice")+"_Question"))+" ")]):t._e()],1),a("br")],t.examID?[a("span",[t._v(t._s(t.$t("m.Score"))+"："+t._s(t.question.score)+" ")]),a("br")]:t._e(),t.question.author?[a("span",[t._v(t._s(t.$t("m.Created"))+"："),a("el-link",{staticClass:"author-name",attrs:{type:"info"},on:{click:function(e){return t.goUserHome(t.question.author)}}},[t._v(t._s(t.question.author))])],1),a("br")]:t._e()],2)]),a("div",{staticClass:"question-content"},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.examID&&!t.hasSaved&&t.examStatus==t.EXAM_STATUS.RUNNING,expression:"\n                  examID && !hasSaved && examStatus == EXAM_STATUS.RUNNING\n                "}],staticStyle:{"margin-top":"-20px","margin-bottom":"5px"},attrs:{type:"error",closable:!1}},[t._v(" "+t._s(t.$t("m.The_Present_Answer_Has_Not_Been_Saved"))+" ")]),[a("p",{staticClass:"title"},[t._v(t._s(t.$t("m.Question_Description")))]),a("p",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.question.description)}})],1==t.question.type?[a("p",{staticClass:"title"},[t._v(t._s(t.$t("m.Question_Choices")))]),t._l(t.question.choices,(function(e,i){return a("p",{key:i,staticClass:"content"},[a("el-row",{attrs:{gutter:10}},[t.question.single?a("el-col",{attrs:{sm:2,xs:24}},[a("el-radio-group",{model:{value:t.question.radio,callback:function(e){t.$set(t.question,"radio",e)},expression:"question.radio"}},[a("el-radio",{attrs:{label:i}},[t._v(" "+t._s(String.fromCharCode(i+65))+" ")])],1)],1):a("el-col",{attrs:{sm:2,xs:24}},[a("el-checkbox",{model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"choice.status"}},[t._v(" "+t._s(String.fromCharCode(i+65))+" ")])],1),a("el-col",{attrs:{sm:22,xs:24}},[a("span",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.$markDown.render(e.content.toString()))}})])],1)],1)}))]:t._e(),2==t.question.type?[a("p",{staticClass:"title"},[t._v(t._s(t.$t("m.Question_Choices")))]),a("p",{staticClass:"content"},[a("el-switch",{attrs:{"active-text":t.$t("m.True"),"inactive-text":t.$t("m.False")},model:{value:t.question.judge,callback:function(e){t.$set(t.question,"judge",e)},expression:"question.judge"}})],1)]:t._e(),t.examID&&t.examStatus!=t.EXAM_STATUS.ENDED||!t.question.answer?t._e():[a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:"answer"}},[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$t("m.Question_Answer"))+" ")]),a("p",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"content markdown-body",domProps:{innerHTML:t._s(t.question.answer)}})])],1)],!t.examID||3!=t.question.type&&4!=t.question.type||t.examStatus==t.EXAM_STATUS.ENDED?t._e():[a("p",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.$t("m.Question_Answer"))+" ")]),a("Editor",{attrs:{value:t.question.answer},on:{"update:value":function(e){return t.$set(t.question,"answer",e)}}})],t.examID&&t.examStatus!=t.EXAM_STATUS.ENDED?[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",size:"small",loading:t.btnLoading},on:{click:t.submitQuestion}},[t._v(" "+t._s(t.$t("m.Save"))+" ")]),a("el-alert",{directives:[{name:"show",rawName:"v-show",value:t.examID&&!t.hasSaved&&t.examStatus==t.EXAM_STATUS.RUNNING,expression:"\n                    examID && !hasSaved && examStatus == EXAM_STATUS.RUNNING\n                  "}],staticStyle:{"margin-top":"5px"},attrs:{type:"error",closable:!1}},[t._v(" "+t._s(t.$t("m.The_Present_Answer_Has_Not_Been_Saved"))+" ")])]:t._e(),t.examID?[a("el-divider"),a("el-button",{staticStyle:{float:"left"},attrs:{size:"small",type:"warning",disabled:0==t.questionAll.indexOf(t.questionId)},on:{click:function(e){t.goExamQuestion(t.questionAll[t.questionAll.indexOf(t.questionId)-1])}}},[t._v(t._s(t.$t("m.Last_Question")))]),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"warning",disabled:t.questionAll.indexOf(t.questionId)==t.questionAll.length-1},on:{click:function(e){t.goExamQuestion(t.questionAll[t.questionAll.indexOf(t.questionId)+1])}}},[t._v(t._s(t.$t("m.Next_Question")))])]:t._e()],2)])])],1)],1)],1)],1)},s=[],n=a("b85c"),o=a("5530"),r=(a("b0c0"),a("a4d3"),a("e01a"),a("d3b7"),a("25f0"),a("2f62")),u=a("90b9"),l=a("3228"),d=a("9a36"),c=a("a956"),m=a("8935"),h={name:"QuestionDetails",components:{Editor:c["default"]},data:function(){return{activeName:"QuestionDetail",loading:!1,loadingType:!1,questionId:null,examID:null,question:{},QUESTION_TYPE_REVERSE:{},activeType:"1",activeNames:"",questionAll:[],questionList:{1:[],2:[],3:[],4:[]},submittedQuestion:[],questionSave:{},btnLoading:!1,questionAnswer:""}},created:function(){this.QUESTION_TYPE_REVERSE=Object.assign({},d["n"]),this.EXAM_STATUS=Object.assign({},d["e"])},mounted:function(){this.questionId=this.$route.params.questionId,this.examID=this.$route.params.examID;var t=Object(d["v"])(this.examID);this.answerList=m["a"].get(t)||{},this.isAuthenticated&&this.getQuestionStatus(),this.init(),this.getQuestion(),this.getMyAnswer()},methods:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["changeDomTitle"])),{},{init:function(){var t=this;this.examID&&(this.loadingType=!0,l["a"].getExamQuestionList(0,this.examID).then((function(e){var a,i=Object(n["a"])(e.data.data);try{for(i.s();!(a=i.n()).done;){var s=a.value;t.questionList[s.type].push(s.displayId),t.questionAll.push(s.displayId)}}catch(o){i.e(o)}finally{i.f()}t.loadingType=!1})))},getQuestionStatus:function(){var t=this;this.examID&&l["a"].getExamQuestionStatus(this.examID).then((function(e){t.submittedQuestion=e.data.data}))},getQuestion:function(){var t=this,e="ExamQuestionDetails"===this.$route.name?"getExamQuestion":"getQuestion";this.loading=!0,l["a"][e](this.questionId,this.examID).then((function(e){var a=e.data.data;t.changeDomTitle({title:a.questionId});var i=!(t.isSuperAdmin||t.isGroupRoot||t.userInfo.username==a.author);a.choices=u["a"].stringToChoices(a.choices,i),a.description&&(a.description=t.$markDown.render(a.description.toString())),a.answer&&(a.answer=t.$markDown.render(a.answer.toString())),t.question=a,t.getMyAnswer(),t.loading=!1}),(function(e){t.loading=!1}))},getMyAnswer:function(){var t=this;this.examID&&!this.isExamAdmin&&l["a"].getMyAnswer(this.questionId,this.examID).then((function(e){if(t.questionAnswer=e.data.data,null!=t.answerList[t.questionId]&&(e.data.data=t.answerList[t.questionId]),1==t.question.type)if(t.question.single)t.question.radio=parseInt(e.data.data);else for(var a=0;a<e.data.data.length;a++)"1"==e.data.data[a]?t.question.choices[a].status=!0:t.question.choices[a].status=!1;else 2==t.question.type?"true"==e.data.data?t.question.judge=!0:t.question.judge=!1:t.question.answer=e.data.data}))},goExamQuestion:function(t){this.$router.push({name:"ExamQuestionDetails",params:{questionId:t}})},handleClickType:function(t){t.name},handleClickTab:function(t){t.name},goUserHome:function(t){this.$router.push({path:"/user-home",query:{username:t}})},submitQuestion:function(){var t=this;this.questionSave["eid"]=this.examID,this.questionSave["displayId"]=this.question.questionId,this.questionSave["answer"]=u["a"].questionToString(this.question),this.btnLoading=!0,l["a"].submitQuestion(this.questionSave).then((function(e){t.$msg.success(t.$t("m.Save_Successfully")),t.questionAnswer=t.questionSave["answer"],t.answerList[t.questionId]=t.questionSave["answer"];var a=Object(d["v"])(t.examID);m["a"].set(a,t.answerList),-1==t.submittedQuestion.indexOf(t.question.questionId)&&t.submittedQuestion.push(t.question.questionId),t.btnLoading=!1})).catch((function(){t.btnLoading=!1}))}}),computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])(["isAuthenticated","isSuperAdmin","userInfo","isGroupRoot","examStatus","isExamAdmin","examStatus"])),{},{answerList:{get:function(){return this.$store.state.exam.answerList},set:function(t){this.$store.commit("changeAnswerList",{value:t})}},hasSaved:function(){var t=u["a"].questionToString(this.question);return t==this.questionAnswer}}),beforeRouteLeave:function(t,e,a){this.answerList[this.questionId]=u["a"].questionToString(this.question);var i=Object(d["v"])(this.examID);m["a"].set(i,this.answerList),a()},watch:{$route:function(t){this.answerList[this.questionId]=u["a"].questionToString(this.question);var e=Object(d["v"])(this.examID);m["a"].set(e,this.answerList),this.questionId=t.params.questionId,this.getQuestion(),this.getMyAnswer()},isAuthenticated:function(t){!0===t&&this.getQuestionStatus()}}},p=h,f=(a("a229"),a("2877")),g=Object(f["a"])(p,i,s,!1,null,"1cbe8ba4",null);e["default"]=g.exports},"463b":function(t,e,a){},"7e81":function(t,e,a){},"857a":function(t,e,a){var i=a("e330"),s=a("1d80"),n=a("577e"),o=/"/g,r=i("".replace);t.exports=function(t,e,a,i){var u=n(s(t)),l="<"+e;return""!==a&&(l+=" "+a+'="'+r(n(i),o,"&quot;")+'"'),l+">"+u+"</"+e+">"}},"92bc":function(t,e,a){"use strict";a("7e81")},9911:function(t,e,a){"use strict";var i=a("23e7"),s=a("857a"),n=a("af03");i({target:"String",proto:!0,forced:n("link")},{link:function(t){return s(this,"a","href",t)}})},a229:function(t,e,a){"use strict";a("463b")},a956:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mavon-editor",{ref:"md",style:0!=t.height?"min-height:"+t.height+"px":"",attrs:{ishljs:!0,html:t.openHtml,autofocus:!1,toolbars:t.toolbars,codeStyle:"arduino-light",toolbarsFlag:t.toolbarsFlag},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[a("button",{staticClass:"op-icon fa markdown-upload",attrs:{type:"button",title:t.$t("m.Upload_file"),"aria-hidden":"true"},on:{click:t.uploadFile}},[a("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),a("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)},s=[],n=a("5530"),o=(a("a9e3"),a("9911"),a("99af"),a("b0c0"),a("2f62")),r=a("b355"),u={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0},toolbarsFlag:{type:Boolean,default:!0},height:{type:Number,default:0}},data:function(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created:function(){(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID)&&(this.toolbars.imagelink=!0)},methods:{$imgAdd:function(t,e){var a=this;if(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID){var i=new FormData;i.append("image",e),this.$route.params.groupID&&i.append("gid",this.$route.params.groupID),this.$route.params.examID&&i.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-img",method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.$refs.md.$img2Url(t,e.data.data.link),a.img_file[e.data.data.link]=e.data.data.fileId}))}},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile:function(){this.$refs.uploadInput.click()},uploadFileChange:function(t){var e=this,a=t.target.files[0],i=new FormData;i.append("file",a),this.$route.params.groupID&&i.append("gid",this.$route.params.groupID),this.$route.params.examID&&i.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-file",method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var i=e.$refs.md;i.insertText(i.getTextareaDom(),{prefix:"[".concat(a.name,"](").concat(t.data.data.link,")"),subfix:"",str:""})}))}},computed:Object(n["a"])({},Object(o["c"])(["isAdminRole","isGroupAdmin"])),watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,e){t!==e&&(this.$emit("update:value",t),this.$nextTick((function(t){Object(r["a"])()})))},isAdminRole:function(t){this.toolbars.imagelink=!!t}}},l=u,d=(a("92bc"),a("2877")),c=Object(d["a"])(l,i,s,!1,null,null,null);e["default"]=c.exports},af03:function(t,e,a){var i=a("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}}}]);