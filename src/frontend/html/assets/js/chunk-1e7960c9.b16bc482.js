(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e7960c9","chunk-13f2b59d"],{"7e81":function(t,i,s){},"857a":function(t,i,s){var e=s("e330"),a=s("1d80"),o=s("577e"),n=/"/g,l=e("".replace);t.exports=function(t,i,s,e){var r=o(a(t)),c="<"+i;return""!==s&&(c+=" "+s+'="'+l(o(e),n,"&quot;")+'"'),c+">"+r+"</"+i+">"}},"92bc":function(t,i,s){"use strict";s("7e81")},"94d5":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("el-row",[s("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[s("div",{staticClass:"title-article",staticStyle:{"text-align":"left"}},[s("h1",{staticClass:"title",attrs:{id:"sharetitle"}},[s("span",[t._v(t._s(t.discussion.title))]),t.discussion.pid?s("el-button",{staticStyle:{"margin-left":"5px","vertical-align":"middle"},attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.toProblem(t.discussion.pid)}}},[t._v(t._s(t.$t("m.Go_to_problem")))]):t._e()],1),s("div",{staticClass:"title-msg"},[s("span",[s("a",{staticClass:"c999",attrs:{title:t.discussion.author},on:{click:function(i){return t.getInfoByUsername(t.discussion.uid,t.discussion.author)}}},[s("avatar",{staticClass:"user-avatar",attrs:{username:t.discussion.author,inline:!0,size:26,color:"#FFF",src:t.discussion.avatar}}),s("span",{staticClass:"user-name"},[t._v(t._s(t.discussion.author))])],1),t.discussion.titleName?s("span",[s("el-tag",{attrs:{effect:"dark",size:"small",color:t.discussion.titleColor}},[t._v(" "+t._s(t.discussion.titleName)+" ")])],1):t._e()]),"root"==t.discussion.role?s("span",{staticClass:"role-root role",attrs:{title:"Super Administrator"}},[t._v("SPA")]):t._e(),"admin"==t.discussion.role?s("span",{staticClass:"role-admin role",attrs:{title:"Administrator"}},[t._v("ADM")]):t._e(),s("span",{staticClass:"c999",staticStyle:{padding:"0 6px"}},[s("i",{staticClass:"el-icon-folder-opened"},[t._v(" "+t._s(t.$t("m.Category"))+"：")]),s("a",{staticClass:"c999",on:{click:function(i){return t.toAllDiscussionByCid(t.discussion.categoryId)}}},[t._v(t._s(t.discussion.categoryName))])]),s("span",{staticClass:"c999"},[s("i",{staticClass:"fa fa-thumbs-o-up"}),s("span",[t._v(" "+t._s(t.$t("m.Likes"))+"："+t._s(t.discussion.likeNum))])]),s("span",{staticClass:"c999"},[s("i",{staticClass:"fa fa-eye"}),s("span",[t._v(" "+t._s(t.$t("m.Views"))+"："+t._s(t.discussion.viewNum))])]),s("a",{staticClass:"report",attrs:{title:t.$t("m.Report")},on:{click:function(i){t.showReportDialog=!0}}},[s("i",{staticClass:"fa fa-envira"}),s("span",[t._v(t._s(t.$t("m.Report")))])]),t.discussion.hasLike?s("a",{staticClass:"like",attrs:{title:t.$t("m.Liked")},on:{click:function(i){return t.toLikeDiscussion(t.discussion.id,!1)}}},[s("i",{staticClass:"fa fa-thumbs-up"}),s("span",[t._v(t._s(t.$t("m.Liked")))])]):s("a",{staticClass:"like",attrs:{title:t.$t("m.Like")},on:{click:function(i){return t.toLikeDiscussion(t.discussion.id,!0)}}},[s("i",{staticClass:"fa fa-thumbs-o-up"}),s("span",[t._v(t._s(t.$t("m.Like")))])]),s("span",[s("i",{staticClass:"fa fa-clock-o"},[t._v(" "+t._s(t.$t("m.Release_Time"))+"：")]),s("span",[s("el-tooltip",{attrs:{content:t._f("localtime")(t.discussion.gmtCreate),placement:"top"}},[s("span",[t._v(t._s(t._f("fromNow")(t.discussion.gmtCreate)))])])],1)]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.uid==t.discussion.uid||t.isAdminRole,expression:"userInfo.uid == discussion.uid || isAdminRole"}],staticStyle:{padding:"0 6px"}},[s("a",{staticStyle:{color:"#8fb0c9"},on:{click:function(i){t.showEditDiscussionDialog=!0}}},[s("i",{staticClass:"el-icon-edit-outline"},[t._v(" "+t._s(t.$t("m.Edit")))])])]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.userInfo.uid==t.discussion.uid||t.isAdminRole,expression:"userInfo.uid == discussion.uid || isAdminRole"}],staticStyle:{padding:"0 6px"}},[s("a",{staticStyle:{color:"#8fb0c9"},on:{click:function(i){return t.deleteDiscussion([t.discussion.id])}}},[s("i",{staticClass:"el-icon-delete-solid"},[t._v(" "+t._s(t.$t("m.Delete")))])])])])]),s("div",{staticClass:"body-article"},[s("div",{directives:[{name:"katex",rawName:"v-katex"},{name:"highlight",rawName:"v-highlight"}],staticClass:"markdown-body",domProps:{innerHTML:t._s(t.contentHtml)}})])]),s("el-dialog",{attrs:{title:t.$t("m.Report"),visible:t.showReportDialog,width:"350px"},on:{"update:visible":function(i){t.showReportDialog=i}}},[s("el-form",{attrs:{"label-position":"top",model:t.report}},[s("el-form-item",{attrs:{label:t.$t("m.Tags"),required:""}},[s("el-checkbox-group",{model:{value:t.report.tagList,callback:function(i){t.$set(t.report,"tagList",i)},expression:"report.tagList"}},[s("el-checkbox",{attrs:{label:"垃圾广告"}}),s("el-checkbox",{attrs:{label:"违法违规"}}),s("el-checkbox",{attrs:{label:"色情低俗"}}),s("el-checkbox",{attrs:{label:"赌博诈骗"}}),s("el-checkbox",{attrs:{label:"恶意骂战"}}),s("el-checkbox",{attrs:{label:"恶意抄袭"}})],1)],1),s("el-form-item",{attrs:{label:t.$t("m.Report_Reason"),required:""}},[s("el-input",{attrs:{type:"textarea",placeholder:t.$t("m.Report_Reason"),maxlength:"200","show-word-limit":"",rows:4},model:{value:t.report.content,callback:function(i){t.$set(t.report,"content",i)},expression:"report.content"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(i){t.showReportDialog=!1}}},[t._v(t._s(t.$t("m.Cancel")))]),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.submitReport.apply(null,arguments)}}},[t._v(t._s(t.$t("m.OK")))])],1)],1),s("el-dialog",{attrs:{title:t.discussionDialogTitle,visible:t.showEditDiscussionDialog,fullscreen:!0},on:{"update:visible":function(i){t.showEditDiscussionDialog=i},open:t.onOpenEditDialog}},[s("el-form",{attrs:{"label-position":"top",model:t.discussion}},[s("el-form-item",{attrs:{label:t.$t("m.Discussion_title"),required:""}},[s("el-input",{staticClass:"title-input",attrs:{placeholder:t.$t("m.Discussion_title")},model:{value:t.discussion.title,callback:function(i){t.$set(t.discussion,"title",i)},expression:"discussion.title"}})],1),s("el-form-item",{attrs:{label:t.$t("m.Discussion_Desc"),required:""}},[s("el-input",{staticClass:"title-input",attrs:{placeholder:t.$t("m.Discussion_Desc")},model:{value:t.discussion.description,callback:function(i){t.$set(t.discussion,"description",i)},expression:"discussion.description"}})],1),s("el-form-item",{attrs:{label:t.$t("m.Discussion_Category"),required:""}},[s("el-select",{attrs:{placeholder:"---",disabled:""},model:{value:t.discussion.categoryId,callback:function(i){t.$set(t.discussion,"categoryId",i)},expression:"discussion.categoryId"}},[s("el-option",{attrs:{label:t.discussion.categoryName,value:t.discussion.categoryId}})],1)],1),t.isAdminRole?s("el-form-item",{attrs:{label:t.$t("m.Discussion_top"),required:""}},[s("el-switch",{model:{value:t.discussion.topPriority,callback:function(i){t.$set(t.discussion,"topPriority",i)},expression:"discussion.topPriority"}})],1):t._e(),s("el-form-item",{attrs:{label:t.$t("m.Discussion_content"),required:""}},[s("Editor",{attrs:{value:t.discussion.content},on:{"update:value":function(i){return t.$set(t.discussion,"content",i)}}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"danger"},nativeOn:{click:function(i){t.showEditDiscussionDialog=!1}}},[t._v(t._s(t.$t("m.Cancel")))]),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.submitDiscussion.apply(null,arguments)}}},[t._v(t._s(t.$t("m.OK")))])],1)],1),s("Comment",{attrs:{did:t.$route.params.discussionID}})],1)],1)},a=[],o=s("5530"),n=(s("b0c0"),s("3228")),l=s("b355"),r=s("4a89"),c=s.n(r),u=s("2f62"),d=s("a956"),m=s("3b77"),p={name:"DiscussionDetails",components:{Comment:m["a"],Avatar:c.a,Editor:d["default"]},data:function(){return{discussion:{author:"OJ",avatar:""},query:{currentPage:1,did:null},discussionID:0,showEditDiscussionDialog:!1,discussionDialogTitle:"Edit Discussion",showReportDialog:!1,report:{tagList:[],content:""},loading:!1}},mounted:function(){this.init()},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])(["changeDomTitle"])),{},{init:function(){var t=this;this.routeName=this.$route.name,this.discussionID=this.$route.params.discussionID||"",this.loading=!0,n["a"].getDiscussion(this.discussionID).then((function(i){t.discussion=i.data.data,t.changeDomTitle({title:t.discussion.title}),t.$nextTick((function(t){Object(l["a"])()})),t.loading=!1}),(function(i){t.loading=!1}))},getInfoByUsername:function(t,i){this.$router.push({path:"/user-home",query:{uid:t,username:i}})},toAllDiscussionByCid:function(t){this.$router.push({path:"/discussion",query:{cid:t}})},toProblem:function(t){this.$router.push({name:"ProblemDetails",params:{problemID:t}})},toLikeDiscussion:function(t,i){var s=this;this.isAuthenticated?n["a"].toLikeDiscussion(t,i).then((function(t){i?(s.discussion.likeNum++,s.discussion.hasLike=!0,s.$msg.success(s.$i18n.t("m.Like_Successfully"))):(s.discussion.likeNum--,s.discussion.hasLike=!1,s.$msg.success(s.$i18n.t("m.Cancel_Like_Successfully")))})):this.$msg.warning(this.$i18n.t("m.Please_login_first"))},submitDiscussion:function(){var t=this,i=Object.assign({},this.discussion);delete i.viewNum,delete i.likeNum,n["a"].updateDiscussion(i).then((function(i){t.$msg.success(t.$i18n.t("m.Update_Successfully")),t.showEditDiscussionDialog=!1,t.init()}))},submitReport:function(){var t=this;if(this.isAuthenticated)if(0!=this.report.tagList.length||this.report.content){for(var i="",s=0;s<this.report.tagList.length;s++)i+="#"+this.report.tagList[s]+"# ";i+=this.report.content;var e={reporter:this.userInfo.username,content:i,did:this.discussionID};n["a"].toReportDiscussion(e).then((function(i){t.$msg.success(t.$i18n.t("m.Post_successfully")),t.showReportDialog=!1}))}else this.$msg.warning(this.$i18n.t("m.The_report_label_and_reason_cannot_be_empty"));else this.$msg.warning(this.$i18n.t("m.Please_login_first"))},deleteDiscussion:function(t){var i=this;this.$confirm(this.$i18n.t("m.Delete_Discussion_Tips"),"Tips",{type:"warning"}).then((function(){n["a"].admin_deleteDiscussion(t).then((function(t){i.$msg.success(i.$i18n.t("m.Delete_successfully")),i.init()})).catch((function(){}))}),(function(){}))}}),computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])(["isAuthenticated","isAdminRole","userInfo"])),{},{contentHtml:function(){return this.discussion.content?this.$markDown.render(this.discussion.content):null}}),watch:{isAuthenticated:function(t,i){t!=i&&this.init()}}},h=p,f=(s("e3c3"),s("2877")),g=Object(f["a"])(h,e,a,!1,null,"24a3161c",null);i["default"]=g.exports},9911:function(t,i,s){"use strict";var e=s("23e7"),a=s("857a"),o=s("af03");e({target:"String",proto:!0,forced:o("link")},{link:function(t){return a(this,"a","href",t)}})},a072:function(t,i,s){},a956:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("mavon-editor",{ref:"md",style:0!=t.height?"min-height:"+t.height+"px":"",attrs:{ishljs:!0,html:t.openHtml,autofocus:!1,toolbars:t.toolbars,codeStyle:"arduino-light",toolbarsFlag:t.toolbarsFlag},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[s("button",{staticClass:"op-icon fa markdown-upload",attrs:{type:"button",title:t.$t("m.Upload_file"),"aria-hidden":"true"},on:{click:t.uploadFile}},[s("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(i){t.currentValue=i},expression:"currentValue"}}),s("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)},a=[],o=s("5530"),n=(s("a9e3"),s("9911"),s("99af"),s("b0c0"),s("2f62")),l=s("b355"),r={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0},toolbarsFlag:{type:Boolean,default:!0},height:{type:Number,default:0}},data:function(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created:function(){(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID)&&(this.toolbars.imagelink=!0)},methods:{$imgAdd:function(t,i){var s=this;if(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID){var e=new FormData;e.append("image",i),this.$route.params.groupID&&e.append("gid",this.$route.params.groupID),this.$route.params.examID&&e.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-img",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(i){s.$refs.md.$img2Url(t,i.data.data.link),s.img_file[i.data.data.link]=i.data.data.fileId}))}},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile:function(){this.$refs.uploadInput.click()},uploadFileChange:function(t){var i=this,s=t.target.files[0],e=new FormData;e.append("file",s),this.$route.params.groupID&&e.append("gid",this.$route.params.groupID),this.$route.params.examID&&e.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-file",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var e=i.$refs.md;e.insertText(e.getTextareaDom(),{prefix:"[".concat(s.name,"](").concat(t.data.data.link,")"),subfix:"",str:""})}))}},computed:Object(o["a"])({},Object(n["c"])(["isAdminRole","isGroupAdmin"])),watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,i){t!==i&&(this.$emit("update:value",t),this.$nextTick((function(t){Object(l["a"])()})))},isAdminRole:function(t){this.toolbars.imagelink=!!t}}},c=r,u=(s("92bc"),s("2877")),d=Object(u["a"])(c,e,a,!1,null,null,null);i["default"]=d.exports},af03:function(t,i,s){var e=s("d039");t.exports=function(t){return e((function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}))}},e3c3:function(t,i,s){"use strict";s("a072")}}]);