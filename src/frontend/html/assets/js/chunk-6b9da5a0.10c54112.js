(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b9da5a0"],{"18a7":function(e,t,l){"use strict";l("1bd3")},"1bd3":function(e,t,l){},7850:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-row",[l("el-col",{attrs:{span:24}},[l("el-card",{attrs:{shadow:"never"}},[l("div",{attrs:{slot:"header"},slot:"header"},[l("span",{staticClass:"panel-title home-title"},[e._v(e._s(e.title))])]),l("el-form",{ref:"form",attrs:{model:e.problem,rules:e.rules,"label-position":"top"}},[l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{prop:"problemId",label:e.$t("m.Problem_Display_ID"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Problem_Display_ID"),disabled:e.problem.isRemote},model:{value:e.problem.problemId,callback:function(t){e.$set(e.problem,"problemId",t)},expression:"problem.problemId"}},[l("template",{slot:"prepend"},[e._v(" "+e._s(e.group.shortName.toUpperCase())+" ")])],2)],1)],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{prop:"title",label:e.$t("m.Title"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Title")},model:{value:e.problem.title,callback:function(t){e.$set(e.problem,"title",t)},expression:"problem.title"}})],1)],1)],1),e.contestID?l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Contest_Display_Title"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Contest_Display_Title")},model:{value:e.contestProblem.displayTitle,callback:function(t){e.$set(e.contestProblem,"displayTitle",t)},expression:"contestProblem.displayTitle"}})],1)],1),l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Contest_Display_ID"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Contest_Display_ID")},model:{value:e.contestProblem.displayId,callback:function(t){e.$set(e.contestProblem,"displayId",t)},expression:"contestProblem.displayId"}})],1)],1)],1):e._e(),e.examID?l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Exam_Display_Title"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Exam_Display_Title")},model:{value:e.examProblem.displayTitle,callback:function(t){e.$set(e.examProblem,"displayTitle",t)},expression:"examProblem.displayTitle"}})],1)],1),l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Exam_Display_ID"),required:""}},[l("el-input",{attrs:{placeholder:e.$t("m.Exam_Display_ID")},model:{value:e.examProblem.displayId,callback:function(t){e.$set(e.examProblem,"displayId",t)},expression:"examProblem.displayId"}})],1)],1)],1):e._e(),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{prop:"description",label:e.$t("m.Description"),required:""}},[l("Editor",{attrs:{value:e.problem.description},on:{"update:value":function(t){return e.$set(e.problem,"description",t)}}})],1)],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:6,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Time_Limit")+"(ms)",required:""}},[l("el-input",{attrs:{type:"Number",placeholder:e.$t("m.Time_Limit"),disabled:e.problem.isRemote},model:{value:e.problem.timeLimit,callback:function(t){e.$set(e.problem,"timeLimit",t)},expression:"problem.timeLimit"}})],1)],1),l("el-col",{attrs:{md:6,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Memory_Limit")+"(mb)",required:""}},[l("el-input",{attrs:{type:"Number",placeholder:e.$t("m.Memory_Limit"),disabled:e.problem.isRemote},model:{value:e.problem.memoryLimit,callback:function(t){e.$set(e.problem,"memoryLimit",t)},expression:"problem.memoryLimit"}})],1)],1),l("el-col",{attrs:{md:6,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Stack_Limit")+"(mb)",required:""}},[l("el-input",{attrs:{type:"Number",placeholder:e.$t("m.Stack_Limit"),disabled:e.problem.isRemote},model:{value:e.problem.stackLimit,callback:function(t){e.$set(e.problem,"stackLimit",t)},expression:"problem.stackLimit"}})],1)],1),l("el-col",{attrs:{md:6,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Level"),required:""}},[l("el-select",{staticClass:"difficulty-select",attrs:{placeholder:"Enter the level of problem"},model:{value:e.problem.difficulty,callback:function(t){e.$set(e.problem,"difficulty",t)},expression:"problem.difficulty"}},e._l(e.PROBLEM_LEVEL,(function(t,a,r){return l("el-option",{key:r,attrs:{label:e.getLevelName(a),value:parseInt(a)}})})),1)],1)],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{prop:"input_description",label:e.$t("m.Input"),required:""}},[l("Editor",{attrs:{value:e.problem.input},on:{"update:value":function(t){return e.$set(e.problem,"input",t)}}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{prop:"output_description",label:e.$t("m.Output"),required:""}},[l("Editor",{attrs:{value:e.problem.output},on:{"update:value":function(t){return e.$set(e.problem,"output",t)}}})],1)],1),l("el-col",{attrs:{span:24}},[l("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:e.$t("m.Hint")}},[l("Editor",{attrs:{value:e.problem.hint},on:{"update:value":function(t){return e.$set(e.problem,"hint",t)}}})],1)],1)],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:4,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Auth")}},[l("el-select",{attrs:{size:"small"},model:{value:e.problem.auth,callback:function(t){e.$set(e.problem,"auth",t)},expression:"problem.auth"}},[l("el-option",{attrs:{label:e.$t("m.Public_Problem"),value:1}}),l("el-option",{attrs:{label:e.$t("m.Private_Problem"),value:2}}),l("el-option",{attrs:{label:e.$t("m.Contest_Exam_Problem"),value:3}})],1)],1)],1),l("el-col",{attrs:{md:4,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Type")}},[l("el-radio-group",{attrs:{disabled:e.disableRuleType||e.problem.isRemote},on:{change:e.problemTypeChange},model:{value:e.problem.type,callback:function(t){e.$set(e.problem,"type",t)},expression:"problem.type"}},[l("el-radio",{attrs:{label:0}},[e._v("ACM")]),l("el-radio",{attrs:{label:1}},[e._v("OI")])],1)],1)],1),l("el-col",{attrs:{md:4,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Code_Shareable")}},[l("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:e.problem.codeShare,callback:function(t){e.$set(e.problem,"codeShare",t)},expression:"problem.codeShare"}})],1)],1),l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Tags")}},[e._l(e.problemTags,(function(t){return l("el-tag",{key:t.name,staticStyle:{"margin-right":"7px","margin-top":"4px"},attrs:{closable:"","close-transition":!1,size:"small"},on:{close:function(l){return e.closeTag(t.name)}}},[e._v(e._s(t.name))])})),e.inputVisible?l("el-autocomplete",{staticClass:"input-new-tag",attrs:{size:"mini","trigger-on-focus":!0,"fetch-suggestions":e.querySearch},on:{click:e.selectTag,select:e.addTag},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addTag.apply(null,arguments)}},model:{value:e.tagInput,callback:function(t){e.tagInput=t},expression:"tagInput"}}):l("el-tooltip",{attrs:{effect:"dark",content:e.$t("m.Add"),placement:"top"}},[l("el-button",{staticClass:"button-new-tag",attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){e.inputVisible=!0}}})],1)],2)],1)],1),l("el-row",[l("el-col",{attrs:{md:24,xs:24}},[l("el-form-item",{attrs:{label:e.$t("m.Languages"),error:e.error.languages,required:""}},[l("el-checkbox-group",{model:{value:e.problemLanguages,callback:function(t){e.problemLanguages=t},expression:"problemLanguages"}},e._l(e.allLanguage,(function(e){return l("el-tooltip",{key:e.name,staticClass:"spj-radio",attrs:{effect:"dark",content:e.description,placement:"top-start"}},[l("el-checkbox",{attrs:{label:e.name}})],1)})),1)],1)],1)],1),l("div",[l("div",{staticClass:"panel-title home-title"},[e._v(" "+e._s(e.$t("m.Problem_Examples"))+" "),l("el-popover",{attrs:{placement:"right",trigger:"hover"}},[l("p",[e._v(" "+e._s(e.$t("m.Problem_Examples_Desc"))+" ")]),l("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),e._l(e.problem.examples,(function(t,a){return l("el-form-item",{key:"example"+a},[l("Accordion",{attrs:{title:e.$t("m.Problem_Example")+(a+1),isOpen:!!t.isOpen,index:a},on:{changeVisible:e.changeExampleVisible}},[l("el-button",{attrs:{slot:"header",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteExample(a)}},slot:"header"},[e._v(" "+e._s(e.$t("m.Delete"))+" ")]),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{xs:24,md:12}},[l("el-form-item",{attrs:{label:e.$t("m.Example_Input"),required:""}},[l("el-input",{staticStyle:{"white-space":"pre-line"},attrs:{rows:5,type:"textarea",placeholder:e.$t("m.Example_Input")},model:{value:t.input,callback:function(l){e.$set(t,"input",l)},expression:"example.input"}})],1)],1),l("el-col",{attrs:{xs:24,md:12}},[l("el-form-item",{attrs:{label:e.$t("m.Example_Output"),required:""}},[l("el-input",{attrs:{rows:5,type:"textarea",placeholder:e.$t("m.Example_Output")},model:{value:t.output,callback:function(l){e.$set(t,"output",l)},expression:"example.output"}})],1)],1)],1)],1)],1)}))],2),l("div",{staticClass:"add-example-btn"},[l("el-button",{staticClass:"add-examples",attrs:{icon:"el-icon-plus",type:"small"},on:{click:function(t){return e.addExample()}}},[e._v(e._s(e.$t("m.Add_Example"))+" ")])],1),e.problem.isRemote?e._e():[l("div",{staticClass:"panel-title home-title"},[e._v(" "+e._s(e.$t("m.Judge_Extra_File"))+" "),l("el-popover",{attrs:{placement:"right",trigger:"hover"}},[l("p",[e._v(e._s(e.$t("m.Judge_Extra_File_Tips1")))]),l("p",[e._v(e._s(e.$t("m.Judge_Extra_File_Tips2")))]),l("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",[l("el-checkbox",{model:{value:e.addUserExtraFile,callback:function(t){e.addUserExtraFile=t},expression:"addUserExtraFile"}},[e._v(e._s(e.$t("m.User_Program")))])],1),e.addUserExtraFile?l("el-form-item",[l("AddExtraFile",{attrs:{files:e.userExtraFile,type:"user"},on:{"update:files":function(t){e.userExtraFile=t},upsertFile:e.upsertFile,deleteFile:e.deleteFile}})],1):e._e()],1),l("el-col",{attrs:{md:12,xs:24}},[l("el-form-item",[l("el-checkbox",{model:{value:e.addJudgeExtraFile,callback:function(t){e.addJudgeExtraFile=t},expression:"addJudgeExtraFile"}},[e._v(e._s(e.$t("m.SPJ_Or_Interactive_Program")))])],1),e.addJudgeExtraFile?l("el-form-item",[l("AddExtraFile",{attrs:{files:e.judgeExtraFile,type:"judge"},on:{"update:files":function(t){e.judgeExtraFile=t},upsertFile:e.upsertFile,deleteFile:e.deleteFile}})],1):e._e()],1)],1)],e.problem.isRemote?e._e():[l("div",{staticClass:"panel-title home-title"},[e._v(" "+e._s(e.$t("m.Judge_Mode"))+" "),l("el-popover",{attrs:{placement:"right",trigger:"hover"}},[l("p",[e._v("1. "+e._s(e.$t("m.General_Judge_Mode_Tips")))]),l("p",[e._v("2. "+e._s(e.$t("m.Special_Judge_Mode_Tips")))]),l("p",[e._v("3. "+e._s(e.$t("m.Interactive_Judge_Mode_Tips")))]),l("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),l("el-form-item",{attrs:{label:"",error:e.error.spj}},[l("el-col",{attrs:{span:24}},[l("el-radio-group",{on:{change:e.switchMode},model:{value:e.problem.judgeMode,callback:function(t){e.$set(e.problem,"judgeMode",t)},expression:"problem.judgeMode"}},[l("el-radio",{attrs:{label:"default"}},[e._v(e._s(e.$t("m.General_Judge")))]),l("el-radio",{attrs:{label:"spj"}},[e._v(e._s(e.$t("m.Special_Judge")))]),l("el-radio",{attrs:{label:"interactive"}},[e._v(e._s(e.$t("m.Interactive_Judge")))])],1)],1)],1),"default"!=e.problem.judgeMode?l("el-form-item",[l("Accordion",{attrs:{title:"spj"==e.problem.judgeMode?e.$t("m.Special_Judge_Code"):e.$t("m.Interactive_Judge_Code")}},[l("template",{slot:"header"},[l("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s("spj"==e.problem.judgeMode?e.$t("m.SPJ_Language"):e.$t("m.Interactive_Language"))+"ï¼š")]),l("el-radio-group",{model:{value:e.problem.spjLanguage,callback:function(t){e.$set(e.problem,"spjLanguage",t)},expression:"problem.spjLanguage"}},e._l(e.allSpjLanguage,(function(t){return l("el-tooltip",{key:t.name,staticClass:"spj-radio",attrs:{effect:"dark",content:t.description,placement:"top-start"}},[l("el-radio",{attrs:{label:t.name}},[e._v(e._s(t.name))])],1)})),1),l("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"el-icon-folder-checked",loading:e.loadingCompile},on:{click:e.compileSPJ}},[e._v(e._s(e.$t("m.Compile"))+" ")])],1),l("code-mirror",{attrs:{mode:e.spjMode},model:{value:e.problem.spjCode,callback:function(t){e.$set(e.problem,"spjCode",t)},expression:"problem.spjCode"}})],2)],1):e._e()],l("div",{staticClass:"panel-title home-title"},[e._v(e._s(e.$t("m.Code_Template")))]),l("el-form-item",[l("el-row",e._l(e.codeTemplate,(function(t,a){return l("el-col",{key:"template"+a,attrs:{span:24}},[l("el-form-item",[l("el-checkbox",{model:{value:t.status,callback:function(l){e.$set(t,"status",l)},expression:"v.status"}},[e._v(e._s(a))]),t.status?l("div",[l("code-mirror",{attrs:{mode:t.mode},model:{value:t.code,callback:function(l){e.$set(t,"code",l)},expression:"v.code"}})],1):e._e()],1)],1)})),1)],1),e.problem.isRemote?e._e():l("el-row",{attrs:{gutter:20}},[l("div",{staticClass:"panel-title home-title"},[e._v(" "+e._s(e.$t("m.Judge_Samples"))+" "),l("el-popover",{attrs:{placement:"right",trigger:"hover"}},[l("p",[e._v(e._s(e.$t("m.Sample_Tips")))]),l("i",{staticClass:"el-icon-question",attrs:{slot:"reference"},slot:"reference"})])],1),l("el-switch",{staticStyle:{margin:"10px 0"},attrs:{"active-text":e.$t("m.Use_Upload_File"),"inactive-text":e.$t("m.Use_Manual_Input")},model:{value:e.problem.isUploadCase,callback:function(t){e.$set(e.problem,"isUploadCase",t)},expression:"problem.isUploadCase"}}),l("div",{directives:[{name:"show",rawName:"v-show",value:e.problem.isUploadCase,expression:"problem.isUploadCase"}]},[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{error:e.error.testcase}},[l("el-upload",{attrs:{action:e.uploadFileUrl,name:"file","show-file-list":!0,"on-success":e.uploadSucceeded,"on-error":e.uploadFailed}},[l("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v(e._s(e.$t("m.Choose_File")))])],1)],1)],1),l("el-col",{attrs:{span:24}},[l("vxe-table",{attrs:{stripe:"","auto-resize":"",data:e.problem.testCaseScore,align:"center"}},[l("vxe-table-column",{attrs:{field:"input",title:e.$t("m.Sample_Input_File"),"min-width":"100"}}),l("vxe-table-column",{attrs:{field:"output",title:e.$t("m.Sample_Output_File"),"min-width":"100"}}),l("vxe-table-column",{attrs:{field:"score",title:e.$t("m.Score"),"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[l("el-input",{attrs:{size:"small",placeholder:e.$t("m.Score"),disabled:1!=e.problem.type},model:{value:a.score,callback:function(t){e.$set(a,"score",t)},expression:"row.score"}})]}}],null,!1,2438456298)})],1)],1)],1),l("div",{directives:[{name:"show",rawName:"v-show",value:!e.problem.isUploadCase,expression:"!problem.isUploadCase"}]},[e._l(e.problemSamples,(function(t,a){return l("el-form-item",{key:"sample"+a},[l("Accordion",{attrs:{title:e.$t("m.Problem_Sample")+(a+1),isOpen:!!t.isOpen,index:a},on:{changeVisible:e.changeSampleVisible}},[l("el-button",{attrs:{slot:"header",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.deleteSample(a)}},slot:"header"},[e._v(" "+e._s(e.$t("m.Delete"))+" ")]),l("el-row",{attrs:{gutter:20}},[l("el-col",{attrs:{xs:24,md:12}},[l("el-form-item",{attrs:{label:e.$t("m.Sample_Input"),required:""}},[l("el-input",{attrs:{rows:5,type:"textarea",placeholder:e.$t("m.Sample_Input")},model:{value:t.input,callback:function(l){e.$set(t,"input",l)},expression:"sample.input"}})],1)],1),l("el-col",{attrs:{xs:24,md:12}},[l("el-form-item",{attrs:{label:e.$t("m.Sample_Output"),required:""}},[l("el-input",{attrs:{rows:5,type:"textarea",placeholder:e.$t("m.Sample_Output")},model:{value:t.output,callback:function(l){e.$set(t,"output",l)},expression:"sample.output"}})],1)],1),l("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.problem.type,expression:"problem.type == 1"}],attrs:{span:24}},[l("el-form-item",{attrs:{label:e.$t("m.Score")}},[l("el-input",{attrs:{type:"number",size:"small",placeholder:e.$t("m.Score")},model:{value:t.score,callback:function(l){e.$set(t,"score",l)},expression:"sample.score"}})],1)],1)],1)],1)],1)})),l("div",{staticClass:"add-sample-btn"},[l("el-button",{staticClass:"add-samples",attrs:{icon:"el-icon-plus",type:"small"},on:{click:function(t){return e.addSample()}}},[e._v(e._s(e.$t("m.Add_Sample"))+" ")])],1)],2)],1),l("el-form-item",{attrs:{label:e.$t("m.Source")}},[l("el-input",{attrs:{placeholder:e.$t("m.Source")},model:{value:e.problem.source,callback:function(t){e.$set(e.problem,"source",t)},expression:"problem.source"}})],1),e.problem.isRemote?e._e():l("el-form-item",{attrs:{label:e.$t("m.Auto_Remove_the_Blank_at_the_End_of_Code")}},[l("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:e.problem.isRemoveEndBlank,callback:function(t){e.$set(e.problem,"isRemoveEndBlank",t)},expression:"problem.isRemoveEndBlank"}})],1),l("el-form-item",{attrs:{label:e.$t("m.Publish_the_Judging_Result_of_Test_Data")}},[l("el-switch",{attrs:{"active-text":"","inactive-text":""},model:{value:e.problem.openCaseResult,callback:function(t){e.$set(e.problem,"openCaseResult",t)},expression:"problem.openCaseResult"}})],1),l("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.submit()}}},[e._v(e._s(e.$t("m.Save")))])],2)],1)],1)],1)},r=[],s=l("5530"),i=l("1da1"),o=l("b85c"),m=(l("96cf"),l("a9e3"),l("b0c0"),l("4e82"),l("e9c43"),l("7db0"),l("d3b7"),l("fb6a"),l("ac1f"),l("1276"),l("4de4"),l("a434"),l("d81d"),l("b64b"),l("90b9")),p=l("2f62"),n=l("3228"),u=l("9a36"),d=l("a956"),c=l("a2e7"),b=l("da4f"),h=l("ac13"),g={name:"GroupProblem",components:{Accordion:c["a"],AddExtraFile:b["a"],CodeMirror:h["default"],Editor:d["default"]},props:{mode:{type:String,default:"edit"},title:{type:String,default:"Edit Problem"},apiMethod:{type:String,default:"addGroupProblem"},pid:{type:Number,default:null},contestID:{type:Number,default:null},examID:{type:Number,default:null}},data:function(){return{rules:{title:{required:!0,message:"Title is required",trigger:"blur"},input_description:{required:!0,message:"Input Description is required",trigger:"blur"},output_description:{required:!0,message:"Output Description is required",trigger:"blur"}},loadingCompile:!1,contest:{},exam:{},codeTemplate:{},contestProblem:{displayId:null,displayTitle:null,cid:null,pid:null},examProblem:{displayId:null,displayTitle:null,eid:null,pid:null},problem:{id:null,title:"",problemId:"",description:"",input:"",output:"",timeLimit:1e3,memoryLimit:256,stackLimit:128,difficulty:0,auth:1,codeShare:!0,examples:[],spjLanguage:"",spjCode:"",spjCompileOk:!1,uploadTestcaseDir:"",testCaseScore:[],isRemote:!1,isUploadCase:!0,type:0,hint:"",source:"",cid:null,eid:null,judgeMode:"default",userExtraFile:"",judgeExtraFile:"",gid:null},problemTags:[],problemLanguages:[],problemSamples:[],problemCodeTemplate:[],reProblem:{},testCaseUploaded:!1,allLanguage:[],allSpjLanguage:[],allTags:[],allTagsTmp:[],inputVisible:!1,tagInput:"",spjMode:"",disableRuleType:!1,routeName:"",uploadTestcaseDir:"",uploadFileUrl:"",error:{tags:"",spj:"",languages:"",testCase:""},PROBLEM_LEVEL:{},spjRecord:{spjCode:"",spjLanguage:""},addUserExtraFile:!1,addJudgeExtraFile:!1,userExtraFile:null,judgeExtraFile:null}},mounted:function(){var e=this;this.PROBLEM_LEVEL=Object.assign({},u["m"]),this.uploadFileUrl="/api/file/upload-testcase-zip?gid="+this.$route.params.groupID,n["a"].getGroupProblemTagList(this.$route.params.groupID).then((function(t){e.allTags=t.data.data;var l,a=Object(o["a"])(t.data.data);try{for(a.s();!(l=a.n()).done;){var r=l.value;e.allTagsTmp.push({value:r.name,oj:r.oj})}}catch(s){a.e(s)}finally{a.f()}})).catch((function(){})),n["a"].getLanguages(this.$route.params.problemId,!1).then((function(t){var l=t.data.data;e.allLanguage=l;for(var a=0;a<l.length;a++)1==l[a].isSpj&&e.allSpjLanguage.push(l[a]);e.problem=e.reProblem={id:null,problemId:"",title:"",description:"",input:"",output:"",timeLimit:1e3,memoryLimit:256,stackLimit:128,difficulty:0,auth:1,codeShare:!0,examples:[],spjLanguage:"",spjCode:"",spjCompileOk:!1,isUploadCase:!0,uploadTestcaseDir:"",testCaseScore:[],contestProblem:{},examProblem:{},type:0,hint:"",source:"",cid:null,eid:null,judgeMode:"default",userExtraFile:null,judgeExtraFile:null},e.contestID&&(e.problem.cid=e.reProblem.cid=e.contestID,e.problem.auth=e.reProblem.auth=3,e.disableRuleType=!0,n["a"].getGroupContest(e.contestID).then((function(t){e.problem.type=e.reProblem.type=t.data.data.type,e.contest=t.data.data}))),e.examID&&(e.problem.eid=e.reProblem.eid=e.examID,e.problem.auth=e.reProblem.auth=3,e.disableRuleType=!0,n["a"].getGroupExam(e.examID).then((function(t){e.problem.type=1,e.exam=t.data.data}))),e.problem.spjLanguage="C",e.init()}))},watch:{$route:function(){this.$refs.form.resetFields(),this.problem=this.reProblem,this.problemTags=[],this.problemLanguages=[],this.problemSamples=[],this.problemCodeTemplate=[],this.codeTemplate=[],this.init()},problemLanguages:function(e){var t,l=this,a={},r=JSON.parse(JSON.stringify(e)).sort(),s=Object(o["a"])(r);try{var i=function(){var e=t.value;if(void 0===l.codeTemplate[e]){var r,s=l.allLanguage.find((function(t){return t.name===e})),i=l.problemCodeTemplate;i&&(r=i.find((function(e){return e.lid==s.id}))),a[e]=void 0==r?{id:null,status:!1,code:s.codeTemplate,mode:s.contentType}:{id:r.id,status:!0,code:r.code,mode:s.contentType}}else a[e]=l.codeTemplate[e]};for(s.s();!(t=s.n()).done;)i()}catch(m){s.e(m)}finally{s.f()}this.codeTemplate=a},"problem.spjLanguage":function(e){var t=this;this.allSpjLanguage.length&&(this.spjMode=this.allSpjLanguage.find((function(e){return e.name==t.problem.spjLanguage&&1==e.isSpj}))["contentType"])}},methods:{init:function(){var e=this;if("edit"===this.mode)n["a"].getGroupProblem(this.pid).then((function(t){var l=t.data.data;l.spjCompileOk=!1,l.uploadTestcaseDir="",l.testCaseScore=[],l.spjCode||(l.spjCode=""),l.spjLanguage=l.spjLanguage||"C",l.problemId=l.problemId.slice(e.group.shortName.length),e.spjRecord.spjLanguage=l.spjLanguage,e.spjRecord.spjCode=l.spjCode,e.problem=l,e.problem["examples"]=m["a"].stringToExamples(l.examples),e.problem["examples"][0]["isOpen"]=!0,e.testCaseUploaded=!0,e.problem.userExtraFile&&(e.addUserExtraFile=!0,e.userExtraFile=JSON.parse(e.problem.userExtraFile)),e.problem.judgeExtraFile&&(e.addJudgeExtraFile=!0,e.judgeExtraFile=JSON.parse(e.problem.judgeExtraFile)),n["a"].getGroupProblemCases(e.pid,e.problem.isUploadCase).then((function(t){e.problem.isUploadCase?e.problem.testCaseScore=t.data.data:(e.problemSamples=t.data.data,e.problemSamples[0]["isOpen"]=!0)}))})),this.contestID&&n["a"].getGroupContestProblem(this.pid,this.contestID).then((function(t){e.contestProblem=t.data.data})),this.examID&&n["a"].getGroupExamProblem(this.pid,this.examID).then((function(t){e.examProblem=t.data.data})),this.getProblemCodeTemplateAndLanguage(),n["a"].getGroupProblemTags(this.pid).then((function(t){e.problemTags=t.data.data}));else{this.addExample(),this.testCaseUploaded=!1;var t,l=Object(o["a"])(this.allLanguage);try{for(l.s();!(t=l.n()).done;){var a=t.value;this.problemLanguages.push(a.name)}}catch(r){l.e(r)}finally{l.f()}}},getProblemCodeTemplateAndLanguage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return l=e,t.next=3,n["a"].getProblemCodeTemplate(l.pid).then((function(e){l.problemCodeTemplate=e.data.data}));case 3:n["a"].getProblemLanguages(l.pid).then((function(e){for(var t=e.data.data,a=0;a<t.length;a++)l.problemLanguages.push(t[a].name)}));case 4:case"end":return t.stop()}}),t)})))()},switchMode:function(e){var t="General_Judge",l="General_Judge_Mode_Tips";"spj"==e?(t="Special_Judge",l="Special_Judge_Mode_Tips"):"interactive"==e&&(t="Interactive_Judge",l="Interactive_Judge_Mode_Tips");var a=this.$createElement;this.$msgbox({title:this.$i18n.t("m."+t),message:a("div",null,[a("p",{style:"text-align: center;font-weight:bolder;color:red"},this.$i18n.t("m.Change_Judge_Mode")),a("br",null,null),a("p",{style:"font-weight:bolder"},this.$i18n.t("m."+l))])})},querySearch:function(e,t){var l="ME";this.problem.isRemote&&(l=this.problem.problemId.split("-")[0]);var a=this.allTagsTmp.filter((function(e){return e.oj==l})),r=e?a.filter((function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())})):a;t(r)},getLevelName:function(e){return m["a"].getLevelName(e)},selectTag:function(e){for(var t=0;t<this.problemTags.length;t++)if(this.problemTags[t].name==e.value)return this.$msg.warning(this.$i18n.t("m.Add_Tag_Error")),void(this.tagInput="");this.tagInput=e.value},addTag:function(e){var t={name:this.tagInput};if(this.tagInput){for(var l=0;l<this.problemTags.length;l++)if(this.problemTags[l].name==this.tagInput)return this.$msg.warning(this.$i18n.t("m.Add_Tag_Error")),void(this.tagInput="");this.problemTags.push(t),this.inputVisible=!1,this.tagInput=""}},closeTag:function(e){this.problemTags.splice(this.problemTags.map((function(e){return e.name})).indexOf(e),1)},deleteFile:function(e,t){"user"==e?this.$delete(this.userExtraFile,t):this.$delete(this.judgeExtraFile,t)},upsertFile:function(e,t,l,a){"user"==e?(l&&l!=t&&this.$delete(this.userExtraFile,l),this.userExtraFile||(this.userExtraFile={}),this.userExtraFile[t]=a):(l&&l!=t&&this.$delete(this.judgeExtraFile,t),this.judgeExtraFile||(this.judgeExtraFile={}),this.judgeExtraFile[t]=a)},problemTypeChange:function(e){if(1==e)for(var t=this.problemSamples.length,l=parseInt(100/t),a=100-l*t,r=0;r<t;r++)this.problemSamples[r].score=r>=t-a?l+1:l},addExample:function(){this.problem.examples.push({input:"",output:"",isOpen:!0})},changeExampleVisible:function(e,t){this.problem.examples[e]["isOpen"]=t},addSample:function(){this.mode,this.problemSamples.push({input:"",output:"",score:0==this.problem.type?null:0,pid:this.pid,isOpen:!0})},deleteExample:function(e){this.problem.examples.splice(e,1)},deleteSample:function(e){this.problemSamples.splice(e,1)},changeSampleVisible:function(e,t){this.problemSamples[e]["isOpen"]=t},uploadSucceeded:function(e){if(200!=e.status)return this.$msg.error(e.msg),void(this.testCaseUploaded=!1);this.$msg.success(this.$i18n.t("m.Upload_Testcase_Successfully"));for(var t=e.data.fileList,l=parseInt(100/t.length),a=100-l*t.length,r=0;r<t.length;r++)l&&(r>=t.length-a?t[r].score=l+1:t[r].score=l),t[r].output||(t[r].output="-"),t[r].pid=this.problem.id;this.problem.testCaseScore=t,this.testCaseUploaded=!0,this.problem.uploadTestcaseDir=e.data.fileListDir},uploadFailed:function(){this.$msg.error(this.$i18n.t("m.Upload_Testcase_Failed"))},compileSPJ:function(){var e=this,t={pid:this.problem.id,code:this.problem.spjCode,language:this.problem.spjLanguage,extraFiles:this.judgeExtraFile};this.loadingCompile=!0;var l="groupCompileSpj";"interactive"==this.problem.judgeMode&&(l="groupCompileInteractive"),n["a"][l](t,this.$route.params.groupID).then((function(t){e.loadingCompile=!1,e.problem.spjCompileOk=!0,e.error.spj="",e.$msg.success(e.$i18n.t("m.Compiled_Successfully"))}),(function(t){e.loadingCompile=!1,e.problem.spjCompileOk=!1;var l=e.$createElement;e.$msgbox({title:"Compile Error",type:"error",message:l("pre",t.data.msg),showCancelButton:!1,closeOnClickModal:!1,customClass:"dialog-compile-error"})}))},submit:function(){var e=this;if(this.problem.problemId){if(this.contestID){if(!this.contestProblem.displayId)return void this.$msg.error(this.$i18n.t("m.Contest_Display_ID")+" "+this.$i18n.t("m.is_required"));if(!this.contestProblem.displayTitle)return void this.$msg.error(this.$i18n.t("m.Contest_Display_Title")+" "+this.$i18n.t("m.is_required"))}if(this.examID){if(!this.examProblem.displayId)return void this.$msg.error(this.$i18n.t("m.Exam_Display_ID")+" "+this.$i18n.t("m.is_required"));if(!this.examProblem.displayTitle)return void this.$msg.error(this.$i18n.t("m.Exam_Display_Title")+" "+this.$i18n.t("m.is_required"))}if(!this.problem.isRemote)if(this.problem.isUploadCase){if(!this.testCaseUploaded)return this.error.testCase=this.$i18n.t("m.Judge_Samples")+" "+this.$i18n.t("m.is_required"),void this.$msg.error(this.error.testCase);if(1==this.problem.type)for(var t=0;t<this.problemSamples.length;t++){if(""==this.problemSamples[t].score)return void this.$msg.error(this.$i18n.t("m.Problem_Sample")+(t+1)+" "+this.$i18n.t("m.Score_must_be_an_integer"));try{if(parseInt(this.problemSamples[t].score)<0)return void this.$msg.error(this.$i18n.t("m.Problem_Sample")+(t+1)+" "+this.$i18n.t("m.Score_must_be_greater_than_or_equal_to_0"))}catch(y){return void this.$msg.error(this.$i18n.t("m.Score_must_be_an_integer"))}}}else{if(!this.problemSamples.length)return void this.$msg.error(this.$i18n.t("m.Judge_Samples")+" "+this.$i18n.t("m.is_required"));var l,a=Object(o["a"])(this.problemSamples);try{for(a.s();!(l=a.n()).done;){var r=l.value;if(!r.input&&!r.output)return void this.$msg.error(this.$i18n.t("m.Sample_Input")+" or "+this.$i18n.t("m.Sample_Output")+" "+this.$i18n.t("m.is_required"))}}catch(C){a.e(C)}finally{a.f()}if(1==this.problem.type)for(var s=0;s<this.problemSamples.length;s++){if(""==this.problemSamples[s].score)return void this.$msg.error(this.$i18n.t("m.Problem_Sample")+(s+1)+" "+this.$i18n.t("m.Score_must_be_an_integer"));try{if(parseInt(this.problemSamples[s].score)<0)return void this.$msg.error(this.$i18n.t("m.Problem_Sample")+(s+1)+" "+this.$i18n.t("m.Score_must_be_greater_than_or_equal_to_0"))}catch(y){return void this.$msg.error(this.$i18n.t("m.Score_must_be_an_integer"))}}}var i=this.spjRecord.spjLanguage!=this.problem.spjLanguage||this.spjRecord.spjCode!=this.problem.spjCode;if(this.problem.isRemote||"default"==this.problem.judgeMode||(this.problem.spjCode?!this.problem.spjCompileOk&&i&&(this.error.spj=this.$i18n.t("m.Spj_Or_Interactive_Code_not_Compile_Success")):(this.error.spj=this.$i18n.t("m.Spj_Or_Interactive_Code")+" "+this.$i18n.t("m.is_required"),this.$msg.error(this.error.spj)),!this.error.spj)){if(!this.problemLanguages.length)return this.error.languages=this.$i18n.t("m.Language")+" "+this.$i18n.t("m.is_required"),void this.$msg.error(this.error.languages);this.problem.id||(this.problem.gid=this.$route.params.groupID),"updateGroupContestProblem"===this.apiMethod&&(this.problem.cid=this.contest.id),"updateGroupExamProblem"===this.apiMethod&&(this.problem.eid=this.exam.id),"addGroupProblem"!==this.apiMethod&&"addGroupContestProblem"!==this.apiMethod&&"addGroupExamProblem"!==this.apiMethod||(this.problem.author=this.userInfo.username);var p="ME";this.problem.isRemote&&(p=this.problem.problemId.split("-")[0]);var u=[];if(this.problemTags.length>0){u=Object.assign([],this.problemTags);for(var d=0;d<u.length;d++){var c,b=Object(o["a"])(this.allTags);try{for(b.s();!(c=b.n()).done;){var h=c.value;if(u[d].name==h.name&&h.oj==p){u[d]=h;break}}}catch(C){b.e(C)}finally{b.f()}}}this.problemCodeTemplate=[];for(var g=Object.assign([],this.problemLanguages),f=0;f<g.length;f++){g[f]={name:g[f]};var _,v=Object(o["a"])(this.allLanguage);try{for(v.s();!(_=v.n()).done;){var x=_.value;if(g[f].name==x.name){g[f]=x,this.codeTemplate[x.name].status&&this.problemCodeTemplate.push({id:this.codeTemplate[x.name].id,pid:this.pid,code:this.codeTemplate[x.name].code,lid:x.id,status:this.codeTemplate[x.name].status});break}}}catch(C){v.e(C)}finally{v.f()}}var $={};"default"!=this.problem.judgeMode?i&&($["changeModeCode"]=!0):this.spjRecord.spjCode||($["changeModeCode"]=!0,this.problem.spjCode=null,this.problem.spjLanguage=null),this.userExtraFile&&0!=Object.keys(this.userExtraFile).length?this.problem.userExtraFile=JSON.stringify(this.userExtraFile):this.problem.userExtraFile=null,this.judgeExtraFile&&0!=Object.keys(this.judgeExtraFile).length?this.problem.judgeExtraFile=JSON.stringify(this.judgeExtraFile):this.problem.judgeExtraFile=null,$["problem"]=Object.assign({},this.problem),$.problem.examples=m["a"].examplesToString(this.problem.examples),$["codeTemplates"]=this.problemCodeTemplate,$["tags"]=u,$["languages"]=g,$["isUploadTestCase"]=this.problem.isUploadCase,$["uploadTestcaseDir"]=this.problem.uploadTestcaseDir,$["judgeMode"]=this.problem.judgeMode,this.problem.isUploadCase?$["samples"]=this.problem.testCaseScore:$["samples"]=this.problemSamples,n["a"][this.apiMethod]($).then((function(t){e.contestID&&(t.data.data&&(e.contestProblem["pid"]=t.data.data.pid,e.contestProblem["cid"]=e.contestID),n["a"].updateGroupContestProblem(e.contestProblem).then((function(e){}))),e.examID?(t.data.data&&(e.examProblem["pid"]=t.data.data.pid,e.examProblem["eid"]=e.examID),n["a"].updateGroupExamProblem(e.examProblem).then((function(t){"edit"===e.mode?(e.$msg.success(e.$t("m.Update_Successfully")),e.$emit("handleEditPage")):(e.$msg.success(e.$t("m.Create_Successfully")),e.contestID||e.examID?e.$emit("handleCreateProblemPage"):e.$emit("handleCreatePage")),e.$emit("currentChange",1)}))):("edit"===e.mode?(e.$msg.success(e.$t("m.Update_Successfully")),e.$emit("handleEditPage")):(e.$msg.success(e.$t("m.Create_Successfully")),e.contestID||e.examID?e.$emit("handleCreateProblemPage"):e.$emit("handleCreatePage")),e.$emit("currentChange",1))})).catch((function(){}))}else this.$msg.error(this.error.spj)}else this.$msg.error(this.$i18n.t("m.Problem_Display_ID")+" "+this.$i18n.t("m.is_required"))}},computed:Object(s["a"])({},Object(p["c"])(["userInfo","group"]))},f=g,_=(l("18a7"),l("2877")),v=Object(_["a"])(f,a,r,!1,null,"51082408",null);t["a"]=v.exports}}]);