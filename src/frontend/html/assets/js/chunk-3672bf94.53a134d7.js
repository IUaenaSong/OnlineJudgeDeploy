(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3672bf94","chunk-13f2b59d"],{"1ef8":function(t,e,i){"use strict";i("a0d0")},"7e81":function(t,e,i){},"857a":function(t,e,i){var n=i("e330"),o=i("1d80"),a=i("577e"),l=/"/g,s=n("".replace);t.exports=function(t,e,i,n){var r=a(o(t)),c="<"+e;return""!==i&&(c+=" "+i+'="'+s(a(n),l,"&quot;")+'"'),c+">"+r+"</"+e+">"}},"8d9e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[i("el-card",[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"panel-title home-title"},[t._v(t._s(t.$t("m.SysNotice")))]),i("div",{staticStyle:{"font-size":"13px","margin-top":"5px",color:"red"}},[t._v(" "+t._s(t.$t("m.Push_System_Notification_Every_Hour"))+" ")])]),i("div",{staticClass:"create"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openNoticeDialog(null)}}},[t._v(t._s(t.$t("m.Create")))])],1),i("div",{staticClass:"list"},[i("vxe-table",{ref:"table",attrs:{loading:t.loading,data:t.noticeList,"auto-resize":"",stripe:""}},[i("vxe-table-column",{attrs:{"min-width":"50",field:"id",title:"ID"}}),i("vxe-table-column",{attrs:{"min-width":"150",field:"title","show-overflow":"",title:t.$t("m.Notice_Title")}}),i("vxe-table-column",{attrs:{"min-width":"150",field:"gmtCreate",title:t.$t("m.Created_Time")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t._f("localtime")(i.gmtCreate))+" ")]}}])}),i("vxe-table-column",{attrs:{"min-width":"150",field:"gmtModified",title:t.$t("m.Modified_Time")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(t._f("localtime")(i.gmtModified))+" ")]}}])}),i("vxe-table-column",{attrs:{"min-width":"150",field:"adminUsername","show-overflow":"",title:t.$t("m.Author")}}),i("vxe-table-column",{attrs:{"min-width":"100",field:"state",title:t.$t("m.Notice_Push")}}),i("vxe-table-column",{attrs:{title:t.$t("m.Option"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.Edit_Notice"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-edit-outline",size:"mini",type:"primary"},nativeOn:{click:function(i){return t.openNoticeDialog(e.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("m.Delete_Notice"),placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-delete-solid",size:"mini",type:"danger"},nativeOn:{click:function(i){return t.deleteNotice(e.row.id)}}})],1)]}}])})],1),i("div",{staticClass:"panel-options"},[t.total?i("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.currentChange}}):t._e()],1)],1)])],1),i("el-dialog",{attrs:{title:t.noticeDialogTitle,visible:t.showEditNoticeDialog,fullscreen:!0},on:{"update:visible":function(e){t.showEditNoticeDialog=e},open:t.onOpenEditDialog}},[i("el-form",{attrs:{"label-position":"top",model:t.notice}},[i("el-form-item",{attrs:{label:t.$t("m.Notice_Title"),required:""}},[i("el-input",{staticClass:"title-input",attrs:{placeholder:t.$t("m.Notice_Title")},model:{value:t.notice.title,callback:function(e){t.$set(t.notice,"title",e)},expression:"notice.title"}})],1),i("el-form-item",{attrs:{label:t.$t("m.Notice_Content"),required:""}},[i("Editor",{attrs:{value:t.notice.content},on:{"update:value":function(e){return t.$set(t.notice,"content",e)}}})],1),i("div",{staticClass:"visible-box"},[i("span",[t._v(t._s(t.$t("m.Notice_Recipient")))]),i("span",[i("el-radio",{attrs:{label:"All"},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.All_User")))]),i("el-radio",{attrs:{label:"Single",disabled:""},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.Designated_User")))]),i("el-radio",{attrs:{label:"Admin",disabled:""},model:{value:t.notice.type,callback:function(e){t.$set(t.notice,"type",e)},expression:"notice.type"}},[t._v(t._s(t.$t("m.All_Admin")))])],1)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},nativeOn:{click:function(e){t.showEditNoticeDialog=!1}}},[t._v(t._s(t.$t("m.Cancel")))]),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.submitNotice.apply(null,arguments)}}},[t._v(t._s(t.$t("m.OK")))])],1)],1)],1)},o=[],a=i("5530"),l=i("3228"),s=i("2f62"),r=i("a956"),c={name:"notice",components:{Editor:r["default"]},data:function(){return{contestID:"",showEditNoticeDialog:!1,noticeList:[],pageSize:10,total:0,mode:"create",notice:{id:null,title:"",content:"",type:"",adminId:""},noticeDialogTitle:"Edit Notice",loading:!1,currentPage:1}},mounted:function(){this.init()},methods:{init:function(){this.getNoticeList(1)},currentChange:function(t){this.currentPage=t,this.contestID?this.getContestNoticeList(t):this.getNoticeList(t)},getNoticeList:function(t){var e=this;this.loading=!0,l["a"].admin_getNoticeList(t,this.pageSize,"All").then((function(t){e.loading=!1,e.total=t.data.data.total,e.noticeList=t.data.data.records}),(function(t){e.loading=!1}))},onOpenEditDialog:function(){setTimeout((function(){if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!0),window.dispatchEvent(t)}else document.createEventObject&&window.fireEvent("onresize")}),0)},submitNotice:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.id||(e=this.notice);var i="edit"===this.mode?"admin_updateNotice":"admin_createNotice",n=e;l["a"][i](n).then((function(e){t.showEditNoticeDialog=!1,t.$msg.success(t.$i18n.t("m.Post_successfully")),t.init()})).catch()},deleteNotice:function(t){var e=this;this.$confirm(this.$i18n.t("m.Delete_Notice_Tips"),this.$i18n.t("m.Warning"),{confirmButtonText:this.$i18n.t("m.OK"),cancelButtonText:this.$i18n.t("m.Cancel"),type:"warning"}).then((function(){e.loading=!0;var i="admin_deleteNotice";l["a"][i](t).then((function(t){e.loading=!0,e.$msg.success(e.$i18n.t("m.Delete_successfully")),e.init()}))})).catch((function(){e.loading=!1}))},openNoticeDialog:function(t){this.showEditNoticeDialog=!0,null!==t?(this.noticeDialogTitle=this.$i18n.t("m.Edit_Notice"),this.notice=Object.assign({},t),this.mode="edit"):(this.noticeDialogTitle=this.$i18n.t("m.Create_Notice"),this.notice.title="",this.notice.content="",this.notice.type="All",this.notice.adminId=this.userInfo.uid,this.mode="create")}},watch:{$route:function(){this.init()}},computed:Object(a["a"])({},Object(s["c"])(["userInfo"]))},u=c,d=(i("1ef8"),i("2877")),m=Object(d["a"])(u,n,o,!1,null,"0cbe2a16",null);e["default"]=m.exports},"92bc":function(t,e,i){"use strict";i("7e81")},9911:function(t,e,i){"use strict";var n=i("23e7"),o=i("857a"),a=i("af03");n({target:"String",proto:!0,forced:a("link")},{link:function(t){return o(this,"a","href",t)}})},a0d0:function(t,e,i){},a956:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("mavon-editor",{ref:"md",style:0!=t.height?"min-height:"+t.height+"px":"",attrs:{ishljs:!0,html:t.openHtml,autofocus:!1,toolbars:t.toolbars,codeStyle:"arduino-light",toolbarsFlag:t.toolbarsFlag},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},scopedSlots:t._u([t.isAdminRole?{key:"left-toolbar-after",fn:function(){return[i("button",{staticClass:"op-icon fa markdown-upload",attrs:{type:"button",title:t.$t("m.Upload_file"),"aria-hidden":"true"},on:{click:t.uploadFile}},[i("i",{staticClass:"el-icon-upload"})])]},proxy:!0}:null],null,!0),model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}}),i("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.uploadFileChange}})],1)},o=[],a=i("5530"),l=(i("a9e3"),i("9911"),i("99af"),i("b0c0"),i("2f62")),s=i("b355"),r={name:"Editor",props:{value:{type:String,default:""},openHtml:{type:Boolean,default:!0},toolbarsFlag:{type:Boolean,default:!0},height:{type:Number,default:0}},data:function(){return{currentValue:this.value,img_file:{},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!1,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}},created:function(){(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID)&&(this.toolbars.imagelink=!0)},methods:{$imgAdd:function(t,e){var i=this;if(this.isAdminRole||this.isGroupAdmin||this.$route.params.examID){var n=new FormData;n.append("image",e),this.$route.params.groupID&&n.append("gid",this.$route.params.groupID),this.$route.params.examID&&n.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-img",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){i.$refs.md.$img2Url(t,e.data.data.link),i.img_file[e.data.data.link]=e.data.data.fileId}))}},$imgDel:function(t){this.$http({url:"/api/file/delete-md-img",method:"get",params:{fileId:this.img_file[t[0]]}})},uploadFile:function(){this.$refs.uploadInput.click()},uploadFileChange:function(t){var e=this,i=t.target.files[0],n=new FormData;n.append("file",i),this.$route.params.groupID&&n.append("gid",this.$route.params.groupID),this.$route.params.examID&&n.append("eid",this.$route.params.examID),this.$http({url:"/api/file/upload-md-file",method:"post",data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var n=e.$refs.md;n.insertText(n.getTextareaDom(),{prefix:"[".concat(i.name,"](").concat(t.data.data.link,")"),subfix:"",str:""})}))}},computed:Object(a["a"])({},Object(l["c"])(["isAdminRole","isGroupAdmin"])),watch:{value:function(t){this.currentValue!==t&&(this.currentValue=t)},currentValue:function(t,e){t!==e&&(this.$emit("update:value",t),this.$nextTick((function(t){Object(s["a"])()})))},isAdminRole:function(t){this.toolbars.imagelink=!!t}}},c=r,u=(i("92bc"),i("2877")),d=Object(u["a"])(c,n,o,!1,null,null,null);e["default"]=d.exports},af03:function(t,e,i){var n=i("d039");t.exports=function(t){return n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}}}]);